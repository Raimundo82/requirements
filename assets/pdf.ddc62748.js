var global$1=typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{};function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}var cachedSetTimeout=defaultSetTimout,cachedClearTimeout=defaultClearTimeout;typeof global$1.setTimeout=="function"&&(cachedSetTimeout=setTimeout);typeof global$1.clearTimeout=="function"&&(cachedClearTimeout=clearTimeout);function runTimeout(l){if(cachedSetTimeout===setTimeout)return setTimeout(l,0);if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout)return cachedSetTimeout=setTimeout,setTimeout(l,0);try{return cachedSetTimeout(l,0)}catch{try{return cachedSetTimeout.call(null,l,0)}catch{return cachedSetTimeout.call(this,l,0)}}}function runClearTimeout(l){if(cachedClearTimeout===clearTimeout)return clearTimeout(l);if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout)return cachedClearTimeout=clearTimeout,clearTimeout(l);try{return cachedClearTimeout(l)}catch{try{return cachedClearTimeout.call(null,l)}catch{return cachedClearTimeout.call(this,l)}}}var queue=[],draining=!1,currentQueue,queueIndex=-1;function cleanUpNextTick(){!draining||!currentQueue||(draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue())}function drainQueue(){if(!draining){var l=runTimeout(cleanUpNextTick);draining=!0;for(var e=queue.length;e;){for(currentQueue=queue,queue=[];++queueIndex<e;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,e=queue.length}currentQueue=null,draining=!1,runClearTimeout(l)}}function nextTick(l){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];queue.push(new Item(l,e)),queue.length===1&&!draining&&runTimeout(drainQueue)}function Item(l,e){this.fun=l,this.array=e}Item.prototype.run=function(){this.fun.apply(null,this.array)};var title="browser",platform="browser",browser=!0,env={},argv=[],version="",versions={},release={},config={};function noop(){}var on=noop,addListener=noop,once=noop,off=noop,removeListener=noop,removeAllListeners=noop,emit=noop;function binding(l){throw new Error("process.binding is not supported")}function cwd(){return"/"}function chdir(l){throw new Error("process.chdir is not supported")}function umask(){return 0}var performance=global$1.performance||{},performanceNow=performance.now||performance.mozNow||performance.msNow||performance.oNow||performance.webkitNow||function(){return new Date().getTime()};function hrtime(l){var e=performanceNow.call(performance)*.001,r=Math.floor(e),t=Math.floor(e%1*1e9);return l&&(r=r-l[0],t=t-l[1],t<0&&(r--,t+=1e9)),[r,t]}var startTime=new Date;function uptime(){var l=new Date,e=l-startTime;return e/1e3}var process={nextTick,title,browser,env,argv,version,versions,on,addListener,once,off,removeListener,removeAllListeners,emit,binding,cwd,chdir,umask,hrtime,platform,release,config,uptime},lookup=[],revLookup=[],Arr=typeof Uint8Array<"u"?Uint8Array:Array,inited=!1;function init(){inited=!0;for(var l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0,r=l.length;e<r;++e)lookup[e]=l[e],revLookup[l.charCodeAt(e)]=e;revLookup["-".charCodeAt(0)]=62,revLookup["_".charCodeAt(0)]=63}function toByteArray(l){inited||init();var e,r,t,i,p,A,P=l.length;if(P%4>0)throw new Error("Invalid string. Length must be a multiple of 4");p=l[P-2]==="="?2:l[P-1]==="="?1:0,A=new Arr(P*3/4-p),t=p>0?P-4:P;var x=0;for(e=0,r=0;e<t;e+=4,r+=3)i=revLookup[l.charCodeAt(e)]<<18|revLookup[l.charCodeAt(e+1)]<<12|revLookup[l.charCodeAt(e+2)]<<6|revLookup[l.charCodeAt(e+3)],A[x++]=i>>16&255,A[x++]=i>>8&255,A[x++]=i&255;return p===2?(i=revLookup[l.charCodeAt(e)]<<2|revLookup[l.charCodeAt(e+1)]>>4,A[x++]=i&255):p===1&&(i=revLookup[l.charCodeAt(e)]<<10|revLookup[l.charCodeAt(e+1)]<<4|revLookup[l.charCodeAt(e+2)]>>2,A[x++]=i>>8&255,A[x++]=i&255),A}function tripletToBase64(l){return lookup[l>>18&63]+lookup[l>>12&63]+lookup[l>>6&63]+lookup[l&63]}function encodeChunk(l,e,r){for(var t,i=[],p=e;p<r;p+=3)t=(l[p]<<16)+(l[p+1]<<8)+l[p+2],i.push(tripletToBase64(t));return i.join("")}function fromByteArray(l){inited||init();for(var e,r=l.length,t=r%3,i="",p=[],A=16383,P=0,x=r-t;P<x;P+=A)p.push(encodeChunk(l,P,P+A>x?x:P+A));return t===1?(e=l[r-1],i+=lookup[e>>2],i+=lookup[e<<4&63],i+="=="):t===2&&(e=(l[r-2]<<8)+l[r-1],i+=lookup[e>>10],i+=lookup[e>>4&63],i+=lookup[e<<2&63],i+="="),p.push(i),p.join("")}function read(l,e,r,t,i){var p,A,P=i*8-t-1,x=(1<<P)-1,C=x>>1,h=-7,S=r?i-1:0,M=r?-1:1,u=l[e+S];for(S+=M,p=u&(1<<-h)-1,u>>=-h,h+=P;h>0;p=p*256+l[e+S],S+=M,h-=8);for(A=p&(1<<-h)-1,p>>=-h,h+=t;h>0;A=A*256+l[e+S],S+=M,h-=8);if(p===0)p=1-C;else{if(p===x)return A?NaN:(u?-1:1)*(1/0);A=A+Math.pow(2,t),p=p-C}return(u?-1:1)*A*Math.pow(2,p-t)}function write(l,e,r,t,i,p){var A,P,x,C=p*8-i-1,h=(1<<C)-1,S=h>>1,M=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,u=t?0:p-1,y=t?1:-1,b=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(P=isNaN(e)?1:0,A=h):(A=Math.floor(Math.log(e)/Math.LN2),e*(x=Math.pow(2,-A))<1&&(A--,x*=2),A+S>=1?e+=M/x:e+=M*Math.pow(2,1-S),e*x>=2&&(A++,x/=2),A+S>=h?(P=0,A=h):A+S>=1?(P=(e*x-1)*Math.pow(2,i),A=A+S):(P=e*Math.pow(2,S-1)*Math.pow(2,i),A=0));i>=8;l[r+u]=P&255,u+=y,P/=256,i-=8);for(A=A<<i|P,C+=i;C>0;l[r+u]=A&255,u+=y,A/=256,C-=8);l[r+u-y]|=b*128}var toString={}.toString,isArray=Array.isArray||function(l){return toString.call(l)=="[object Array]"},INSPECT_MAX_BYTES=50;Buffer.TYPED_ARRAY_SUPPORT=global$1.TYPED_ARRAY_SUPPORT!==void 0?global$1.TYPED_ARRAY_SUPPORT:!0;function kMaxLength(){return Buffer.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function createBuffer(l,e){if(kMaxLength()<e)throw new RangeError("Invalid typed array length");return Buffer.TYPED_ARRAY_SUPPORT?(l=new Uint8Array(e),l.__proto__=Buffer.prototype):(l===null&&(l=new Buffer(e)),l.length=e),l}function Buffer(l,e,r){if(!Buffer.TYPED_ARRAY_SUPPORT&&!(this instanceof Buffer))return new Buffer(l,e,r);if(typeof l=="number"){if(typeof e=="string")throw new Error("If encoding is specified then the first argument must be a string");return allocUnsafe(this,l)}return from(this,l,e,r)}Buffer.poolSize=8192;Buffer._augment=function(l){return l.__proto__=Buffer.prototype,l};function from(l,e,r,t){if(typeof e=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer?fromArrayBuffer(l,e,r,t):typeof e=="string"?fromString(l,e,r):fromObject(l,e)}Buffer.from=function(l,e,r){return from(null,l,e,r)};Buffer.TYPED_ARRAY_SUPPORT&&(Buffer.prototype.__proto__=Uint8Array.prototype,Buffer.__proto__=Uint8Array);function assertSize(l){if(typeof l!="number")throw new TypeError('"size" argument must be a number');if(l<0)throw new RangeError('"size" argument must not be negative')}function alloc(l,e,r,t){return assertSize(e),e<=0?createBuffer(l,e):r!==void 0?typeof t=="string"?createBuffer(l,e).fill(r,t):createBuffer(l,e).fill(r):createBuffer(l,e)}Buffer.alloc=function(l,e,r){return alloc(null,l,e,r)};function allocUnsafe(l,e){if(assertSize(e),l=createBuffer(l,e<0?0:checked(e)|0),!Buffer.TYPED_ARRAY_SUPPORT)for(var r=0;r<e;++r)l[r]=0;return l}Buffer.allocUnsafe=function(l){return allocUnsafe(null,l)};Buffer.allocUnsafeSlow=function(l){return allocUnsafe(null,l)};function fromString(l,e,r){if((typeof r!="string"||r==="")&&(r="utf8"),!Buffer.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var t=byteLength(e,r)|0;l=createBuffer(l,t);var i=l.write(e,r);return i!==t&&(l=l.slice(0,i)),l}function fromArrayLike(l,e){var r=e.length<0?0:checked(e.length)|0;l=createBuffer(l,r);for(var t=0;t<r;t+=1)l[t]=e[t]&255;return l}function fromArrayBuffer(l,e,r,t){if(e.byteLength,r<0||e.byteLength<r)throw new RangeError("'offset' is out of bounds");if(e.byteLength<r+(t||0))throw new RangeError("'length' is out of bounds");return r===void 0&&t===void 0?e=new Uint8Array(e):t===void 0?e=new Uint8Array(e,r):e=new Uint8Array(e,r,t),Buffer.TYPED_ARRAY_SUPPORT?(l=e,l.__proto__=Buffer.prototype):l=fromArrayLike(l,e),l}function fromObject(l,e){if(internalIsBuffer(e)){var r=checked(e.length)|0;return l=createBuffer(l,r),l.length===0||e.copy(l,0,0,r),l}if(e){if(typeof ArrayBuffer<"u"&&e.buffer instanceof ArrayBuffer||"length"in e)return typeof e.length!="number"||isnan(e.length)?createBuffer(l,0):fromArrayLike(l,e);if(e.type==="Buffer"&&isArray(e.data))return fromArrayLike(l,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function checked(l){if(l>=kMaxLength())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+kMaxLength().toString(16)+" bytes");return l|0}Buffer.isBuffer=isBuffer;function internalIsBuffer(l){return!!(l!=null&&l._isBuffer)}Buffer.compare=function(e,r){if(!internalIsBuffer(e)||!internalIsBuffer(r))throw new TypeError("Arguments must be Buffers");if(e===r)return 0;for(var t=e.length,i=r.length,p=0,A=Math.min(t,i);p<A;++p)if(e[p]!==r[p]){t=e[p],i=r[p];break}return t<i?-1:i<t?1:0};Buffer.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};Buffer.concat=function(e,r){if(!isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return Buffer.alloc(0);var t;if(r===void 0)for(r=0,t=0;t<e.length;++t)r+=e[t].length;var i=Buffer.allocUnsafe(r),p=0;for(t=0;t<e.length;++t){var A=e[t];if(!internalIsBuffer(A))throw new TypeError('"list" argument must be an Array of Buffers');A.copy(i,p),p+=A.length}return i};function byteLength(l,e){if(internalIsBuffer(l))return l.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(l)||l instanceof ArrayBuffer))return l.byteLength;typeof l!="string"&&(l=""+l);var r=l.length;if(r===0)return 0;for(var t=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return utf8ToBytes(l).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return r*2;case"hex":return r>>>1;case"base64":return base64ToBytes(l).length;default:if(t)return utf8ToBytes(l).length;e=(""+e).toLowerCase(),t=!0}}Buffer.byteLength=byteLength;function slowToString(l,e,r){var t=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((r===void 0||r>this.length)&&(r=this.length),r<=0)||(r>>>=0,e>>>=0,r<=e))return"";for(l||(l="utf8");;)switch(l){case"hex":return hexSlice(this,e,r);case"utf8":case"utf-8":return utf8Slice(this,e,r);case"ascii":return asciiSlice(this,e,r);case"latin1":case"binary":return latin1Slice(this,e,r);case"base64":return base64Slice(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return utf16leSlice(this,e,r);default:if(t)throw new TypeError("Unknown encoding: "+l);l=(l+"").toLowerCase(),t=!0}}Buffer.prototype._isBuffer=!0;function swap(l,e,r){var t=l[e];l[e]=l[r],l[r]=t}Buffer.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var r=0;r<e;r+=2)swap(this,r,r+1);return this};Buffer.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var r=0;r<e;r+=4)swap(this,r,r+3),swap(this,r+1,r+2);return this};Buffer.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var r=0;r<e;r+=8)swap(this,r,r+7),swap(this,r+1,r+6),swap(this,r+2,r+5),swap(this,r+3,r+4);return this};Buffer.prototype.toString=function(){var e=this.length|0;return e===0?"":arguments.length===0?utf8Slice(this,0,e):slowToString.apply(this,arguments)};Buffer.prototype.equals=function(e){if(!internalIsBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:Buffer.compare(this,e)===0};Buffer.prototype.inspect=function(){var e="",r=INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(e+=" ... ")),"<Buffer "+e+">"};Buffer.prototype.compare=function(e,r,t,i,p){if(!internalIsBuffer(e))throw new TypeError("Argument must be a Buffer");if(r===void 0&&(r=0),t===void 0&&(t=e?e.length:0),i===void 0&&(i=0),p===void 0&&(p=this.length),r<0||t>e.length||i<0||p>this.length)throw new RangeError("out of range index");if(i>=p&&r>=t)return 0;if(i>=p)return-1;if(r>=t)return 1;if(r>>>=0,t>>>=0,i>>>=0,p>>>=0,this===e)return 0;for(var A=p-i,P=t-r,x=Math.min(A,P),C=this.slice(i,p),h=e.slice(r,t),S=0;S<x;++S)if(C[S]!==h[S]){A=C[S],P=h[S];break}return A<P?-1:P<A?1:0};function bidirectionalIndexOf(l,e,r,t,i){if(l.length===0)return-1;if(typeof r=="string"?(t=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=i?0:l.length-1),r<0&&(r=l.length+r),r>=l.length){if(i)return-1;r=l.length-1}else if(r<0)if(i)r=0;else return-1;if(typeof e=="string"&&(e=Buffer.from(e,t)),internalIsBuffer(e))return e.length===0?-1:arrayIndexOf(l,e,r,t,i);if(typeof e=="number")return e=e&255,Buffer.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?i?Uint8Array.prototype.indexOf.call(l,e,r):Uint8Array.prototype.lastIndexOf.call(l,e,r):arrayIndexOf(l,[e],r,t,i);throw new TypeError("val must be string, number or Buffer")}function arrayIndexOf(l,e,r,t,i){var p=1,A=l.length,P=e.length;if(t!==void 0&&(t=String(t).toLowerCase(),t==="ucs2"||t==="ucs-2"||t==="utf16le"||t==="utf-16le")){if(l.length<2||e.length<2)return-1;p=2,A/=2,P/=2,r/=2}function x(u,y){return p===1?u[y]:u.readUInt16BE(y*p)}var C;if(i){var h=-1;for(C=r;C<A;C++)if(x(l,C)===x(e,h===-1?0:C-h)){if(h===-1&&(h=C),C-h+1===P)return h*p}else h!==-1&&(C-=C-h),h=-1}else for(r+P>A&&(r=A-P),C=r;C>=0;C--){for(var S=!0,M=0;M<P;M++)if(x(l,C+M)!==x(e,M)){S=!1;break}if(S)return C}return-1}Buffer.prototype.includes=function(e,r,t){return this.indexOf(e,r,t)!==-1};Buffer.prototype.indexOf=function(e,r,t){return bidirectionalIndexOf(this,e,r,t,!0)};Buffer.prototype.lastIndexOf=function(e,r,t){return bidirectionalIndexOf(this,e,r,t,!1)};function hexWrite(l,e,r,t){r=Number(r)||0;var i=l.length-r;t?(t=Number(t),t>i&&(t=i)):t=i;var p=e.length;if(p%2!==0)throw new TypeError("Invalid hex string");t>p/2&&(t=p/2);for(var A=0;A<t;++A){var P=parseInt(e.substr(A*2,2),16);if(isNaN(P))return A;l[r+A]=P}return A}function utf8Write(l,e,r,t){return blitBuffer(utf8ToBytes(e,l.length-r),l,r,t)}function asciiWrite(l,e,r,t){return blitBuffer(asciiToBytes(e),l,r,t)}function latin1Write(l,e,r,t){return asciiWrite(l,e,r,t)}function base64Write(l,e,r,t){return blitBuffer(base64ToBytes(e),l,r,t)}function ucs2Write(l,e,r,t){return blitBuffer(utf16leToBytes(e,l.length-r),l,r,t)}Buffer.prototype.write=function(e,r,t,i){if(r===void 0)i="utf8",t=this.length,r=0;else if(t===void 0&&typeof r=="string")i=r,t=this.length,r=0;else if(isFinite(r))r=r|0,isFinite(t)?(t=t|0,i===void 0&&(i="utf8")):(i=t,t=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var p=this.length-r;if((t===void 0||t>p)&&(t=p),e.length>0&&(t<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var A=!1;;)switch(i){case"hex":return hexWrite(this,e,r,t);case"utf8":case"utf-8":return utf8Write(this,e,r,t);case"ascii":return asciiWrite(this,e,r,t);case"latin1":case"binary":return latin1Write(this,e,r,t);case"base64":return base64Write(this,e,r,t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ucs2Write(this,e,r,t);default:if(A)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),A=!0}};Buffer.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function base64Slice(l,e,r){return e===0&&r===l.length?fromByteArray(l):fromByteArray(l.slice(e,r))}function utf8Slice(l,e,r){r=Math.min(l.length,r);for(var t=[],i=e;i<r;){var p=l[i],A=null,P=p>239?4:p>223?3:p>191?2:1;if(i+P<=r){var x,C,h,S;switch(P){case 1:p<128&&(A=p);break;case 2:x=l[i+1],(x&192)===128&&(S=(p&31)<<6|x&63,S>127&&(A=S));break;case 3:x=l[i+1],C=l[i+2],(x&192)===128&&(C&192)===128&&(S=(p&15)<<12|(x&63)<<6|C&63,S>2047&&(S<55296||S>57343)&&(A=S));break;case 4:x=l[i+1],C=l[i+2],h=l[i+3],(x&192)===128&&(C&192)===128&&(h&192)===128&&(S=(p&15)<<18|(x&63)<<12|(C&63)<<6|h&63,S>65535&&S<1114112&&(A=S))}}A===null?(A=65533,P=1):A>65535&&(A-=65536,t.push(A>>>10&1023|55296),A=56320|A&1023),t.push(A),i+=P}return decodeCodePointsArray(t)}var MAX_ARGUMENTS_LENGTH=4096;function decodeCodePointsArray(l){var e=l.length;if(e<=MAX_ARGUMENTS_LENGTH)return String.fromCharCode.apply(String,l);for(var r="",t=0;t<e;)r+=String.fromCharCode.apply(String,l.slice(t,t+=MAX_ARGUMENTS_LENGTH));return r}function asciiSlice(l,e,r){var t="";r=Math.min(l.length,r);for(var i=e;i<r;++i)t+=String.fromCharCode(l[i]&127);return t}function latin1Slice(l,e,r){var t="";r=Math.min(l.length,r);for(var i=e;i<r;++i)t+=String.fromCharCode(l[i]);return t}function hexSlice(l,e,r){var t=l.length;(!e||e<0)&&(e=0),(!r||r<0||r>t)&&(r=t);for(var i="",p=e;p<r;++p)i+=toHex(l[p]);return i}function utf16leSlice(l,e,r){for(var t=l.slice(e,r),i="",p=0;p<t.length;p+=2)i+=String.fromCharCode(t[p]+t[p+1]*256);return i}Buffer.prototype.slice=function(e,r){var t=this.length;e=~~e,r=r===void 0?t:~~r,e<0?(e+=t,e<0&&(e=0)):e>t&&(e=t),r<0?(r+=t,r<0&&(r=0)):r>t&&(r=t),r<e&&(r=e);var i;if(Buffer.TYPED_ARRAY_SUPPORT)i=this.subarray(e,r),i.__proto__=Buffer.prototype;else{var p=r-e;i=new Buffer(p,void 0);for(var A=0;A<p;++A)i[A]=this[A+e]}return i};function checkOffset(l,e,r){if(l%1!==0||l<0)throw new RangeError("offset is not uint");if(l+e>r)throw new RangeError("Trying to access beyond buffer length")}Buffer.prototype.readUIntLE=function(e,r,t){e=e|0,r=r|0,t||checkOffset(e,r,this.length);for(var i=this[e],p=1,A=0;++A<r&&(p*=256);)i+=this[e+A]*p;return i};Buffer.prototype.readUIntBE=function(e,r,t){e=e|0,r=r|0,t||checkOffset(e,r,this.length);for(var i=this[e+--r],p=1;r>0&&(p*=256);)i+=this[e+--r]*p;return i};Buffer.prototype.readUInt8=function(e,r){return r||checkOffset(e,1,this.length),this[e]};Buffer.prototype.readUInt16LE=function(e,r){return r||checkOffset(e,2,this.length),this[e]|this[e+1]<<8};Buffer.prototype.readUInt16BE=function(e,r){return r||checkOffset(e,2,this.length),this[e]<<8|this[e+1]};Buffer.prototype.readUInt32LE=function(e,r){return r||checkOffset(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};Buffer.prototype.readUInt32BE=function(e,r){return r||checkOffset(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};Buffer.prototype.readIntLE=function(e,r,t){e=e|0,r=r|0,t||checkOffset(e,r,this.length);for(var i=this[e],p=1,A=0;++A<r&&(p*=256);)i+=this[e+A]*p;return p*=128,i>=p&&(i-=Math.pow(2,8*r)),i};Buffer.prototype.readIntBE=function(e,r,t){e=e|0,r=r|0,t||checkOffset(e,r,this.length);for(var i=r,p=1,A=this[e+--i];i>0&&(p*=256);)A+=this[e+--i]*p;return p*=128,A>=p&&(A-=Math.pow(2,8*r)),A};Buffer.prototype.readInt8=function(e,r){return r||checkOffset(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]};Buffer.prototype.readInt16LE=function(e,r){r||checkOffset(e,2,this.length);var t=this[e]|this[e+1]<<8;return t&32768?t|4294901760:t};Buffer.prototype.readInt16BE=function(e,r){r||checkOffset(e,2,this.length);var t=this[e+1]|this[e]<<8;return t&32768?t|4294901760:t};Buffer.prototype.readInt32LE=function(e,r){return r||checkOffset(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};Buffer.prototype.readInt32BE=function(e,r){return r||checkOffset(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};Buffer.prototype.readFloatLE=function(e,r){return r||checkOffset(e,4,this.length),read(this,e,!0,23,4)};Buffer.prototype.readFloatBE=function(e,r){return r||checkOffset(e,4,this.length),read(this,e,!1,23,4)};Buffer.prototype.readDoubleLE=function(e,r){return r||checkOffset(e,8,this.length),read(this,e,!0,52,8)};Buffer.prototype.readDoubleBE=function(e,r){return r||checkOffset(e,8,this.length),read(this,e,!1,52,8)};function checkInt(l,e,r,t,i,p){if(!internalIsBuffer(l))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<p)throw new RangeError('"value" argument is out of bounds');if(r+t>l.length)throw new RangeError("Index out of range")}Buffer.prototype.writeUIntLE=function(e,r,t,i){if(e=+e,r=r|0,t=t|0,!i){var p=Math.pow(2,8*t)-1;checkInt(this,e,r,t,p,0)}var A=1,P=0;for(this[r]=e&255;++P<t&&(A*=256);)this[r+P]=e/A&255;return r+t};Buffer.prototype.writeUIntBE=function(e,r,t,i){if(e=+e,r=r|0,t=t|0,!i){var p=Math.pow(2,8*t)-1;checkInt(this,e,r,t,p,0)}var A=t-1,P=1;for(this[r+A]=e&255;--A>=0&&(P*=256);)this[r+A]=e/P&255;return r+t};Buffer.prototype.writeUInt8=function(e,r,t){return e=+e,r=r|0,t||checkInt(this,e,r,1,255,0),Buffer.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[r]=e&255,r+1};function objectWriteUInt16(l,e,r,t){e<0&&(e=65535+e+1);for(var i=0,p=Math.min(l.length-r,2);i<p;++i)l[r+i]=(e&255<<8*(t?i:1-i))>>>(t?i:1-i)*8}Buffer.prototype.writeUInt16LE=function(e,r,t){return e=+e,r=r|0,t||checkInt(this,e,r,2,65535,0),Buffer.TYPED_ARRAY_SUPPORT?(this[r]=e&255,this[r+1]=e>>>8):objectWriteUInt16(this,e,r,!0),r+2};Buffer.prototype.writeUInt16BE=function(e,r,t){return e=+e,r=r|0,t||checkInt(this,e,r,2,65535,0),Buffer.TYPED_ARRAY_SUPPORT?(this[r]=e>>>8,this[r+1]=e&255):objectWriteUInt16(this,e,r,!1),r+2};function objectWriteUInt32(l,e,r,t){e<0&&(e=4294967295+e+1);for(var i=0,p=Math.min(l.length-r,4);i<p;++i)l[r+i]=e>>>(t?i:3-i)*8&255}Buffer.prototype.writeUInt32LE=function(e,r,t){return e=+e,r=r|0,t||checkInt(this,e,r,4,4294967295,0),Buffer.TYPED_ARRAY_SUPPORT?(this[r+3]=e>>>24,this[r+2]=e>>>16,this[r+1]=e>>>8,this[r]=e&255):objectWriteUInt32(this,e,r,!0),r+4};Buffer.prototype.writeUInt32BE=function(e,r,t){return e=+e,r=r|0,t||checkInt(this,e,r,4,4294967295,0),Buffer.TYPED_ARRAY_SUPPORT?(this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=e&255):objectWriteUInt32(this,e,r,!1),r+4};Buffer.prototype.writeIntLE=function(e,r,t,i){if(e=+e,r=r|0,!i){var p=Math.pow(2,8*t-1);checkInt(this,e,r,t,p-1,-p)}var A=0,P=1,x=0;for(this[r]=e&255;++A<t&&(P*=256);)e<0&&x===0&&this[r+A-1]!==0&&(x=1),this[r+A]=(e/P>>0)-x&255;return r+t};Buffer.prototype.writeIntBE=function(e,r,t,i){if(e=+e,r=r|0,!i){var p=Math.pow(2,8*t-1);checkInt(this,e,r,t,p-1,-p)}var A=t-1,P=1,x=0;for(this[r+A]=e&255;--A>=0&&(P*=256);)e<0&&x===0&&this[r+A+1]!==0&&(x=1),this[r+A]=(e/P>>0)-x&255;return r+t};Buffer.prototype.writeInt8=function(e,r,t){return e=+e,r=r|0,t||checkInt(this,e,r,1,127,-128),Buffer.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[r]=e&255,r+1};Buffer.prototype.writeInt16LE=function(e,r,t){return e=+e,r=r|0,t||checkInt(this,e,r,2,32767,-32768),Buffer.TYPED_ARRAY_SUPPORT?(this[r]=e&255,this[r+1]=e>>>8):objectWriteUInt16(this,e,r,!0),r+2};Buffer.prototype.writeInt16BE=function(e,r,t){return e=+e,r=r|0,t||checkInt(this,e,r,2,32767,-32768),Buffer.TYPED_ARRAY_SUPPORT?(this[r]=e>>>8,this[r+1]=e&255):objectWriteUInt16(this,e,r,!1),r+2};Buffer.prototype.writeInt32LE=function(e,r,t){return e=+e,r=r|0,t||checkInt(this,e,r,4,2147483647,-2147483648),Buffer.TYPED_ARRAY_SUPPORT?(this[r]=e&255,this[r+1]=e>>>8,this[r+2]=e>>>16,this[r+3]=e>>>24):objectWriteUInt32(this,e,r,!0),r+4};Buffer.prototype.writeInt32BE=function(e,r,t){return e=+e,r=r|0,t||checkInt(this,e,r,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),Buffer.TYPED_ARRAY_SUPPORT?(this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=e&255):objectWriteUInt32(this,e,r,!1),r+4};function checkIEEE754(l,e,r,t,i,p){if(r+t>l.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function writeFloat(l,e,r,t,i){return i||checkIEEE754(l,e,r,4),write(l,e,r,t,23,4),r+4}Buffer.prototype.writeFloatLE=function(e,r,t){return writeFloat(this,e,r,!0,t)};Buffer.prototype.writeFloatBE=function(e,r,t){return writeFloat(this,e,r,!1,t)};function writeDouble(l,e,r,t,i){return i||checkIEEE754(l,e,r,8),write(l,e,r,t,52,8),r+8}Buffer.prototype.writeDoubleLE=function(e,r,t){return writeDouble(this,e,r,!0,t)};Buffer.prototype.writeDoubleBE=function(e,r,t){return writeDouble(this,e,r,!1,t)};Buffer.prototype.copy=function(e,r,t,i){if(t||(t=0),!i&&i!==0&&(i=this.length),r>=e.length&&(r=e.length),r||(r=0),i>0&&i<t&&(i=t),i===t||e.length===0||this.length===0)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(t<0||t>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-r<i-t&&(i=e.length-r+t);var p=i-t,A;if(this===e&&t<r&&r<i)for(A=p-1;A>=0;--A)e[A+r]=this[A+t];else if(p<1e3||!Buffer.TYPED_ARRAY_SUPPORT)for(A=0;A<p;++A)e[A+r]=this[A+t];else Uint8Array.prototype.set.call(e,this.subarray(t,t+p),r);return p};Buffer.prototype.fill=function(e,r,t,i){if(typeof e=="string"){if(typeof r=="string"?(i=r,r=0,t=this.length):typeof t=="string"&&(i=t,t=this.length),e.length===1){var p=e.charCodeAt(0);p<256&&(e=p)}if(i!==void 0&&typeof i!="string")throw new TypeError("encoding must be a string");if(typeof i=="string"&&!Buffer.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else typeof e=="number"&&(e=e&255);if(r<0||this.length<r||this.length<t)throw new RangeError("Out of range index");if(t<=r)return this;r=r>>>0,t=t===void 0?this.length:t>>>0,e||(e=0);var A;if(typeof e=="number")for(A=r;A<t;++A)this[A]=e;else{var P=internalIsBuffer(e)?e:utf8ToBytes(new Buffer(e,i).toString()),x=P.length;for(A=0;A<t-r;++A)this[A+r]=P[A%x]}return this};var INVALID_BASE64_RE=/[^+\/0-9A-Za-z-_]/g;function base64clean(l){if(l=stringtrim(l).replace(INVALID_BASE64_RE,""),l.length<2)return"";for(;l.length%4!==0;)l=l+"=";return l}function stringtrim(l){return l.trim?l.trim():l.replace(/^\s+|\s+$/g,"")}function toHex(l){return l<16?"0"+l.toString(16):l.toString(16)}function utf8ToBytes(l,e){e=e||1/0;for(var r,t=l.length,i=null,p=[],A=0;A<t;++A){if(r=l.charCodeAt(A),r>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&p.push(239,191,189);continue}else if(A+1===t){(e-=3)>-1&&p.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&p.push(239,191,189),i=r;continue}r=(i-55296<<10|r-56320)+65536}else i&&(e-=3)>-1&&p.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;p.push(r)}else if(r<2048){if((e-=2)<0)break;p.push(r>>6|192,r&63|128)}else if(r<65536){if((e-=3)<0)break;p.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((e-=4)<0)break;p.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else throw new Error("Invalid code point")}return p}function asciiToBytes(l){for(var e=[],r=0;r<l.length;++r)e.push(l.charCodeAt(r)&255);return e}function utf16leToBytes(l,e){for(var r,t,i,p=[],A=0;A<l.length&&!((e-=2)<0);++A)r=l.charCodeAt(A),t=r>>8,i=r%256,p.push(i),p.push(t);return p}function base64ToBytes(l){return toByteArray(base64clean(l))}function blitBuffer(l,e,r,t){for(var i=0;i<t&&!(i+r>=e.length||i>=l.length);++i)e[i+r]=l[i];return i}function isnan(l){return l!==l}function isBuffer(l){return l!=null&&(!!l._isBuffer||isFastBuffer(l)||isSlowBuffer(l))}function isFastBuffer(l){return!!l.constructor&&typeof l.constructor.isBuffer=="function"&&l.constructor.isBuffer(l)}function isSlowBuffer(l){return typeof l.readFloatLE=="function"&&typeof l.slice=="function"&&isFastBuffer(l.slice(0,0))}var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function commonjsRequire(){throw new Error("Dynamic requires are not currently supported by rollup-plugin-commonjs")}function unwrapExports(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}function createCommonjsModule(l,e){return e={exports:{}},l(e,e.exports),e.exports}var require$$4={},pdf=createCommonjsModule(function(module,exports){(function(e,r){module.exports=r()})(commonjsGlobal,function(){return function(l){var e={};function r(t){if(e[t])return e[t].exports;var i=e[t]={i:t,l:!1,exports:{}};return l[t].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=l,r.c=e,r.d=function(t,i,p){r.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:p})},r.r=function(t){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,i){if(i&1&&(t=r(t)),i&8||i&4&&typeof t=="object"&&t&&t.__esModule)return t;var p=Object.create(null);if(r.r(p),Object.defineProperty(p,"default",{enumerable:!0,value:t}),i&2&&typeof t!="string")for(var A in t)r.d(p,A,function(P){return t[P]}.bind(null,A));return p},r.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(i,"a",i),i},r.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},r.p="",r(r.s=0)}([function(l,e,r){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"addLinkAttributes",{enumerable:!0,get:function(){return t.addLinkAttributes}}),Object.defineProperty(e,"getFilenameFromUrl",{enumerable:!0,get:function(){return t.getFilenameFromUrl}}),Object.defineProperty(e,"LinkTarget",{enumerable:!0,get:function(){return t.LinkTarget}}),Object.defineProperty(e,"loadScript",{enumerable:!0,get:function(){return t.loadScript}}),Object.defineProperty(e,"PDFDateString",{enumerable:!0,get:function(){return t.PDFDateString}}),Object.defineProperty(e,"RenderingCancelledException",{enumerable:!0,get:function(){return t.RenderingCancelledException}}),Object.defineProperty(e,"build",{enumerable:!0,get:function(){return i.build}}),Object.defineProperty(e,"getDocument",{enumerable:!0,get:function(){return i.getDocument}}),Object.defineProperty(e,"LoopbackPort",{enumerable:!0,get:function(){return i.LoopbackPort}}),Object.defineProperty(e,"PDFDataRangeTransport",{enumerable:!0,get:function(){return i.PDFDataRangeTransport}}),Object.defineProperty(e,"PDFWorker",{enumerable:!0,get:function(){return i.PDFWorker}}),Object.defineProperty(e,"version",{enumerable:!0,get:function(){return i.version}}),Object.defineProperty(e,"CMapCompressionType",{enumerable:!0,get:function(){return p.CMapCompressionType}}),Object.defineProperty(e,"createObjectURL",{enumerable:!0,get:function(){return p.createObjectURL}}),Object.defineProperty(e,"createPromiseCapability",{enumerable:!0,get:function(){return p.createPromiseCapability}}),Object.defineProperty(e,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return p.createValidAbsoluteUrl}}),Object.defineProperty(e,"InvalidPDFException",{enumerable:!0,get:function(){return p.InvalidPDFException}}),Object.defineProperty(e,"MissingPDFException",{enumerable:!0,get:function(){return p.MissingPDFException}}),Object.defineProperty(e,"OPS",{enumerable:!0,get:function(){return p.OPS}}),Object.defineProperty(e,"PasswordResponses",{enumerable:!0,get:function(){return p.PasswordResponses}}),Object.defineProperty(e,"PermissionFlag",{enumerable:!0,get:function(){return p.PermissionFlag}}),Object.defineProperty(e,"removeNullCharacters",{enumerable:!0,get:function(){return p.removeNullCharacters}}),Object.defineProperty(e,"shadow",{enumerable:!0,get:function(){return p.shadow}}),Object.defineProperty(e,"UnexpectedResponseException",{enumerable:!0,get:function(){return p.UnexpectedResponseException}}),Object.defineProperty(e,"UNSUPPORTED_FEATURES",{enumerable:!0,get:function(){return p.UNSUPPORTED_FEATURES}}),Object.defineProperty(e,"Util",{enumerable:!0,get:function(){return p.Util}}),Object.defineProperty(e,"VerbosityLevel",{enumerable:!0,get:function(){return p.VerbosityLevel}}),Object.defineProperty(e,"AnnotationLayer",{enumerable:!0,get:function(){return A.AnnotationLayer}}),Object.defineProperty(e,"apiCompatibilityParams",{enumerable:!0,get:function(){return P.apiCompatibilityParams}}),Object.defineProperty(e,"GlobalWorkerOptions",{enumerable:!0,get:function(){return x.GlobalWorkerOptions}}),Object.defineProperty(e,"renderTextLayer",{enumerable:!0,get:function(){return C.renderTextLayer}}),Object.defineProperty(e,"SVGGraphics",{enumerable:!0,get:function(){return h.SVGGraphics}});var t=r(1),i=r(5),p=r(2),A=r(16),P=r(7),x=r(10),C=r(17),h=r(18);{const{isNodeJS:S}=r(4);if(S){const M=r(19).PDFNodeStream;(0,i.setPDFNetworkStreamFactory)(u=>new M(u))}else{const M=r(22).PDFNetworkStream;let u;(0,t.isFetchSupported)()&&(u=r(23).PDFFetchStream),(0,i.setPDFNetworkStreamFactory)(y=>u&&(0,t.isValidFetchUrl)(y.url)?new u(y):new M(y))}}},function(l,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.addLinkAttributes=M,e.getFilenameFromUrl=u,e.isFetchSupported=b,e.isValidFetchUrl=k,e.loadScript=R,e.deprecated=E,e.PDFDateString=e.StatTimer=e.DOMSVGFactory=e.DOMCMapReaderFactory=e.DOMCanvasFactory=e.DEFAULT_LINK_REL=e.LinkTarget=e.RenderingCancelledException=e.PageViewport=void 0;var t=r(2);const i="noopener noreferrer nofollow";e.DEFAULT_LINK_REL=i;const p="http://www.w3.org/2000/svg";class A{create(s,d){if(s<=0||d<=0)throw new Error("Invalid canvas size");const v=document.createElement("canvas"),_=v.getContext("2d");return v.width=s,v.height=d,{canvas:v,context:_}}reset(s,d,v){if(!s.canvas)throw new Error("Canvas is not specified");if(d<=0||v<=0)throw new Error("Invalid canvas size");s.canvas.width=d,s.canvas.height=v}destroy(s){if(!s.canvas)throw new Error("Canvas is not specified");s.canvas.width=0,s.canvas.height=0,s.canvas=null,s.context=null}}e.DOMCanvasFactory=A;class P{constructor({baseUrl:s=null,isCompressed:d=!1}){this.baseUrl=s,this.isCompressed=d}async fetch({name:s}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!s)throw new Error("CMap name must be specified.");const d=this.baseUrl+s+(this.isCompressed?".bcmap":""),v=this.isCompressed?t.CMapCompressionType.BINARY:t.CMapCompressionType.NONE;return b()&&k(d,document.baseURI)?fetch(d).then(async _=>{if(!_.ok)throw new Error(_.statusText);let I;return this.isCompressed?I=new Uint8Array(await _.arrayBuffer()):I=(0,t.stringToBytes)(await _.text()),{cMapData:I,compressionType:v}}).catch(_=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${d}`)}):new Promise((_,I)=>{const w=new XMLHttpRequest;w.open("GET",d,!0),this.isCompressed&&(w.responseType="arraybuffer"),w.onreadystatechange=()=>{if(w.readyState===XMLHttpRequest.DONE){if(w.status===200||w.status===0){let U;if(this.isCompressed&&w.response?U=new Uint8Array(w.response):!this.isCompressed&&w.responseText&&(U=(0,t.stringToBytes)(w.responseText)),U){_({cMapData:U,compressionType:v});return}}I(new Error(w.statusText))}},w.send(null)}).catch(_=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${d}`)})}}e.DOMCMapReaderFactory=P;class x{create(s,d){(0,t.assert)(s>0&&d>0,"Invalid SVG dimensions");const v=document.createElementNS(p,"svg:svg");return v.setAttribute("version","1.1"),v.setAttribute("width",s+"px"),v.setAttribute("height",d+"px"),v.setAttribute("preserveAspectRatio","none"),v.setAttribute("viewBox","0 0 "+s+" "+d),v}createElement(s){return(0,t.assert)(typeof s=="string","Invalid SVG element type"),document.createElementNS(p,s)}}e.DOMSVGFactory=x;class C{constructor({viewBox:s,scale:d,rotation:v,offsetX:_=0,offsetY:I=0,dontFlip:w=!1}){this.viewBox=s,this.scale=d,this.rotation=v,this.offsetX=_,this.offsetY=I;const U=(s[2]+s[0])/2,B=(s[3]+s[1])/2;let D,H,N,a;switch(v=v%360,v=v<0?v+360:v,v){case 180:D=-1,H=0,N=0,a=1;break;case 90:D=0,H=1,N=1,a=0;break;case 270:D=0,H=-1,N=-1,a=0;break;case 0:D=1,H=0,N=0,a=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}w&&(N=-N,a=-a);let o,c,f,m;D===0?(o=Math.abs(B-s[1])*d+_,c=Math.abs(U-s[0])*d+I,f=Math.abs(s[3]-s[1])*d,m=Math.abs(s[2]-s[0])*d):(o=Math.abs(U-s[0])*d+_,c=Math.abs(B-s[1])*d+I,f=Math.abs(s[2]-s[0])*d,m=Math.abs(s[3]-s[1])*d),this.transform=[D*d,H*d,N*d,a*d,o-D*d*U-N*d*B,c-H*d*U-a*d*B],this.width=f,this.height=m}clone({scale:s=this.scale,rotation:d=this.rotation,offsetX:v=this.offsetX,offsetY:_=this.offsetY,dontFlip:I=!1}={}){return new C({viewBox:this.viewBox.slice(),scale:s,rotation:d,offsetX:v,offsetY:_,dontFlip:I})}convertToViewportPoint(s,d){return t.Util.applyTransform([s,d],this.transform)}convertToViewportRectangle(s){const d=t.Util.applyTransform([s[0],s[1]],this.transform),v=t.Util.applyTransform([s[2],s[3]],this.transform);return[d[0],d[1],v[0],v[1]]}convertToPdfPoint(s,d){return t.Util.applyInverseTransform([s,d],this.transform)}}e.PageViewport=C;class h extends t.BaseException{constructor(s,d){super(s),this.type=d}}e.RenderingCancelledException=h;const S={NONE:0,SELF:1,BLANK:2,PARENT:3,TOP:4};e.LinkTarget=S;function M(n,{url:s,target:d,rel:v,enabled:_=!0}={}){(0,t.assert)(s&&typeof s=="string",'addLinkAttributes: A valid "url" parameter must provided.');const I=(0,t.removeNullCharacters)(s);_?n.href=n.title=I:(n.href="",n.title=`Disabled: ${I}`,n.onclick=()=>!1);let w="";switch(d){case S.NONE:break;case S.SELF:w="_self";break;case S.BLANK:w="_blank";break;case S.PARENT:w="_parent";break;case S.TOP:w="_top";break}n.target=w,n.rel=typeof v=="string"?v:i}function u(n){const s=n.indexOf("#"),d=n.indexOf("?"),v=Math.min(s>0?s:n.length,d>0?d:n.length);return n.substring(n.lastIndexOf("/",v)+1,v)}class y{constructor(){this.started=Object.create(null),this.times=[]}time(s){s in this.started&&(0,t.warn)(`Timer is already running for ${s}`),this.started[s]=Date.now()}timeEnd(s){s in this.started||(0,t.warn)(`Timer has not been started for ${s}`),this.times.push({name:s,start:this.started[s],end:Date.now()}),delete this.started[s]}toString(){const s=[];let d=0;for(const v of this.times){const _=v.name;_.length>d&&(d=_.length)}for(const v of this.times){const _=v.end-v.start;s.push(`${v.name.padEnd(d)} ${_}ms
`)}return s.join("")}}e.StatTimer=y;function b(){return typeof fetch<"u"&&typeof Response<"u"&&"body"in Response.prototype&&typeof ReadableStream<"u"}function k(n,s){try{const{protocol:d}=s?new URL(n,s):new URL(n);return d==="http:"||d==="https:"}catch{return!1}}function R(n){return new Promise((s,d)=>{const v=document.createElement("script");v.src=n,v.onload=s,v.onerror=function(){d(new Error(`Cannot load script at: ${v.src}`))},(document.head||document.documentElement).appendChild(v)})}function E(n){console.log("Deprecated API usage: "+n)}let L;class g{static toDateObject(s){if(!s||!(0,t.isString)(s))return null;L||(L=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const d=L.exec(s);if(!d)return null;const v=parseInt(d[1],10);let _=parseInt(d[2],10);_=_>=1&&_<=12?_-1:0;let I=parseInt(d[3],10);I=I>=1&&I<=31?I:1;let w=parseInt(d[4],10);w=w>=0&&w<=23?w:0;let U=parseInt(d[5],10);U=U>=0&&U<=59?U:0;let B=parseInt(d[6],10);B=B>=0&&B<=59?B:0;const D=d[7]||"Z";let H=parseInt(d[8],10);H=H>=0&&H<=23?H:0;let N=parseInt(d[9],10)||0;return N=N>=0&&N<=59?N:0,D==="-"?(w+=H,U+=N):D==="+"&&(w-=H,U-=N),new Date(Date.UTC(v,_,I,w,U,B))}}e.PDFDateString=g},function(l,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.arrayByteLength=V,e.arraysToBytes=Q,e.assert=B,e.bytesToString=$,e.createPromiseCapability=ye,e.getVerbosityLevel=_,e.info=I,e.isArrayBuffer=_e,e.isArrayEqual=be,e.isBool=pe,e.isEmptyObj=ve,e.isNum=ue,e.isString=ge,e.isSameOrigin=D,e.createValidAbsoluteUrl=N,e.removeNullCharacters=X,e.setVerbosityLevel=v,e.shadow=a,e.string32=K,e.stringToBytes=Y,e.stringToPDFString=oe,e.stringToUTF8String=ne,e.utf8StringToString=Ae,e.warn=w,e.unreachable=U,e.IsEvalSupportedCached=e.IsLittleEndianCached=e.createObjectURL=e.FormatError=e.Util=e.UnknownErrorException=e.UnexpectedResponseException=e.TextRenderingMode=e.StreamType=e.PermissionFlag=e.PasswordResponses=e.PasswordException=e.MissingPDFException=e.InvalidPDFException=e.AbortException=e.CMapCompressionType=e.ImageKind=e.FontType=e.AnnotationType=e.AnnotationStateModelType=e.AnnotationReviewState=e.AnnotationReplyType=e.AnnotationMarkedState=e.AnnotationFlag=e.AnnotationFieldFlag=e.AnnotationBorderStyleType=e.UNSUPPORTED_FEATURES=e.VerbosityLevel=e.OPS=e.IDENTITY_MATRIX=e.FONT_IDENTITY_MATRIX=e.BaseException=void 0,r(3);const t=[1,0,0,1,0,0];e.IDENTITY_MATRIX=t;const i=[.001,0,0,.001,0,0];e.FONT_IDENTITY_MATRIX=i;const p={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};e.PermissionFlag=p;const A={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};e.TextRenderingMode=A;const P={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};e.ImageKind=P;const x={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};e.AnnotationType=x;const C={MARKED:"Marked",REVIEW:"Review"};e.AnnotationStateModelType=C;const h={MARKED:"Marked",UNMARKED:"Unmarked"};e.AnnotationMarkedState=h;const S={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"};e.AnnotationReviewState=S;const M={GROUP:"Group",REPLY:"R"};e.AnnotationReplyType=M;const u={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};e.AnnotationFlag=u;const y={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};e.AnnotationFieldFlag=y;const b={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};e.AnnotationBorderStyleType=b;const k={UNKNOWN:"UNKNOWN",FLATE:"FLATE",LZW:"LZW",DCT:"DCT",JPX:"JPX",JBIG:"JBIG",A85:"A85",AHX:"AHX",CCF:"CCF",RLX:"RLX"};e.StreamType=k;const R={UNKNOWN:"UNKNOWN",TYPE1:"TYPE1",TYPE1C:"TYPE1C",CIDFONTTYPE0:"CIDFONTTYPE0",CIDFONTTYPE0C:"CIDFONTTYPE0C",TRUETYPE:"TRUETYPE",CIDFONTTYPE2:"CIDFONTTYPE2",TYPE3:"TYPE3",OPENTYPE:"OPENTYPE",TYPE0:"TYPE0",MMTYPE1:"MMTYPE1"};e.FontType=R;const E={ERRORS:0,WARNINGS:1,INFOS:5};e.VerbosityLevel=E;const L={NONE:0,BINARY:1,STREAM:2};e.CMapCompressionType=L;const g={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotations:78,endAnnotations:79,beginAnnotation:80,endAnnotation:81,paintJpegXObject:82,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};e.OPS=g;const n={unknown:"unknown",forms:"forms",javaScript:"javaScript",smask:"smask",shadingPattern:"shadingPattern",font:"font",errorTilingPattern:"errorTilingPattern",errorExtGState:"errorExtGState",errorXObject:"errorXObject",errorFontLoadType3:"errorFontLoadType3",errorFontState:"errorFontState",errorFontMissing:"errorFontMissing",errorFontTranslate:"errorFontTranslate",errorColorSpace:"errorColorSpace",errorOperatorList:"errorOperatorList",errorFontToUnicode:"errorFontToUnicode",errorFontLoadNative:"errorFontLoadNative",errorFontGetPath:"errorFontGetPath"};e.UNSUPPORTED_FEATURES=n;const s={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};e.PasswordResponses=s;let d=E.WARNINGS;function v(z){Number.isInteger(z)&&(d=z)}function _(){return d}function I(z){d>=E.INFOS&&console.log(`Info: ${z}`)}function w(z){d>=E.WARNINGS&&console.log(`Warning: ${z}`)}function U(z){throw new Error(z)}function B(z,W){z||U(W)}function D(z,W){let q;try{if(q=new URL(z),!q.origin||q.origin==="null")return!1}catch{return!1}const J=new URL(W,q);return q.origin===J.origin}function H(z){if(!z)return!1;switch(z.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function N(z,W){if(!z)return null;try{const q=W?new URL(z,W):new URL(z);if(H(q))return q}catch{}return null}function a(z,W,q){return Object.defineProperty(z,W,{value:q,enumerable:!0,configurable:!0,writable:!1}),q}const o=function(){function W(q){this.constructor===W&&U("Cannot initialize BaseException."),this.message=q,this.name=this.constructor.name}return W.prototype=new Error,W.constructor=W,W}();e.BaseException=o;class c extends o{constructor(W,q){super(W),this.code=q}}e.PasswordException=c;class f extends o{constructor(W,q){super(W),this.details=q}}e.UnknownErrorException=f;class m extends o{}e.InvalidPDFException=m;class T extends o{}e.MissingPDFException=T;class F extends o{constructor(W,q){super(W),this.status=q}}e.UnexpectedResponseException=F;class O extends o{}e.FormatError=O;class j extends o{}e.AbortException=j;const G=/\x00/g;function X(z){return typeof z!="string"?(w("The argument for removeNullCharacters must be a string."),z):z.replace(G,"")}function $(z){B(z!==null&&typeof z=="object"&&z.length!==void 0,"Invalid argument for bytesToString");const W=z.length,q=8192;if(W<q)return String.fromCharCode.apply(null,z);const J=[];for(let re=0;re<W;re+=q){const se=Math.min(re+q,W),ae=z.subarray(re,se);J.push(String.fromCharCode.apply(null,ae))}return J.join("")}function Y(z){B(typeof z=="string","Invalid argument for stringToBytes");const W=z.length,q=new Uint8Array(W);for(let J=0;J<W;++J)q[J]=z.charCodeAt(J)&255;return q}function V(z){return z.length!==void 0?z.length:(B(z.byteLength!==void 0,"arrayByteLength - invalid argument."),z.byteLength)}function Q(z){const W=z.length;if(W===1&&z[0]instanceof Uint8Array)return z[0];let q=0;for(let se=0;se<W;se++)q+=V(z[se]);let J=0;const re=new Uint8Array(q);for(let se=0;se<W;se++){let ae=z[se];ae instanceof Uint8Array||(typeof ae=="string"?ae=Y(ae):ae=new Uint8Array(ae));const de=ae.byteLength;re.set(ae,J),J+=de}return re}function K(z){return String.fromCharCode(z>>24&255,z>>16&255,z>>8&255,z&255)}function Z(){const z=new Uint8Array(4);return z[0]=1,new Uint32Array(z.buffer,0,1)[0]===1}const te={get value(){return a(this,"value",Z())}};e.IsLittleEndianCached=te;function ee(){try{return new Function(""),!0}catch{return!1}}const le={get value(){return a(this,"value",ee())}};e.IsEvalSupportedCached=le;const ce=["rgb(",0,",",0,",",0,")"];class ie{static makeCssRgb(W,q,J){return ce[1]=W,ce[3]=q,ce[5]=J,ce.join("")}static transform(W,q){return[W[0]*q[0]+W[2]*q[1],W[1]*q[0]+W[3]*q[1],W[0]*q[2]+W[2]*q[3],W[1]*q[2]+W[3]*q[3],W[0]*q[4]+W[2]*q[5]+W[4],W[1]*q[4]+W[3]*q[5]+W[5]]}static applyTransform(W,q){const J=W[0]*q[0]+W[1]*q[2]+q[4],re=W[0]*q[1]+W[1]*q[3]+q[5];return[J,re]}static applyInverseTransform(W,q){const J=q[0]*q[3]-q[1]*q[2],re=(W[0]*q[3]-W[1]*q[2]+q[2]*q[5]-q[4]*q[3])/J,se=(-W[0]*q[1]+W[1]*q[0]+q[4]*q[1]-q[5]*q[0])/J;return[re,se]}static getAxialAlignedBoundingBox(W,q){const J=ie.applyTransform(W,q),re=ie.applyTransform(W.slice(2,4),q),se=ie.applyTransform([W[0],W[3]],q),ae=ie.applyTransform([W[2],W[1]],q);return[Math.min(J[0],re[0],se[0],ae[0]),Math.min(J[1],re[1],se[1],ae[1]),Math.max(J[0],re[0],se[0],ae[0]),Math.max(J[1],re[1],se[1],ae[1])]}static inverseTransform(W){const q=W[0]*W[3]-W[1]*W[2];return[W[3]/q,-W[1]/q,-W[2]/q,W[0]/q,(W[2]*W[5]-W[4]*W[3])/q,(W[4]*W[1]-W[5]*W[0])/q]}static apply3dTransform(W,q){return[W[0]*q[0]+W[1]*q[1]+W[2]*q[2],W[3]*q[0]+W[4]*q[1]+W[5]*q[2],W[6]*q[0]+W[7]*q[1]+W[8]*q[2]]}static singularValueDecompose2dScale(W){const q=[W[0],W[2],W[1],W[3]],J=W[0]*q[0]+W[1]*q[2],re=W[0]*q[1]+W[1]*q[3],se=W[2]*q[0]+W[3]*q[2],ae=W[2]*q[1]+W[3]*q[3],de=(J+ae)/2,me=Math.sqrt((J+ae)*(J+ae)-4*(J*ae-se*re))/2,Se=de+me||1,Ce=de-me||1;return[Math.sqrt(Se),Math.sqrt(Ce)]}static normalizeRect(W){const q=W.slice(0);return W[0]>W[2]&&(q[0]=W[2],q[2]=W[0]),W[1]>W[3]&&(q[1]=W[3],q[3]=W[1]),q}static intersect(W,q){function J(de,me){return de-me}const re=[W[0],W[2],q[0],q[2]].sort(J),se=[W[1],W[3],q[1],q[3]].sort(J),ae=[];if(W=ie.normalizeRect(W),q=ie.normalizeRect(q),re[0]===W[0]&&re[1]===q[0]||re[0]===q[0]&&re[1]===W[0])ae[0]=re[1],ae[2]=re[2];else return null;if(se[0]===W[1]&&se[1]===q[1]||se[0]===q[1]&&se[1]===W[1])ae[1]=se[1],ae[3]=se[2];else return null;return ae}}e.Util=ie;const he=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function oe(z){const W=z.length,q=[];if(z[0]==="\xFE"&&z[1]==="\xFF")for(let J=2;J<W;J+=2)q.push(String.fromCharCode(z.charCodeAt(J)<<8|z.charCodeAt(J+1)));else if(z[0]==="\xFF"&&z[1]==="\xFE")for(let J=2;J<W;J+=2)q.push(String.fromCharCode(z.charCodeAt(J+1)<<8|z.charCodeAt(J)));else for(let J=0;J<W;++J){const re=he[z.charCodeAt(J)];q.push(re?String.fromCharCode(re):z.charAt(J))}return q.join("")}function ne(z){return decodeURIComponent(escape(z))}function Ae(z){return unescape(encodeURIComponent(z))}function ve(z){for(const W in z)return!1;return!0}function pe(z){return typeof z=="boolean"}function ue(z){return typeof z=="number"}function ge(z){return typeof z=="string"}function _e(z){return typeof z=="object"&&z!==null&&z.byteLength!==void 0}function be(z,W){return z.length!==W.length?!1:z.every(function(q,J){return q===W[J]})}function ye(){const z=Object.create(null);let W=!1;return Object.defineProperty(z,"settled",{get(){return W}}),z.promise=new Promise(function(q,J){z.resolve=function(re){W=!0,q(re)},z.reject=function(re){W=!0,J(re)}}),z}const fe=function(){const W="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";return function(J,re,se=!1){if(!se&&URL.createObjectURL){const de=new Blob([J],{type:re});return URL.createObjectURL(de)}let ae=`data:${re};base64,`;for(let de=0,me=J.length;de<me;de+=3){const Se=J[de]&255,Ce=J[de+1]&255,xe=J[de+2]&255,Te=Se>>2,Ee=(Se&3)<<4|Ce>>4,Re=de+1<me?(Ce&15)<<2|xe>>6:64,we=de+2<me?xe&63:64;ae+=W[Te]+W[Ee]+W[Re]+W[we]}return ae}}();e.createObjectURL=fe},function(l,e,r){r(4)},function(l,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.isNodeJS=void 0;const t=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!process.versions.electron;e.isNodeJS=t},function(module,exports,__w_pdfjs_require__){Object.defineProperty(exports,"__esModule",{value:!0}),exports.getDocument=getDocument,exports.setPDFNetworkStreamFactory=setPDFNetworkStreamFactory,exports.build=exports.version=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFWorker=exports.PDFDataRangeTransport=exports.LoopbackPort=void 0;var _util=__w_pdfjs_require__(2),_display_utils=__w_pdfjs_require__(1),_font_loader=__w_pdfjs_require__(6),_api_compatibility=__w_pdfjs_require__(7),_canvas=__w_pdfjs_require__(8),_worker_options=__w_pdfjs_require__(10),_is_node=__w_pdfjs_require__(4),_message_handler=__w_pdfjs_require__(11),_metadata=__w_pdfjs_require__(12),_transport_stream=__w_pdfjs_require__(14),_webgl=__w_pdfjs_require__(15);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100;let createPDFNetworkStream;function setPDFNetworkStreamFactory(l){createPDFNetworkStream=l}function getDocument(l){const e=new PDFDocumentLoadingTask;let r;if(typeof l=="string")r={url:l};else if((0,_util.isArrayBuffer)(l))r={data:l};else if(l instanceof PDFDataRangeTransport)r={range:l};else{if(typeof l!="object")throw new Error("Invalid parameter in getDocument, need either Uint8Array, string or a parameter object");if(!l.url&&!l.data&&!l.range)throw new Error("Invalid parameter object: need either .data, .range or .url");r=l}const t=Object.create(null);let i=null,p=null;for(const P in r){if(P==="url"&&typeof window<"u"){t[P]=new URL(r[P],window.location).href;continue}else if(P==="range"){i=r[P];continue}else if(P==="worker"){p=r[P];continue}else if(P==="data"&&!(r[P]instanceof Uint8Array)){const x=r[P];if(typeof x=="string")t[P]=(0,_util.stringToBytes)(x);else if(typeof x=="object"&&x!==null&&!isNaN(x.length))t[P]=new Uint8Array(x);else if((0,_util.isArrayBuffer)(x))t[P]=new Uint8Array(x);else throw new Error("Invalid PDF binary data: either typed array, string or array-like object is expected in the data property.");continue}t[P]=r[P]}if(t.rangeChunkSize=t.rangeChunkSize||DEFAULT_RANGE_CHUNK_SIZE,t.CMapReaderFactory=t.CMapReaderFactory||_display_utils.DOMCMapReaderFactory,t.ignoreErrors=t.stopAtErrors!==!0,t.fontExtraProperties=t.fontExtraProperties===!0,t.pdfBug=t.pdfBug===!0,Number.isInteger(t.maxImageSize)||(t.maxImageSize=-1),typeof t.isEvalSupported!="boolean"&&(t.isEvalSupported=!0),typeof t.disableFontFace!="boolean"&&(t.disableFontFace=_api_compatibility.apiCompatibilityParams.disableFontFace||!1),typeof t.disableRange!="boolean"&&(t.disableRange=!1),typeof t.disableStream!="boolean"&&(t.disableStream=!1),typeof t.disableAutoFetch!="boolean"&&(t.disableAutoFetch=!1),(0,_util.setVerbosityLevel)(t.verbosity),!p){const P={verbosity:t.verbosity,port:_worker_options.GlobalWorkerOptions.workerPort};p=P.port?PDFWorker.fromPort(P):new PDFWorker(P),e._worker=p}const A=e.docId;return p.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");const P=_fetchDocument(p,t,i,A),x=new Promise(function(C){let h;i?h=new _transport_stream.PDFDataTransportStream({length:t.length,initialData:t.initialData,progressiveDone:t.progressiveDone,disableRange:t.disableRange,disableStream:t.disableStream},i):t.data||(h=createPDFNetworkStream({url:t.url,length:t.length,httpHeaders:t.httpHeaders,withCredentials:t.withCredentials,rangeChunkSize:t.rangeChunkSize,disableRange:t.disableRange,disableStream:t.disableStream})),C(h)});return Promise.all([P,x]).then(function([C,h]){if(e.destroyed)throw new Error("Loading aborted");const S=new _message_handler.MessageHandler(A,C,p.port);S.postMessageTransfers=p.postMessageTransfers;const M=new WorkerTransport(S,e,h,t);e._transport=M,S.send("Ready",null)})}).catch(e._capability.reject),e}function _fetchDocument(l,e,r,t){return l.destroyed?Promise.reject(new Error("Worker was destroyed")):(r&&(e.length=r.length,e.initialData=r.initialData,e.progressiveDone=r.progressiveDone),l.messageHandler.sendWithPromise("GetDocRequest",{docId:t,apiVersion:"2.5.207",source:{data:e.data,url:e.url,password:e.password,disableAutoFetch:e.disableAutoFetch,rangeChunkSize:e.rangeChunkSize,length:e.length},maxImageSize:e.maxImageSize,disableFontFace:e.disableFontFace,postMessageTransfers:l.postMessageTransfers,docBaseUrl:e.docBaseUrl,ignoreErrors:e.ignoreErrors,isEvalSupported:e.isEvalSupported,fontExtraProperties:e.fontExtraProperties}).then(function(i){if(l.destroyed)throw new Error("Worker was destroyed");return i}))}const PDFDocumentLoadingTask=function(){let e=0;class r{constructor(){this._capability=(0,_util.createPromiseCapability)(),this._transport=null,this._worker=null,this.docId="d"+e++,this.destroyed=!1,this.onPassword=null,this.onProgress=null,this.onUnsupportedFeature=null}get promise(){return this._capability.promise}destroy(){return this.destroyed=!0,(this._transport?this._transport.destroy():Promise.resolve()).then(()=>{this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)})}}return r}();class PDFDataRangeTransport{constructor(e,r,t=!1){this.length=e,this.initialData=r,this.progressiveDone=t,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=(0,_util.createPromiseCapability)()}addRangeListener(e){this._rangeListeners.push(e)}addProgressListener(e){this._progressListeners.push(e)}addProgressiveReadListener(e){this._progressiveReadListeners.push(e)}addProgressiveDoneListener(e){this._progressiveDoneListeners.push(e)}onDataRange(e,r){for(const t of this._rangeListeners)t(e,r)}onDataProgress(e,r){this._readyCapability.promise.then(()=>{for(const t of this._progressListeners)t(e,r)})}onDataProgressiveRead(e){this._readyCapability.promise.then(()=>{for(const r of this._progressiveReadListeners)r(e)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const e of this._progressiveDoneListeners)e()})}transportReady(){this._readyCapability.resolve()}requestDataRange(e,r){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(e,r){this._pdfInfo=e,this._transport=r}get numPages(){return this._pdfInfo.numPages}get fingerprint(){return this._pdfInfo.fingerprint}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getOpenActionDestination(){return(0,_display_utils.deprecated)("getOpenActionDestination, use getOpenAction instead."),this.getOpenAction().then(function(e){return e&&e.dest?e.dest:null})}getAttachments(){return this._transport.getAttachments()}getJavaScript(){return this._transport.getJavaScript()}getOutline(){return this._transport.getOutline()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getData(){return this._transport.getData()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}getStats(){return this._transport.getStats()}cleanup(){return this._transport.startCleanup()}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(e,r,t,i=!1){this._pageIndex=e,this._pageInfo=r,this._transport=t,this._stats=i?new _display_utils.StatTimer:null,this._pdfBug=i,this.commonObjs=t.commonObjs,this.objs=new PDFObjects,this.cleanupAfterRender=!1,this.pendingCleanup=!1,this.intentStates=Object.create(null),this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:r=this.rotate,offsetX:t=0,offsetY:i=0,dontFlip:p=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:e,rotation:r,offsetX:t,offsetY:i,dontFlip:p})}getAnnotations({intent:e=null}={}){return(!this.annotationsPromise||this.annotationsIntent!==e)&&(this.annotationsPromise=this._transport.getAnnotations(this._pageIndex,e),this.annotationsIntent=e),this.annotationsPromise}render({canvasContext:e,viewport:r,intent:t="display",enableWebGL:i=!1,renderInteractiveForms:p=!1,transform:A=null,imageLayer:P=null,canvasFactory:x=null,background:C=null}){this._stats&&this._stats.time("Overall");const h=t==="print"?"print":"display";this.pendingCleanup=!1,this.intentStates[h]||(this.intentStates[h]=Object.create(null));const S=this.intentStates[h];S.streamReaderCancelTimeout&&(clearTimeout(S.streamReaderCancelTimeout),S.streamReaderCancelTimeout=null);const M=x||new _display_utils.DOMCanvasFactory,u=new _webgl.WebGLContext({enable:i});S.displayReadyCapability||(S.displayReadyCapability=(0,_util.createPromiseCapability)(),S.operatorList={fnArray:[],argsArray:[],lastChunk:!1},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList({pageIndex:this._pageIndex,intent:h,renderInteractiveForms:p===!0}));const y=R=>{const E=S.renderTasks.indexOf(b);E>=0&&S.renderTasks.splice(E,1),(this.cleanupAfterRender||h==="print")&&(this.pendingCleanup=!0),this._tryCleanup(),R?(b.capability.reject(R),this._abortOperatorList({intentState:S,reason:R})):b.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"))},b=new InternalRenderTask({callback:y,params:{canvasContext:e,viewport:r,transform:A,imageLayer:P,background:C},objs:this.objs,commonObjs:this.commonObjs,operatorList:S.operatorList,pageIndex:this._pageIndex,canvasFactory:M,webGLContext:u,useRequestAnimationFrame:h!=="print",pdfBug:this._pdfBug});S.renderTasks||(S.renderTasks=[]),S.renderTasks.push(b);const k=b.task;return S.displayReadyCapability.promise.then(R=>{if(this.pendingCleanup){y();return}this._stats&&this._stats.time("Rendering"),b.initializeGraphics(R),b.operatorListChanged()}).catch(y),k}getOperatorList(){function e(){if(t.operatorList.lastChunk){t.opListReadCapability.resolve(t.operatorList);const p=t.renderTasks.indexOf(i);p>=0&&t.renderTasks.splice(p,1)}}const r="oplist";this.intentStates[r]||(this.intentStates[r]=Object.create(null));const t=this.intentStates[r];let i;return t.opListReadCapability||(i={},i.operatorListChanged=e,t.opListReadCapability=(0,_util.createPromiseCapability)(),t.renderTasks=[],t.renderTasks.push(i),t.operatorList={fnArray:[],argsArray:[],lastChunk:!1},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList({pageIndex:this._pageIndex,intent:r})),t.opListReadCapability.promise}streamTextContent({normalizeWhitespace:e=!1,disableCombineTextItems:r=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,normalizeWhitespace:e===!0,combineTextItems:r!==!0},{highWaterMark:100,size(i){return i.items.length}})}getTextContent(e={}){const r=this.streamTextContent(e);return new Promise(function(t,i){function p(){A.read().then(function({value:x,done:C}){if(C){t(P);return}Object.assign(P.styles,x.styles),P.items.push(...x.items),p()},i)}const A=r.getReader(),P={items:[],styles:Object.create(null)};p()})}_destroy(){this.destroyed=!0,this._transport.pageCache[this._pageIndex]=null;const e=[];return Object.keys(this.intentStates).forEach(r=>{const t=this.intentStates[r];this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),r!=="oplist"&&t.renderTasks.forEach(function(i){const p=i.capability.promise.catch(function(){});e.push(p),i.cancel()})}),this.objs.clear(),this.annotationsPromise=null,this.pendingCleanup=!1,Promise.all(e)}cleanup(e=!1){return this.pendingCleanup=!0,this._tryCleanup(e)}_tryCleanup(e=!1){return!this.pendingCleanup||Object.keys(this.intentStates).some(r=>{const t=this.intentStates[r];return t.renderTasks.length!==0||!t.operatorList.lastChunk})?!1:(Object.keys(this.intentStates).forEach(r=>{delete this.intentStates[r]}),this.objs.clear(),this.annotationsPromise=null,e&&this._stats&&(this._stats=new _display_utils.StatTimer),this.pendingCleanup=!1,!0)}_startRenderPage(e,r){const t=this.intentStates[r];!t||(this._stats&&this._stats.timeEnd("Page Request"),t.displayReadyCapability&&t.displayReadyCapability.resolve(e))}_renderPageChunk(e,r){for(let t=0,i=e.length;t<i;t++)r.operatorList.fnArray.push(e.fnArray[t]),r.operatorList.argsArray.push(e.argsArray[t]);r.operatorList.lastChunk=e.lastChunk;for(let t=0;t<r.renderTasks.length;t++)r.renderTasks[t].operatorListChanged();e.lastChunk&&this._tryCleanup()}_pumpOperatorList(e){(0,_util.assert)(e.intent,'PDFPageProxy._pumpOperatorList: Expected "intent" argument.');const t=this._transport.messageHandler.sendWithStream("GetOperatorList",e).getReader(),i=this.intentStates[e.intent];i.streamReader=t;const p=()=>{t.read().then(({value:A,done:P})=>{if(P){i.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(A,i),p())},A=>{if(i.streamReader=null,!this._transport.destroyed){if(i.operatorList){i.operatorList.lastChunk=!0;for(let P=0;P<i.renderTasks.length;P++)i.renderTasks[P].operatorListChanged();this._tryCleanup()}if(i.displayReadyCapability)i.displayReadyCapability.reject(A);else if(i.opListReadCapability)i.opListReadCapability.reject(A);else throw A}})};p()}_abortOperatorList({intentState:e,reason:r,force:t=!1}){if((0,_util.assert)(r instanceof Error||typeof r=="object"&&r!==null,'PDFPageProxy._abortOperatorList: Expected "reason" argument.'),!!e.streamReader){if(!t){if(e.renderTasks.length!==0)return;if(r instanceof _display_utils.RenderingCancelledException){e.streamReaderCancelTimeout=setTimeout(()=>{this._abortOperatorList({intentState:e,reason:r,force:!0}),e.streamReaderCancelTimeout=null},RENDERING_CANCELLED_TIMEOUT);return}}e.streamReader.cancel(new _util.AbortException(r&&r.message)),e.streamReader=null,!this._transport.destroyed&&(Object.keys(this.intentStates).some(i=>this.intentStates[i]===e?(delete this.intentStates[i],!0):!1),this.cleanup())}}get stats(){return this._stats}}exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(e=!0){this._listeners=[],this._defer=e,this._deferred=Promise.resolve(void 0)}postMessage(e,r){function t(A){if(typeof A!="object"||A===null)return A;if(i.has(A))return i.get(A);let P,x;if((P=A.buffer)&&(0,_util.isArrayBuffer)(P))return r&&r.includes(P)?x=new A.constructor(P,A.byteOffset,A.byteLength):x=new A.constructor(A),i.set(A,x),x;x=Array.isArray(A)?[]:{},i.set(A,x);for(const C in A){let h,S=A;for(;!(h=Object.getOwnPropertyDescriptor(S,C));)S=Object.getPrototypeOf(S);if(!(typeof h.value>"u")){if(typeof h.value=="function"){if(A.hasOwnProperty&&A.hasOwnProperty(C))throw new Error(`LoopbackPort.postMessage - cannot clone: ${A[C]}`);continue}x[C]=t(h.value)}}return x}if(!this._defer){this._listeners.forEach(A=>{A.call(this,{data:e})});return}const i=new WeakMap,p={data:t(e)};this._deferred.then(()=>{this._listeners.forEach(A=>{A.call(this,p)})})}addEventListener(e,r){this._listeners.push(r)}removeEventListener(e,r){const t=this._listeners.indexOf(r);this._listeners.splice(t,1)}terminate(){this._listeners.length=0}}exports.LoopbackPort=LoopbackPort;const PDFWorker=function PDFWorkerClosure(){const pdfWorkerPorts=new WeakMap;let isWorkerDisabled=!1,fallbackWorkerSrc,nextFakeWorkerId=0,fakeWorkerCapability;if(_is_node.isNodeJS&&typeof commonjsRequire=="function")isWorkerDisabled=!0,fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"&&"currentScript"in document){const l=document.currentScript&&document.currentScript.src;l&&(fallbackWorkerSrc=l.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}function getWorkerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(typeof fallbackWorkerSrc<"u")return _is_node.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}function getMainThreadWorkerMessageHandler(){let l;try{l=globalThis.pdfjsWorker&&globalThis.pdfjsWorker.WorkerMessageHandler}catch{}return l||null}function setupFakeWorkerGlobal(){if(fakeWorkerCapability)return fakeWorkerCapability.promise;fakeWorkerCapability=(0,_util.createPromiseCapability)();const loader=async function(){const mainWorkerMessageHandler=getMainThreadWorkerMessageHandler();if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_is_node.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(getWorkerSrc());return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(getWorkerSrc()),window.pdfjsWorker.WorkerMessageHandler};return loader().then(fakeWorkerCapability.resolve,fakeWorkerCapability.reject),fakeWorkerCapability.promise}function createCDNWrapper(l){const e="importScripts('"+l+"');";return URL.createObjectURL(new Blob([e]))}class PDFWorker{constructor({name:e=null,port:r=null,verbosity:t=(0,_util.getVerbosityLevel)()}={}){if(r&&pdfWorkerPorts.has(r))throw new Error("Cannot use more than one PDFWorker per port");if(this.name=e,this.destroyed=!1,this.postMessageTransfers=!0,this.verbosity=t,this._readyCapability=(0,_util.createPromiseCapability)(),this._port=null,this._webWorker=null,this._messageHandler=null,r){pdfWorkerPorts.set(r,this),this._initializeFromPort(r);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(e){this._port=e,this._messageHandler=new _message_handler.MessageHandler("main","worker",e),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve()}_initialize(){if(typeof Worker<"u"&&!isWorkerDisabled&&!getMainThreadWorkerMessageHandler()){let e=getWorkerSrc();try{(0,_util.isSameOrigin)(window.location.href,e)||(e=createCDNWrapper(new URL(e,window.location).href));const r=new Worker(e),t=new _message_handler.MessageHandler("main","worker",r),i=()=>{r.removeEventListener("error",p),t.destroy(),r.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},p=()=>{this._webWorker||i()};r.addEventListener("error",p),t.on("test",P=>{if(r.removeEventListener("error",p),this.destroyed){i();return}P?(this._messageHandler=t,this._port=r,this._webWorker=r,P.supportTransfers||(this.postMessageTransfers=!1),this._readyCapability.resolve(),t.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),t.destroy(),r.terminate())}),t.on("ready",P=>{if(r.removeEventListener("error",p),this.destroyed){i();return}try{A()}catch{this._setupFakeWorker()}});const A=()=>{const P=new Uint8Array([this.postMessageTransfers?255:0]);try{t.send("test",P,[P.buffer])}catch{(0,_util.warn)("Cannot use postMessage transfers."),P[0]=0,t.send("test",P)}};A();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),isWorkerDisabled=!0),setupFakeWorkerGlobal().then(e=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const r=new LoopbackPort;this._port=r;const t="fake"+nextFakeWorkerId++,i=new _message_handler.MessageHandler(t+"_worker",t,r);e.setup(i,r);const p=new _message_handler.MessageHandler(t,t+"_worker",r);this._messageHandler=p,this._readyCapability.resolve(),p.send("configure",{verbosity:this.verbosity})}).catch(e=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${e.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),pdfWorkerPorts.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(e){if(!e||!e.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return pdfWorkerPorts.has(e.port)?pdfWorkerPorts.get(e.port):new PDFWorker(e)}static getWorkerSrc(){return getWorkerSrc()}}return PDFWorker}();exports.PDFWorker=PDFWorker;class WorkerTransport{constructor(e,r,t,i){this.messageHandler=e,this.loadingTask=r,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({docId:r.docId,onUnsupportedFeature:this._onUnsupportedFeature.bind(this)}),this._params=i,this.CMapReaderFactory=new i.CMapReaderFactory({baseUrl:i.cMapUrl,isCompressed:i.cMapPacked}),this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=t,this._fullReader=null,this._lastProgress=null,this.pageCache=[],this.pagePromises=[],this.downloadInfoCapability=(0,_util.createPromiseCapability)(),this.setupMessageHandler()}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=(0,_util.createPromiseCapability)(),this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];this.pageCache.forEach(function(t){t&&e.push(t._destroy())}),this.pageCache.length=0,this.pagePromises.length=0;const r=this.messageHandler.sendWithPromise("Terminate",null);return e.push(r),Promise.all(e).then(()=>{this.fontLoader.clear(),this._networkStream&&this._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:r}=this;e.on("GetReader",(t,i)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=p=>{this._lastProgress={loaded:p.loaded,total:p.total}},i.onPull=()=>{this._fullReader.read().then(function({value:p,done:A}){if(A){i.close();return}(0,_util.assert)((0,_util.isArrayBuffer)(p),"GetReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(p),1,[p])}).catch(p=>{i.error(p)})},i.onCancel=p=>{this._fullReader.cancel(p)}}),e.on("ReaderHeadersReady",t=>{const i=(0,_util.createPromiseCapability)(),p=this._fullReader;return p.headersReady.then(()=>{(!p.isStreamingSupported||!p.isRangeSupported)&&(this._lastProgress&&r.onProgress&&r.onProgress(this._lastProgress),p.onProgress=A=>{r.onProgress&&r.onProgress({loaded:A.loaded,total:A.total})}),i.resolve({isStreamingSupported:p.isStreamingSupported,isRangeSupported:p.isRangeSupported,contentLength:p.contentLength})},i.reject),i.promise}),e.on("GetRangeReader",(t,i)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const p=this._networkStream.getRangeReader(t.begin,t.end);if(!p){i.close();return}i.onPull=()=>{p.read().then(function({value:A,done:P}){if(P){i.close();return}(0,_util.assert)((0,_util.isArrayBuffer)(A),"GetRangeReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(A),1,[A])}).catch(A=>{i.error(A)})},i.onCancel=A=>{p.cancel(A)}}),e.on("GetDoc",({pdfInfo:t})=>{this._numPages=t.numPages,r._capability.resolve(new PDFDocumentProxy(t,this))}),e.on("DocException",function(t){let i;switch(t.name){case"PasswordException":i=new _util.PasswordException(t.message,t.code);break;case"InvalidPDFException":i=new _util.InvalidPDFException(t.message);break;case"MissingPDFException":i=new _util.MissingPDFException(t.message);break;case"UnexpectedResponseException":i=new _util.UnexpectedResponseException(t.message,t.status);break;case"UnknownErrorException":i=new _util.UnknownErrorException(t.message,t.details);break}r._capability.reject(i)}),e.on("PasswordRequest",t=>{if(this._passwordCapability=(0,_util.createPromiseCapability)(),r.onPassword){const i=p=>{this._passwordCapability.resolve({password:p})};try{r.onPassword(i,t.code)}catch(p){this._passwordCapability.reject(p)}}else this._passwordCapability.reject(new _util.PasswordException(t.message,t.code));return this._passwordCapability.promise}),e.on("DataLoaded",t=>{r.onProgress&&r.onProgress({loaded:t.length,total:t.length}),this.downloadInfoCapability.resolve(t)}),e.on("StartRenderPage",t=>{if(this.destroyed)return;this.pageCache[t.pageIndex]._startRenderPage(t.transparency,t.intent)}),e.on("commonobj",t=>{if(this.destroyed)return;const[i,p,A]=t;if(!this.commonObjs.has(i))switch(p){case"Font":const P=this._params;if("error"in A){const h=A.error;(0,_util.warn)(`Error during font loading: ${h}`),this.commonObjs.resolve(i,h);break}let x=null;P.pdfBug&&globalThis.FontInspector&&globalThis.FontInspector.enabled&&(x={registerFont(h,S){globalThis.FontInspector.fontAdded(h,S)}});const C=new _font_loader.FontFaceObject(A,{isEvalSupported:P.isEvalSupported,disableFontFace:P.disableFontFace,ignoreErrors:P.ignoreErrors,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),fontRegistry:x});this.fontLoader.bind(C).catch(h=>e.sendWithPromise("FontFallback",{id:i})).finally(()=>{!P.fontExtraProperties&&C.data&&(C.data=null),this.commonObjs.resolve(i,C)});break;case"FontPath":case"FontType3Res":case"Image":this.commonObjs.resolve(i,A);break;default:throw new Error(`Got unknown common object type ${p}`)}}),e.on("obj",t=>{if(this.destroyed)return;const[i,p,A,P]=t,x=this.pageCache[p];if(!x.objs.has(i))switch(A){case"Image":x.objs.resolve(i,P);const C=8e6;P&&"data"in P&&P.data.length>C&&(x.cleanupAfterRender=!0);break;default:throw new Error(`Got unknown object type ${A}`)}}),e.on("DocProgress",t=>{this.destroyed||r.onProgress&&r.onProgress({loaded:t.loaded,total:t.total})}),e.on("UnsupportedFeature",this._onUnsupportedFeature.bind(this)),e.on("FetchBuiltInCMap",(t,i)=>{if(this.destroyed){i.error(new Error("Worker was destroyed"));return}let p=!1;i.onPull=()=>{if(p){i.close();return}p=!0,this.CMapReaderFactory.fetch(t).then(function(A){i.enqueue(A,1,[A.cMapData.buffer])}).catch(function(A){i.error(A)})}})}_onUnsupportedFeature({featureId:e}){this.destroyed||this.loadingTask.onUnsupportedFeature&&this.loadingTask.onUnsupportedFeature(e)}getData(){return this.messageHandler.sendWithPromise("GetData",null)}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request"));const r=e-1;if(r in this.pagePromises)return this.pagePromises[r];const t=this.messageHandler.sendWithPromise("GetPage",{pageIndex:r}).then(i=>{if(this.destroyed)throw new Error("Transport destroyed");const p=new PDFPageProxy(r,i,this,this._params.pdfBug);return this.pageCache[r]=p,p});return this.pagePromises[r]=t,t}getPageIndex(e){return this.messageHandler.sendWithPromise("GetPageIndex",{ref:e}).catch(function(r){return Promise.reject(new Error(r))})}getAnnotations(e,r){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:r})}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getJavaScript(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){return this.messageHandler.sendWithPromise("GetMetadata",null).then(e=>({info:e[0],metadata:e[1]?new _metadata.Metadata(e[1]):null,contentDispositionFilename:this._fullReader?this._fullReader.filename:null}))}getStats(){return this.messageHandler.sendWithPromise("GetStats",null)}startCleanup(){return this.messageHandler.sendWithPromise("Cleanup",null).then(()=>{for(let e=0,r=this.pageCache.length;e<r;e++){const t=this.pageCache[e];if(t&&!t.cleanup())throw new Error(`startCleanup: Page ${e+1} is currently rendering.`)}this.commonObjs.clear(),this.fontLoader.clear()})}get loadingParams(){const e=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:e.disableAutoFetch,disableFontFace:e.disableFontFace})}}class PDFObjects{constructor(){this._objs=Object.create(null)}_ensureObj(e){return this._objs[e]?this._objs[e]:this._objs[e]={capability:(0,_util.createPromiseCapability)(),data:null,resolved:!1}}get(e,r=null){if(r)return this._ensureObj(e).capability.promise.then(r),null;const t=this._objs[e];if(!t||!t.resolved)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return t.data}has(e){const r=this._objs[e];return r?r.resolved:!1}resolve(e,r){const t=this._ensureObj(e);t.resolved=!0,t.data=r,t.capability.resolve(r)}clear(){this._objs=Object.create(null)}}class RenderTask{constructor(e){this._internalRenderTask=e,this.onContinue=null}get promise(){return this._internalRenderTask.capability.promise}cancel(){this._internalRenderTask.cancel()}}const InternalRenderTask=function l(){const e=new WeakSet;class r{constructor({callback:i,params:p,objs:A,commonObjs:P,operatorList:x,pageIndex:C,canvasFactory:h,webGLContext:S,useRequestAnimationFrame:M=!1,pdfBug:u=!1}){this.callback=i,this.params=p,this.objs=A,this.commonObjs=P,this.operatorListIdx=null,this.operatorList=x,this._pageIndex=C,this.canvasFactory=h,this.webGLContext=S,this._pdfBug=u,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=M===!0&&typeof window<"u",this.cancelled=!1,this.capability=(0,_util.createPromiseCapability)(),this.task=new RenderTask(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=p.canvasContext.canvas}initializeGraphics(i=!1){if(this.cancelled)return;if(this._canvas){if(e.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");e.add(this._canvas)}this._pdfBug&&globalThis.StepperManager&&globalThis.StepperManager.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:p,viewport:A,transform:P,imageLayer:x,background:C}=this.params;this.gfx=new _canvas.CanvasGraphics(p,this.commonObjs,this.objs,this.canvasFactory,this.webGLContext,x),this.gfx.beginDrawing({transform:P,viewport:A,transparency:i,background:C}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback&&this.graphicsReadyCallback()}cancel(i=null){this.running=!1,this.cancelled=!0,this.gfx&&this.gfx.endDrawing(),this._canvas&&e.delete(this._canvas),this.callback(i||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,"canvas"))}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}this.stepper&&this.stepper.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this.cancel.bind(this))}):Promise.resolve().then(this._nextBound).catch(this.cancel.bind(this))}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),this._canvas&&e.delete(this._canvas),this.callback())))}}return r}(),version="2.5.207";exports.version=version;const build="0974d605";exports.build=build},function(l,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.FontLoader=e.FontFaceObject=void 0;var t=r(2);class i{constructor({docId:x,onUnsupportedFeature:C}){this.constructor===i&&(0,t.unreachable)("Cannot initialize BaseFontLoader."),this.docId=x,this._onUnsupportedFeature=C,this.nativeFontFaces=[],this.styleElement=null}addNativeFontFace(x){this.nativeFontFaces.push(x),document.fonts.add(x)}insertRule(x){let C=this.styleElement;C||(C=this.styleElement=document.createElement("style"),C.id=`PDFJS_FONT_STYLE_TAG_${this.docId}`,document.documentElement.getElementsByTagName("head")[0].appendChild(C));const h=C.sheet;h.insertRule(x,h.cssRules.length)}clear(){this.nativeFontFaces.forEach(function(x){document.fonts.delete(x)}),this.nativeFontFaces.length=0,this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async bind(x){if(x.attached||x.missingFile)return;if(x.attached=!0,this.isFontLoadingAPISupported){const h=x.createNativeFontFace();if(h){this.addNativeFontFace(h);try{await h.loaded}catch(S){throw this._onUnsupportedFeature({featureId:t.UNSUPPORTED_FEATURES.errorFontLoadNative}),(0,t.warn)(`Failed to load font '${h.family}': '${S}'.`),x.disableFontFace=!0,S}}return}const C=x.createFontFaceRule();if(C){if(this.insertRule(C),this.isSyncFontLoadingSupported)return;await new Promise(h=>{const S=this._queueLoadingCallback(h);this._prepareFontLoadEvent([C],[x],S)})}}_queueLoadingCallback(x){(0,t.unreachable)("Abstract method `_queueLoadingCallback`.")}get isFontLoadingAPISupported(){const x=typeof document<"u"&&!!document.fonts;return(0,t.shadow)(this,"isFontLoadingAPISupported",x)}get isSyncFontLoadingSupported(){(0,t.unreachable)("Abstract method `isSyncFontLoadingSupported`.")}get _loadTestFont(){(0,t.unreachable)("Abstract method `_loadTestFont`.")}_prepareFontLoadEvent(x,C,h){(0,t.unreachable)("Abstract method `_prepareFontLoadEvent`.")}}let p;e.FontLoader=p,e.FontLoader=p=class extends i{constructor(x){super(x),this.loadingContext={requests:[],nextRequestId:0},this.loadTestFontId=0}get isSyncFontLoadingSupported(){let x=!1;if(typeof navigator>"u")x=!0;else{const C=/Mozilla\/5.0.*?rv:(\d+).*? Gecko/.exec(navigator.userAgent);C&&C[1]>=14&&(x=!0)}return(0,t.shadow)(this,"isSyncFontLoadingSupported",x)}_queueLoadingCallback(x){function C(){for((0,t.assert)(!S.done,"completeRequest() cannot be called twice."),S.done=!0;h.requests.length>0&&h.requests[0].done;){const M=h.requests.shift();setTimeout(M.callback,0)}}const h=this.loadingContext,S={id:`pdfjs-font-loading-${h.nextRequestId++}`,done:!1,complete:C,callback:x};return h.requests.push(S),S}get _loadTestFont(){const x=function(){return atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==")};return(0,t.shadow)(this,"_loadTestFont",x())}_prepareFontLoadEvent(x,C,h){function S(B,D){return B.charCodeAt(D)<<24|B.charCodeAt(D+1)<<16|B.charCodeAt(D+2)<<8|B.charCodeAt(D+3)&255}function M(B,D,H,N){const a=B.substring(0,D),o=B.substring(D+H);return a+N+o}let u,y;const b=document.createElement("canvas");b.width=1,b.height=1;const k=b.getContext("2d");let R=0;function E(B,D){if(R++,R>30){(0,t.warn)("Load test font never loaded."),D();return}if(k.font="30px "+B,k.fillText(".",0,20),k.getImageData(0,0,1,1).data[3]>0){D();return}setTimeout(E.bind(null,B,D))}const L=`lt${Date.now()}${this.loadTestFontId++}`;let g=this._loadTestFont;g=M(g,976,L.length,L);const s=16,d=1482184792;let v=S(g,s);for(u=0,y=L.length-3;u<y;u+=4)v=v-d+S(L,u)|0;u<L.length&&(v=v-d+S(L+"XXX",u)|0),g=M(g,s,4,(0,t.string32)(v));const _=`url(data:font/opentype;base64,${btoa(g)});`,I=`@font-face {font-family:"${L}";src:${_}}`;this.insertRule(I);const w=[];for(u=0,y=C.length;u<y;u++)w.push(C[u].loadedName);w.push(L);const U=document.createElement("div");for(U.style.visibility="hidden",U.style.width=U.style.height="10px",U.style.position="absolute",U.style.top=U.style.left="0px",u=0,y=w.length;u<y;++u){const B=document.createElement("span");B.textContent="Hi",B.style.fontFamily=w[u],U.appendChild(B)}document.body.appendChild(U),E(L,function(){document.body.removeChild(U),h.complete()})}};class A{constructor(x,{isEvalSupported:C=!0,disableFontFace:h=!1,ignoreErrors:S=!1,onUnsupportedFeature:M=null,fontRegistry:u=null}){this.compiledGlyphs=Object.create(null);for(const y in x)this[y]=x[y];this.isEvalSupported=C!==!1,this.disableFontFace=h===!0,this.ignoreErrors=S===!0,this._onUnsupportedFeature=M,this.fontRegistry=u}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;const x=new FontFace(this.loadedName,this.data,{});return this.fontRegistry&&this.fontRegistry.registerFont(this),x}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const x=(0,t.bytesToString)(new Uint8Array(this.data)),C=`url(data:${this.mimetype};base64,${btoa(x)});`,h=`@font-face {font-family:"${this.loadedName}";src:${C}}`;return this.fontRegistry&&this.fontRegistry.registerFont(this,C),h}getPathGenerator(x,C){if(this.compiledGlyphs[C]!==void 0)return this.compiledGlyphs[C];let h,S;try{h=x.get(this.loadedName+"_path_"+C)}catch(M){if(!this.ignoreErrors)throw M;return this._onUnsupportedFeature&&this._onUnsupportedFeature({featureId:t.UNSUPPORTED_FEATURES.errorFontGetPath}),(0,t.warn)(`getPathGenerator - ignoring character: "${M}".`),this.compiledGlyphs[C]=function(u,y){}}if(this.isEvalSupported&&t.IsEvalSupportedCached.value){let M,u="";for(let y=0,b=h.length;y<b;y++)S=h[y],S.args!==void 0?M=S.args.join(","):M="",u+="c."+S.cmd+"("+M+`);
`;return this.compiledGlyphs[C]=new Function("c","size",u)}return this.compiledGlyphs[C]=function(M,u){for(let y=0,b=h.length;y<b;y++)S=h[y],S.cmd==="scale"&&(S.args=[u,-u]),M[S.cmd].apply(M,S.args)}}}e.FontFaceObject=A},function(l,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.apiCompatibilityParams=void 0;var t=r(4);const i=Object.create(null);(function(){t.isNodeJS&&(i.disableFontFace=!0)})();const p=Object.freeze(i);e.apiCompatibilityParams=p},function(l,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.CanvasGraphics=void 0;var t=r(2),i=r(9),p=16,A=100,P=4096,x=.65,C=1e3,h=16;function S(k){k.mozCurrentTransform||(k._originalSave=k.save,k._originalRestore=k.restore,k._originalRotate=k.rotate,k._originalScale=k.scale,k._originalTranslate=k.translate,k._originalTransform=k.transform,k._originalSetTransform=k.setTransform,k._transformMatrix=k._transformMatrix||[1,0,0,1,0,0],k._transformStack=[],Object.defineProperty(k,"mozCurrentTransform",{get:function(){return this._transformMatrix}}),Object.defineProperty(k,"mozCurrentTransformInverse",{get:function(){var E=this._transformMatrix,L=E[0],g=E[1],n=E[2],s=E[3],d=E[4],v=E[5],_=L*s-g*n,I=g*n-L*s;return[s/_,g/I,n/I,L/_,(s*d-n*v)/I,(g*d-L*v)/_]}}),k.save=function(){var E=this._transformMatrix;this._transformStack.push(E),this._transformMatrix=E.slice(0,6),this._originalSave()},k.restore=function(){var E=this._transformStack.pop();E&&(this._transformMatrix=E,this._originalRestore())},k.translate=function(E,L){var g=this._transformMatrix;g[4]=g[0]*E+g[2]*L+g[4],g[5]=g[1]*E+g[3]*L+g[5],this._originalTranslate(E,L)},k.scale=function(E,L){var g=this._transformMatrix;g[0]=g[0]*E,g[1]=g[1]*E,g[2]=g[2]*L,g[3]=g[3]*L,this._originalScale(E,L)},k.transform=function(E,L,g,n,s,d){var v=this._transformMatrix;this._transformMatrix=[v[0]*E+v[2]*L,v[1]*E+v[3]*L,v[0]*g+v[2]*n,v[1]*g+v[3]*n,v[0]*s+v[2]*d+v[4],v[1]*s+v[3]*d+v[5]],k._originalTransform(E,L,g,n,s,d)},k.setTransform=function(E,L,g,n,s,d){this._transformMatrix=[E,L,g,n,s,d],k._originalSetTransform(E,L,g,n,s,d)},k.rotate=function(E){var L=Math.cos(E),g=Math.sin(E),n=this._transformMatrix;this._transformMatrix=[n[0]*L+n[2]*g,n[1]*L+n[3]*g,n[0]*-g+n[2]*L,n[1]*-g+n[3]*L,n[4],n[5]],this._originalRotate(E)})}var M=function(){function R(E){this.canvasFactory=E,this.cache=Object.create(null)}return R.prototype={getCanvas:function(L,g,n,s){var d;return this.cache[L]!==void 0?(d=this.cache[L],this.canvasFactory.reset(d,g,n),d.context.setTransform(1,0,0,1,0,0)):(d=this.canvasFactory.create(g,n),this.cache[L]=d),s&&S(d.context),d},clear(){for(var E in this.cache){var L=this.cache[E];this.canvasFactory.destroy(L),delete this.cache[E]}}},R}();function u(k){var R=1e3,E=k.width,L=k.height,g,n,s,d=E+1,v=new Uint8Array(d*(L+1)),_=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),I=E+7&-8,w=k.data,U=new Uint8Array(I*L),B=0,D;for(g=0,D=w.length;g<D;g++)for(var H=128,N=w[g];H>0;)U[B++]=N&H?0:255,H>>=1;var a=0;for(B=0,U[B]!==0&&(v[0]=1,++a),n=1;n<E;n++)U[B]!==U[B+1]&&(v[n]=U[B]?2:1,++a),B++;for(U[B]!==0&&(v[n]=2,++a),g=1;g<L;g++){B=g*I,s=g*d,U[B-I]!==U[B]&&(v[s]=U[B]?1:8,++a);var o=(U[B]?4:0)+(U[B-I]?8:0);for(n=1;n<E;n++)o=(o>>2)+(U[B+1]?4:0)+(U[B-I+1]?8:0),_[o]&&(v[s+n]=_[o],++a),B++;if(U[B-I]!==U[B]&&(v[s+n]=U[B]?2:4,++a),a>R)return null}for(B=I*(L-1),s=g*d,U[B]!==0&&(v[s]=8,++a),n=1;n<E;n++)U[B]!==U[B+1]&&(v[s+n]=U[B]?4:8,++a),B++;if(U[B]!==0&&(v[s+n]=4,++a),a>R)return null;var c=new Int32Array([0,d,-1,0,-d,0,0,0,1]),f=[];for(g=0;a&&g<=L;g++){for(var m=g*d,T=m+E;m<T&&!v[m];)m++;if(m!==T){var F=[m%d,g],O=v[m],j=m,G;do{var X=c[O];do m+=X;while(!v[m]);G=v[m],G!==5&&G!==10?(O=G,v[m]=0):(O=G&51*O>>4,v[m]&=O>>2|O<<2),F.push(m%d),F.push(m/d|0),v[m]||--a}while(j!==m);f.push(F),--g}}var $=function(Y){Y.save(),Y.scale(1/E,-1/L),Y.translate(0,-L),Y.beginPath();for(let Q=0,K=f.length;Q<K;Q++){var V=f[Q];Y.moveTo(V[0],V[1]);for(let Z=2,te=V.length;Z<te;Z+=2)Y.lineTo(V[Z],V[Z+1])}Y.fill(),Y.beginPath(),Y.restore()};return $}var y=function(){function R(){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=t.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=t.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=t.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.resumeSMaskCtx=null}return R.prototype={clone:function(){return Object.create(this)},setCurrentPoint:function(L,g){this.x=L,this.y=g}},R}(),b=function(){var R=15,E=10;function L(o,c,f,m,T,F){this.ctx=o,this.current=new y,this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=c,this.objs=f,this.canvasFactory=m,this.webGLContext=T,this.imageLayer=F,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.cachedCanvases=new M(this.canvasFactory),o&&S(o),this._cachedGetSinglePixelWidth=null}function g(o,c){if(typeof ImageData<"u"&&c instanceof ImageData){o.putImageData(c,0,0);return}var f=c.height,m=c.width,T=f%h,F=(f-T)/h,O=T===0?F:F+1,j=o.createImageData(m,h),G=0,X,$=c.data,Y=j.data,V,Q,K,Z;if(c.kind===t.ImageKind.GRAYSCALE_1BPP){var te=$.byteLength,ee=new Uint32Array(Y.buffer,0,Y.byteLength>>2),le=ee.length,ce=m+7>>3,ie=4294967295,he=t.IsLittleEndianCached.value?4278190080:255;for(V=0;V<O;V++){for(K=V<F?h:T,X=0,Q=0;Q<K;Q++){for(var oe=te-G,ne=0,Ae=oe>ce?m:oe*8-7,ve=Ae&-8,pe=0,ue=0;ne<ve;ne+=8)ue=$[G++],ee[X++]=ue&128?ie:he,ee[X++]=ue&64?ie:he,ee[X++]=ue&32?ie:he,ee[X++]=ue&16?ie:he,ee[X++]=ue&8?ie:he,ee[X++]=ue&4?ie:he,ee[X++]=ue&2?ie:he,ee[X++]=ue&1?ie:he;for(;ne<Ae;ne++)pe===0&&(ue=$[G++],pe=128),ee[X++]=ue&pe?ie:he,pe>>=1}for(;X<le;)ee[X++]=0;o.putImageData(j,0,V*h)}}else if(c.kind===t.ImageKind.RGBA_32BPP){for(Q=0,Z=m*h*4,V=0;V<F;V++)Y.set($.subarray(G,G+Z)),G+=Z,o.putImageData(j,0,Q),Q+=h;V<O&&(Z=m*T*4,Y.set($.subarray(G,G+Z)),o.putImageData(j,0,Q))}else if(c.kind===t.ImageKind.RGB_24BPP)for(K=h,Z=m*K,V=0;V<O;V++){for(V>=F&&(K=T,Z=m*K),X=0,Q=Z;Q--;)Y[X++]=$[G++],Y[X++]=$[G++],Y[X++]=$[G++],Y[X++]=255;o.putImageData(j,0,V*h)}else throw new Error(`bad image kind: ${c.kind}`)}function n(o,c){for(var f=c.height,m=c.width,T=f%h,F=(f-T)/h,O=T===0?F:F+1,j=o.createImageData(m,h),G=0,X=c.data,$=j.data,Y=0;Y<O;Y++){for(var V=Y<F?h:T,Q=3,K=0;K<V;K++)for(var Z=0,te=0;te<m;te++){if(!Z){var ee=X[G++];Z=128}$[Q]=ee&Z?0:255,Q+=4,Z>>=1}o.putImageData(j,0,Y*h)}}function s(o,c){for(var f=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font"],m=0,T=f.length;m<T;m++){var F=f[m];o[F]!==void 0&&(c[F]=o[F])}o.setLineDash!==void 0&&(c.setLineDash(o.getLineDash()),c.lineDashOffset=o.lineDashOffset)}function d(o){o.strokeStyle="#000000",o.fillStyle="#000000",o.fillRule="nonzero",o.globalAlpha=1,o.lineWidth=1,o.lineCap="butt",o.lineJoin="miter",o.miterLimit=10,o.globalCompositeOperation="source-over",o.font="10px sans-serif",o.setLineDash!==void 0&&(o.setLineDash([]),o.lineDashOffset=0)}function v(o,c,f,m){for(var T=o.length,F=3;F<T;F+=4){var O=o[F];if(O===0)o[F-3]=c,o[F-2]=f,o[F-1]=m;else if(O<255){var j=255-O;o[F-3]=o[F-3]*O+c*j>>8,o[F-2]=o[F-2]*O+f*j>>8,o[F-1]=o[F-1]*O+m*j>>8}}}function _(o,c,f){for(var m=o.length,T=1/255,F=3;F<m;F+=4){var O=f?f[o[F]]:o[F];c[F]=c[F]*O*T|0}}function I(o,c,f){for(var m=o.length,T=3;T<m;T+=4){var F=o[T-3]*77+o[T-2]*152+o[T-1]*28;c[T]=f?c[T]*f[F>>8]>>8:c[T]*F>>16}}function w(o,c,f,m,T,F,O){var j=!!F,G=j?F[0]:0,X=j?F[1]:0,$=j?F[2]:0,Y;T==="Luminosity"?Y=I:Y=_;for(var V=1048576,Q=Math.min(m,Math.ceil(V/f)),K=0;K<m;K+=Q){var Z=Math.min(Q,m-K),te=o.getImageData(0,K,f,Z),ee=c.getImageData(0,K,f,Z);j&&v(te.data,G,X,$),Y(te.data,ee.data,O),o.putImageData(ee,0,K)}}function U(o,c,f,m){var T=c.canvas,F=c.context;o.setTransform(c.scaleX,0,0,c.scaleY,c.offsetX,c.offsetY);var O=c.backdrop||null;if(!c.transferMap&&m.isEnabled){const j=m.composeSMask({layer:f.canvas,mask:T,properties:{subtype:c.subtype,backdrop:O}});o.setTransform(1,0,0,1,0,0),o.drawImage(j,c.offsetX,c.offsetY);return}w(F,f,T.width,T.height,c.subtype,O,c.transferMap),o.drawImage(T,0,0)}var B=["butt","round","square"],D=["miter","round","bevel"],H={},N={};L.prototype={beginDrawing({transform:o,viewport:c,transparency:f=!1,background:m=null}){var T=this.ctx.canvas.width,F=this.ctx.canvas.height;if(this.ctx.save(),this.ctx.fillStyle=m||"rgb(255, 255, 255)",this.ctx.fillRect(0,0,T,F),this.ctx.restore(),f){var O=this.cachedCanvases.getCanvas("transparent",T,F,!0);this.compositeCtx=this.ctx,this.transparentCanvas=O.canvas,this.ctx=O.context,this.ctx.save(),this.ctx.transform.apply(this.ctx,this.compositeCtx.mozCurrentTransform)}this.ctx.save(),d(this.ctx),o&&this.ctx.transform.apply(this.ctx,o),this.ctx.transform.apply(this.ctx,c.transform),this.baseTransform=this.ctx.mozCurrentTransform.slice(),this.imageLayer&&this.imageLayer.beginLayout()},executeOperatorList:function(c,f,m,T){var F=c.argsArray,O=c.fnArray,j=f||0,G=F.length;if(G===j)return j;for(var X=G-j>E&&typeof m=="function",$=X?Date.now()+R:0,Y=0,V=this.commonObjs,Q=this.objs,K;;){if(T!==void 0&&j===T.nextBreakPoint)return T.breakIt(j,m),j;if(K=O[j],K!==t.OPS.dependency)this[K].apply(this,F[j]);else for(const Z of F[j]){const te=Z.startsWith("g_")?V:Q;if(!te.has(Z))return te.get(Z,m),j}if(j++,j===G)return j;if(X&&++Y>E){if(Date.now()>$)return m(),j;Y=0}}},endDrawing:function(){this.current.activeSMask!==null&&this.endSMaskGroup(),this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null),this.cachedCanvases.clear(),this.webGLContext.clear(),this.imageLayer&&this.imageLayer.endLayout()},setLineWidth:function(c){this.current.lineWidth=c,this.ctx.lineWidth=c},setLineCap:function(c){this.ctx.lineCap=B[c]},setLineJoin:function(c){this.ctx.lineJoin=D[c]},setMiterLimit:function(c){this.ctx.miterLimit=c},setDash:function(c,f){var m=this.ctx;m.setLineDash!==void 0&&(m.setLineDash(c),m.lineDashOffset=f)},setRenderingIntent(o){},setFlatness(o){},setGState:function(c){for(var f=0,m=c.length;f<m;f++){var T=c[f],F=T[0],O=T[1];switch(F){case"LW":this.setLineWidth(O);break;case"LC":this.setLineCap(O);break;case"LJ":this.setLineJoin(O);break;case"ML":this.setMiterLimit(O);break;case"D":this.setDash(O[0],O[1]);break;case"RI":this.setRenderingIntent(O);break;case"FL":this.setFlatness(O);break;case"Font":this.setFont(O[0],O[1]);break;case"CA":this.current.strokeAlpha=T[1];break;case"ca":this.current.fillAlpha=T[1],this.ctx.globalAlpha=T[1];break;case"BM":this.ctx.globalCompositeOperation=O;break;case"SMask":this.current.activeSMask&&(this.stateStack.length>0&&this.stateStack[this.stateStack.length-1].activeSMask===this.current.activeSMask?this.suspendSMaskGroup():this.endSMaskGroup()),this.current.activeSMask=O?this.tempSMask:null,this.current.activeSMask&&this.beginSMaskGroup(),this.tempSMask=null;break}}},beginSMaskGroup:function(){var c=this.current.activeSMask,f=c.canvas.width,m=c.canvas.height,T="smaskGroupAt"+this.groupLevel,F=this.cachedCanvases.getCanvas(T,f,m,!0),O=this.ctx,j=O.mozCurrentTransform;this.ctx.save();var G=F.context;G.scale(1/c.scaleX,1/c.scaleY),G.translate(-c.offsetX,-c.offsetY),G.transform.apply(G,j),c.startTransformInverse=G.mozCurrentTransformInverse,s(O,G),this.ctx=G,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(O),this.groupLevel++},suspendSMaskGroup:function(){var c=this.ctx;this.groupLevel--,this.ctx=this.groupStack.pop(),U(this.ctx,this.current.activeSMask,c,this.webGLContext),this.ctx.restore(),this.ctx.save(),s(c,this.ctx),this.current.resumeSMaskCtx=c;var f=t.Util.transform(this.current.activeSMask.startTransformInverse,c.mozCurrentTransform);this.ctx.transform.apply(this.ctx,f),c.save(),c.setTransform(1,0,0,1,0,0),c.clearRect(0,0,c.canvas.width,c.canvas.height),c.restore()},resumeSMaskGroup:function(){var c=this.current.resumeSMaskCtx,f=this.ctx;this.ctx=c,this.groupStack.push(f),this.groupLevel++},endSMaskGroup:function(){var c=this.ctx;this.groupLevel--,this.ctx=this.groupStack.pop(),U(this.ctx,this.current.activeSMask,c,this.webGLContext),this.ctx.restore(),s(c,this.ctx);var f=t.Util.transform(this.current.activeSMask.startTransformInverse,c.mozCurrentTransform);this.ctx.transform.apply(this.ctx,f)},save:function(){this.ctx.save();var c=this.current;this.stateStack.push(c),this.current=c.clone(),this.current.resumeSMaskCtx=null},restore:function(){this.current.resumeSMaskCtx&&this.resumeSMaskGroup(),this.current.activeSMask!==null&&(this.stateStack.length===0||this.stateStack[this.stateStack.length-1].activeSMask!==this.current.activeSMask)&&this.endSMaskGroup(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.ctx.restore(),this.pendingClip=null,this._cachedGetSinglePixelWidth=null)},transform:function(c,f,m,T,F,O){this.ctx.transform(c,f,m,T,F,O),this._cachedGetSinglePixelWidth=null},constructPath:function(c,f){for(var m=this.ctx,T=this.current,F=T.x,O=T.y,j=0,G=0,X=c.length;j<X;j++)switch(c[j]|0){case t.OPS.rectangle:F=f[G++],O=f[G++];var $=f[G++],Y=f[G++];$===0&&($=this.getSinglePixelWidth()),Y===0&&(Y=this.getSinglePixelWidth());var V=F+$,Q=O+Y;this.ctx.moveTo(F,O),this.ctx.lineTo(V,O),this.ctx.lineTo(V,Q),this.ctx.lineTo(F,Q),this.ctx.lineTo(F,O),this.ctx.closePath();break;case t.OPS.moveTo:F=f[G++],O=f[G++],m.moveTo(F,O);break;case t.OPS.lineTo:F=f[G++],O=f[G++],m.lineTo(F,O);break;case t.OPS.curveTo:F=f[G+4],O=f[G+5],m.bezierCurveTo(f[G],f[G+1],f[G+2],f[G+3],F,O),G+=6;break;case t.OPS.curveTo2:m.bezierCurveTo(F,O,f[G],f[G+1],f[G+2],f[G+3]),F=f[G+2],O=f[G+3],G+=4;break;case t.OPS.curveTo3:F=f[G+2],O=f[G+3],m.bezierCurveTo(f[G],f[G+1],F,O,F,O),G+=4;break;case t.OPS.closePath:m.closePath();break}T.setCurrentPoint(F,O)},closePath:function(){this.ctx.closePath()},stroke:function(c){c=typeof c<"u"?c:!0;var f=this.ctx,m=this.current.strokeColor;if(f.globalAlpha=this.current.strokeAlpha,m&&m.hasOwnProperty("type")&&m.type==="Pattern"){f.save();const T=f.mozCurrentTransform,F=t.Util.singularValueDecompose2dScale(T)[0];f.strokeStyle=m.getPattern(f,this),f.lineWidth=Math.max(this.getSinglePixelWidth()*x,this.current.lineWidth*F),f.stroke(),f.restore()}else f.lineWidth=Math.max(this.getSinglePixelWidth()*x,this.current.lineWidth),f.stroke();c&&this.consumePath(),f.globalAlpha=this.current.fillAlpha},closeStroke:function(){this.closePath(),this.stroke()},fill:function(c){c=typeof c<"u"?c:!0;var f=this.ctx,m=this.current.fillColor,T=this.current.patternFill,F=!1;T&&(f.save(),this.baseTransform&&f.setTransform.apply(f,this.baseTransform),f.fillStyle=m.getPattern(f,this),F=!0),this.pendingEOFill?(f.fill("evenodd"),this.pendingEOFill=!1):f.fill(),F&&f.restore(),c&&this.consumePath()},eoFill:function(){this.pendingEOFill=!0,this.fill()},fillStroke:function(){this.fill(!1),this.stroke(!1),this.consumePath()},eoFillStroke:function(){this.pendingEOFill=!0,this.fillStroke()},closeFillStroke:function(){this.closePath(),this.fillStroke()},closeEOFillStroke:function(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()},endPath:function(){this.consumePath()},clip:function(){this.pendingClip=H},eoClip:function(){this.pendingClip=N},beginText:function(){this.current.textMatrix=t.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0},endText:function(){var c=this.pendingTextPaths,f=this.ctx;if(c===void 0){f.beginPath();return}f.save(),f.beginPath();for(var m=0;m<c.length;m++){var T=c[m];f.setTransform.apply(f,T.transform),f.translate(T.x,T.y),T.addToPath(f,T.fontSize)}f.restore(),f.clip(),f.beginPath(),delete this.pendingTextPaths},setCharSpacing:function(c){this.current.charSpacing=c},setWordSpacing:function(c){this.current.wordSpacing=c},setHScale:function(c){this.current.textHScale=c/100},setLeading:function(c){this.current.leading=-c},setFont:function(c,f){var m=this.commonObjs.get(c),T=this.current;if(!m)throw new Error(`Can't find font for ${c}`);if(T.fontMatrix=m.fontMatrix?m.fontMatrix:t.FONT_IDENTITY_MATRIX,(T.fontMatrix[0]===0||T.fontMatrix[3]===0)&&(0,t.warn)("Invalid font matrix for font "+c),f<0?(f=-f,T.fontDirection=-1):T.fontDirection=1,this.current.font=m,this.current.fontSize=f,m.isType3Font)return;var F=m.loadedName||"sans-serif";let O="normal";m.black?O="900":m.bold&&(O="bold");var j=m.italic?"italic":"normal",G=`"${F}", ${m.fallbackName}`;let X=f;f<p?X=p:f>A&&(X=A),this.current.fontSizeScale=f/X,this.ctx.font=`${j} ${O} ${X}px ${G}`},setTextRenderingMode:function(c){this.current.textRenderingMode=c},setTextRise:function(c){this.current.textRise=c},moveText:function(c,f){this.current.x=this.current.lineX+=c,this.current.y=this.current.lineY+=f},setLeadingMoveText:function(c,f){this.setLeading(-f),this.moveText(c,f)},setTextMatrix:function(c,f,m,T,F,O){this.current.textMatrix=[c,f,m,T,F,O],this.current.textMatrixScale=Math.sqrt(c*c+f*f),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0},nextLine:function(){this.moveText(0,this.current.leading)},paintChar(o,c,f,m){var T=this.ctx,F=this.current,O=F.font,j=F.textRenderingMode,G=F.fontSize/F.fontSizeScale,X=j&t.TextRenderingMode.FILL_STROKE_MASK,$=!!(j&t.TextRenderingMode.ADD_TO_PATH_FLAG);const Y=F.patternFill&&!O.missingFile;var V;if((O.disableFontFace||$||Y)&&(V=O.getPathGenerator(this.commonObjs,o)),O.disableFontFace||Y?(T.save(),T.translate(c,f),T.beginPath(),V(T,G),m&&T.setTransform.apply(T,m),(X===t.TextRenderingMode.FILL||X===t.TextRenderingMode.FILL_STROKE)&&T.fill(),(X===t.TextRenderingMode.STROKE||X===t.TextRenderingMode.FILL_STROKE)&&T.stroke(),T.restore()):((X===t.TextRenderingMode.FILL||X===t.TextRenderingMode.FILL_STROKE)&&T.fillText(o,c,f),(X===t.TextRenderingMode.STROKE||X===t.TextRenderingMode.FILL_STROKE)&&T.strokeText(o,c,f)),$){var Q=this.pendingTextPaths||(this.pendingTextPaths=[]);Q.push({transform:T.mozCurrentTransform,x:c,y:f,fontSize:G,addToPath:V})}},get isFontSubpixelAAEnabled(){const{context:o}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);o.scale(1.5,1),o.fillText("I",0,10);for(var c=o.getImageData(0,0,10,10).data,f=!1,m=3;m<c.length;m+=4)if(c[m]>0&&c[m]<255){f=!0;break}return(0,t.shadow)(this,"isFontSubpixelAAEnabled",f)},showText:function(c){var f=this.current,m=f.font;if(m.isType3Font)return this.showType3Text(c);var T=f.fontSize;if(T===0)return;var F=this.ctx,O=f.fontSizeScale,j=f.charSpacing,G=f.wordSpacing,X=f.fontDirection,$=f.textHScale*X,Y=c.length,V=m.vertical,Q=V?1:-1,K=m.defaultVMetrics,Z=T*f.fontMatrix[0],te=f.textRenderingMode===t.TextRenderingMode.FILL&&!m.disableFontFace&&!f.patternFill;F.save();let ee;if(f.patternFill){F.save();const ae=f.fillColor.getPattern(F,this);ee=F.mozCurrentTransform,F.restore(),F.fillStyle=ae}F.transform.apply(F,f.textMatrix),F.translate(f.x,f.y+f.textRise),X>0?F.scale($,-1):F.scale($,1);var le=f.lineWidth,ce=f.textMatrixScale;if(ce===0||le===0){var ie=f.textRenderingMode&t.TextRenderingMode.FILL_STROKE_MASK;(ie===t.TextRenderingMode.STROKE||ie===t.TextRenderingMode.FILL_STROKE)&&(this._cachedGetSinglePixelWidth=null,le=this.getSinglePixelWidth()*x)}else le/=ce;O!==1&&(F.scale(O,O),le/=O),F.lineWidth=le;var he=0,oe;for(oe=0;oe<Y;++oe){var ne=c[oe];if((0,t.isNum)(ne)){he+=Q*ne*T/1e3;continue}var Ae=!1,ve=(ne.isSpace?G:0)+j,pe=ne.fontChar,ue=ne.accent,ge,_e,be,ye,fe=ne.width;if(V){var z,W,q;z=ne.vmetric||K,W=ne.vmetric?z[1]:fe*.5,W=-W*Z,q=z[2]*Z,fe=z?-z[0]:fe,ge=W/O,_e=(he+q)/O}else ge=he/O,_e=0;if(m.remeasure&&fe>0){var J=F.measureText(pe).width*1e3/T*O;if(fe<J&&this.isFontSubpixelAAEnabled){var re=fe/J;Ae=!0,F.save(),F.scale(re,1),ge/=re}else fe!==J&&(ge+=(fe-J)/2e3*T/O)}(ne.isInFont||m.missingFile)&&(te&&!ue?F.fillText(pe,ge,_e):(this.paintChar(pe,ge,_e,ee),ue&&(be=ge+ue.offset.x/O,ye=_e-ue.offset.y/O,this.paintChar(ue.fontChar,be,ye,ee))));var se;V?se=fe*Z-ve*X:se=fe*Z+ve*X,he+=se,Ae&&F.restore()}V?f.y-=he:f.x+=he*$,F.restore()},showType3Text:function(c){var f=this.ctx,m=this.current,T=m.font,F=m.fontSize,O=m.fontDirection,j=T.vertical?1:-1,G=m.charSpacing,X=m.wordSpacing,$=m.textHScale*O,Y=m.fontMatrix||t.FONT_IDENTITY_MATRIX,V=c.length,Q=m.textRenderingMode===t.TextRenderingMode.INVISIBLE,K,Z,te,ee;if(!(Q||F===0)){for(this._cachedGetSinglePixelWidth=null,f.save(),f.transform.apply(f,m.textMatrix),f.translate(m.x,m.y),f.scale($,O),K=0;K<V;++K){if(Z=c[K],(0,t.isNum)(Z)){ee=j*Z*F/1e3,this.ctx.translate(ee,0),m.x+=ee*$;continue}var le=(Z.isSpace?X:0)+G,ce=T.charProcOperatorList[Z.operatorListId];if(!ce){(0,t.warn)(`Type3 character "${Z.operatorListId}" is not available.`);continue}this.processingType3=Z,this.save(),f.scale(F,F),f.transform.apply(f,Y),this.executeOperatorList(ce),this.restore();var ie=t.Util.applyTransform([Z.width,0],Y);te=ie[0]*F+le,f.translate(te,0),m.x+=te*$}f.restore(),this.processingType3=null}},setCharWidth:function(c,f){},setCharWidthAndBounds:function(c,f,m,T,F,O){this.ctx.rect(m,T,F-m,O-T),this.clip(),this.endPath()},getColorN_Pattern:function(c){var f;if(c[0]==="TilingPattern"){var m=c[1],T=this.baseTransform||this.ctx.mozCurrentTransform.slice(),F={createCanvasGraphics:O=>new L(O,this.commonObjs,this.objs,this.canvasFactory,this.webGLContext)};f=new i.TilingPattern(c,m,this.ctx,F,T)}else f=(0,i.getShadingPatternFromIR)(c);return f},setStrokeColorN:function(){this.current.strokeColor=this.getColorN_Pattern(arguments)},setFillColorN:function(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0},setStrokeRGBColor:function(c,f,m){var T=t.Util.makeCssRgb(c,f,m);this.ctx.strokeStyle=T,this.current.strokeColor=T},setFillRGBColor:function(c,f,m){var T=t.Util.makeCssRgb(c,f,m);this.ctx.fillStyle=T,this.current.fillColor=T,this.current.patternFill=!1},shadingFill:function(c){var f=this.ctx;this.save();var m=(0,i.getShadingPatternFromIR)(c);f.fillStyle=m.getPattern(f,this,!0);var T=f.mozCurrentTransformInverse;if(T){var F=f.canvas,O=F.width,j=F.height,G=t.Util.applyTransform([0,0],T),X=t.Util.applyTransform([0,j],T),$=t.Util.applyTransform([O,0],T),Y=t.Util.applyTransform([O,j],T),V=Math.min(G[0],X[0],$[0],Y[0]),Q=Math.min(G[1],X[1],$[1],Y[1]),K=Math.max(G[0],X[0],$[0],Y[0]),Z=Math.max(G[1],X[1],$[1],Y[1]);this.ctx.fillRect(V,Q,K-V,Z-Q)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.restore()},beginInlineImage:function(){(0,t.unreachable)("Should not call beginInlineImage")},beginImageData:function(){(0,t.unreachable)("Should not call beginImageData")},paintFormXObjectBegin:function(c,f){if(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(c)&&c.length===6&&this.transform.apply(this,c),this.baseTransform=this.ctx.mozCurrentTransform,f){var m=f[2]-f[0],T=f[3]-f[1];this.ctx.rect(f[0],f[1],m,T),this.clip(),this.endPath()}},paintFormXObjectEnd:function(){this.restore(),this.baseTransform=this.baseTransformStack.pop()},beginGroup:function(c){this.save();var f=this.ctx;c.isolated||(0,t.info)("TODO: Support non-isolated groups."),c.knockout&&(0,t.warn)("Knockout groups not supported.");var m=f.mozCurrentTransform;if(c.matrix&&f.transform.apply(f,c.matrix),!c.bbox)throw new Error("Bounding box is required.");var T=t.Util.getAxialAlignedBoundingBox(c.bbox,f.mozCurrentTransform),F=[0,0,f.canvas.width,f.canvas.height];T=t.Util.intersect(T,F)||[0,0,0,0];var O=Math.floor(T[0]),j=Math.floor(T[1]),G=Math.max(Math.ceil(T[2])-O,1),X=Math.max(Math.ceil(T[3])-j,1),$=1,Y=1;G>P&&($=G/P,G=P),X>P&&(Y=X/P,X=P);var V="groupAt"+this.groupLevel;c.smask&&(V+="_smask_"+this.smaskCounter++%2);var Q=this.cachedCanvases.getCanvas(V,G,X,!0),K=Q.context;K.scale(1/$,1/Y),K.translate(-O,-j),K.transform.apply(K,m),c.smask?this.smaskStack.push({canvas:Q.canvas,context:K,offsetX:O,offsetY:j,scaleX:$,scaleY:Y,subtype:c.smask.subtype,backdrop:c.smask.backdrop,transferMap:c.smask.transferMap||null,startTransformInverse:null}):(f.setTransform(1,0,0,1,0,0),f.translate(O,j),f.scale($,Y)),s(f,K),this.ctx=K,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(f),this.groupLevel++,this.current.activeSMask=null},endGroup:function(c){this.groupLevel--;var f=this.ctx;this.ctx=this.groupStack.pop(),this.ctx.imageSmoothingEnabled!==void 0?this.ctx.imageSmoothingEnabled=!1:this.ctx.mozImageSmoothingEnabled=!1,c.smask?this.tempSMask=this.smaskStack.pop():this.ctx.drawImage(f.canvas,0,0),this.restore()},beginAnnotations:function(){this.save(),this.baseTransform&&this.ctx.setTransform.apply(this.ctx,this.baseTransform)},endAnnotations:function(){this.restore()},beginAnnotation:function(c,f,m){if(this.save(),d(this.ctx),this.current=new y,Array.isArray(c)&&c.length===4){var T=c[2]-c[0],F=c[3]-c[1];this.ctx.rect(c[0],c[1],T,F),this.clip(),this.endPath()}this.transform.apply(this,f),this.transform.apply(this,m)},endAnnotation:function(){this.restore()},paintImageMaskXObject:function(c){var f=this.ctx,m=c.width,T=c.height,F=this.current.fillColor,O=this.current.patternFill,j=this.processingType3;if(j&&j.compiled===void 0&&(m<=C&&T<=C?j.compiled=u({data:c.data,width:m,height:T}):j.compiled=null),j&&j.compiled){j.compiled(f);return}var G=this.cachedCanvases.getCanvas("maskCanvas",m,T),X=G.context;X.save(),n(X,c),X.globalCompositeOperation="source-in",X.fillStyle=O?F.getPattern(X,this):F,X.fillRect(0,0,m,T),X.restore(),this.paintInlineImageXObject(G.canvas)},paintImageMaskXObjectRepeat:function(c,f,m,T){var F=c.width,O=c.height,j=this.current.fillColor,G=this.current.patternFill,X=this.cachedCanvases.getCanvas("maskCanvas",F,O),$=X.context;$.save(),n($,c),$.globalCompositeOperation="source-in",$.fillStyle=G?j.getPattern($,this):j,$.fillRect(0,0,F,O),$.restore();for(var Y=this.ctx,V=0,Q=T.length;V<Q;V+=2)Y.save(),Y.transform(f,0,0,m,T[V],T[V+1]),Y.scale(1,-1),Y.drawImage(X.canvas,0,0,F,O,0,-1,1,1),Y.restore()},paintImageMaskXObjectGroup:function(c){for(var f=this.ctx,m=this.current.fillColor,T=this.current.patternFill,F=0,O=c.length;F<O;F++){var j=c[F],G=j.width,X=j.height,$=this.cachedCanvases.getCanvas("maskCanvas",G,X),Y=$.context;Y.save(),n(Y,j),Y.globalCompositeOperation="source-in",Y.fillStyle=T?m.getPattern(Y,this):m,Y.fillRect(0,0,G,X),Y.restore(),f.save(),f.transform.apply(f,j.transform),f.scale(1,-1),f.drawImage($.canvas,0,0,G,X,0,-1,1,1),f.restore()}},paintImageXObject:function(c){const f=c.startsWith("g_")?this.commonObjs.get(c):this.objs.get(c);if(!f){(0,t.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(f)},paintImageXObjectRepeat:function(c,f,m,T){const F=c.startsWith("g_")?this.commonObjs.get(c):this.objs.get(c);if(!F){(0,t.warn)("Dependent image isn't ready yet");return}for(var O=F.width,j=F.height,G=[],X=0,$=T.length;X<$;X+=2)G.push({transform:[f,0,0,m,T[X],T[X+1]],x:0,y:0,w:O,h:j});this.paintInlineImageXObjectGroup(F,G)},paintInlineImageXObject:function(c){var f=c.width,m=c.height,T=this.ctx;this.save(),T.scale(1/f,-1/m);var F=T.mozCurrentTransformInverse,O=F[0],j=F[1],G=Math.max(Math.sqrt(O*O+j*j),1),X=F[2],$=F[3],Y=Math.max(Math.sqrt(X*X+$*$),1),V,Q;if(typeof HTMLElement=="function"&&c instanceof HTMLElement||!c.data)V=c;else{Q=this.cachedCanvases.getCanvas("inlineImage",f,m);var K=Q.context;g(K,c),V=Q.canvas}for(var Z=f,te=m,ee="prescale1";G>2&&Z>1||Y>2&&te>1;){var le=Z,ce=te;G>2&&Z>1&&(le=Math.ceil(Z/2),G/=Z/le),Y>2&&te>1&&(ce=Math.ceil(te/2),Y/=te/ce),Q=this.cachedCanvases.getCanvas(ee,le,ce),K=Q.context,K.clearRect(0,0,le,ce),K.drawImage(V,0,0,Z,te,0,0,le,ce),V=Q.canvas,Z=le,te=ce,ee=ee==="prescale1"?"prescale2":"prescale1"}if(T.drawImage(V,0,0,Z,te,0,-m,f,m),this.imageLayer){var ie=this.getCanvasPosition(0,-m);this.imageLayer.appendImage({imgData:c,left:ie[0],top:ie[1],width:f/F[0],height:m/F[3]})}this.restore()},paintInlineImageXObjectGroup:function(c,f){var m=this.ctx,T=c.width,F=c.height,O=this.cachedCanvases.getCanvas("inlineImage",T,F),j=O.context;g(j,c);for(var G=0,X=f.length;G<X;G++){var $=f[G];if(m.save(),m.transform.apply(m,$.transform),m.scale(1,-1),m.drawImage(O.canvas,$.x,$.y,$.w,$.h,0,-1,1,1),this.imageLayer){var Y=this.getCanvasPosition($.x,$.y);this.imageLayer.appendImage({imgData:c,left:Y[0],top:Y[1],width:T,height:F})}m.restore()}},paintSolidColorImageMask:function(){this.ctx.fillRect(0,0,1,1)},paintXObject:function(){(0,t.warn)("Unsupported 'paintXObject' command.")},markPoint:function(c){},markPointProps:function(c,f){},beginMarkedContent:function(c){},beginMarkedContentProps:function(c,f){},endMarkedContent:function(){},beginCompat:function(){},endCompat:function(){},consumePath:function(){var c=this.ctx;this.pendingClip&&(this.pendingClip===N?c.clip("evenodd"):c.clip(),this.pendingClip=null),c.beginPath()},getSinglePixelWidth(o){if(this._cachedGetSinglePixelWidth===null){const c=this.ctx.mozCurrentTransformInverse;this._cachedGetSinglePixelWidth=Math.sqrt(Math.max(c[0]*c[0]+c[1]*c[1],c[2]*c[2]+c[3]*c[3]))}return this._cachedGetSinglePixelWidth},getCanvasPosition:function(c,f){var m=this.ctx.mozCurrentTransform;return[m[0]*c+m[2]*f+m[4],m[1]*c+m[3]*f+m[5]]}};for(var a in t.OPS)L.prototype[t.OPS[a]]=L.prototype[a];return L}();e.CanvasGraphics=b},function(l,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.getShadingPatternFromIR=P,e.TilingPattern=void 0;var t=r(2),i={};function p(C,h){if(!h||typeof Path2D>"u")return;const S=h[2]-h[0],M=h[3]-h[1],u=new Path2D;u.rect(h[0],h[1],S,M),C.clip(u)}i.RadialAxial={fromIR:function(h){var S=h[1],M=h[2],u=h[3],y=h[4],b=h[5],k=h[6],R=h[7];return{type:"Pattern",getPattern:function(L){p(L,M);var g;S==="axial"?g=L.createLinearGradient(y[0],y[1],b[0],b[1]):S==="radial"&&(g=L.createRadialGradient(y[0],y[1],k,b[0],b[1],R));for(var n=0,s=u.length;n<s;++n){var d=u[n];g.addColorStop(d[0],d[1])}return g}}}};var A=function(){function h(u,y,b,k,R,E,L,g){var n=y.coords,s=y.colors,d=u.data,v=u.width*4,_;n[b+1]>n[k+1]&&(_=b,b=k,k=_,_=E,E=L,L=_),n[k+1]>n[R+1]&&(_=k,k=R,R=_,_=L,L=g,g=_),n[b+1]>n[k+1]&&(_=b,b=k,k=_,_=E,E=L,L=_);var I=(n[b]+y.offsetX)*y.scaleX,w=(n[b+1]+y.offsetY)*y.scaleY,U=(n[k]+y.offsetX)*y.scaleX,B=(n[k+1]+y.offsetY)*y.scaleY,D=(n[R]+y.offsetX)*y.scaleX,H=(n[R+1]+y.offsetY)*y.scaleY;if(!(w>=H))for(var N=s[E],a=s[E+1],o=s[E+2],c=s[L],f=s[L+1],m=s[L+2],T=s[g],F=s[g+1],O=s[g+2],j=Math.round(w),G=Math.round(H),X,$,Y,V,Q,K,Z,te,ee=j;ee<=G;ee++){if(ee<B){let ne;ee<w?ne=0:w===B?ne=1:ne=(w-ee)/(w-B),X=I-(I-U)*ne,$=N-(N-c)*ne,Y=a-(a-f)*ne,V=o-(o-m)*ne}else{let ne;ee>H?ne=1:B===H?ne=0:ne=(B-ee)/(B-H),X=U-(U-D)*ne,$=c-(c-T)*ne,Y=f-(f-F)*ne,V=m-(m-O)*ne}let oe;ee<w?oe=0:ee>H?oe=1:oe=(w-ee)/(w-H),Q=I-(I-D)*oe,K=N-(N-T)*oe,Z=a-(a-F)*oe,te=o-(o-O)*oe;for(var le=Math.round(Math.min(X,Q)),ce=Math.round(Math.max(X,Q)),ie=v*ee+le*4,he=le;he<=ce;he++)oe=(X-he)/(X-Q),oe<0?oe=0:oe>1&&(oe=1),d[ie++]=$-($-K)*oe|0,d[ie++]=Y-(Y-Z)*oe|0,d[ie++]=V-(V-te)*oe|0,d[ie++]=255}}function S(u,y,b){var k=y.coords,R=y.colors,E,L;switch(y.type){case"lattice":var g=y.verticesPerRow,n=Math.floor(k.length/g)-1,s=g-1;for(E=0;E<n;E++)for(var d=E*g,v=0;v<s;v++,d++)h(u,b,k[d],k[d+1],k[d+g],R[d],R[d+1],R[d+g]),h(u,b,k[d+g+1],k[d+1],k[d+g],R[d+g+1],R[d+1],R[d+g]);break;case"triangles":for(E=0,L=k.length;E<L;E+=3)h(u,b,k[E],k[E+1],k[E+2],R[E],R[E+1],R[E+2]);break;default:throw new Error("illegal figure")}}function M(u,y,b,k,R,E,L,g){var n=1.1,s=3e3,d=2,v=Math.floor(u[0]),_=Math.floor(u[1]),I=Math.ceil(u[2])-v,w=Math.ceil(u[3])-_,U=Math.min(Math.ceil(Math.abs(I*y[0]*n)),s),B=Math.min(Math.ceil(Math.abs(w*y[1]*n)),s),D=I/U,H=w/B,N={coords:b,colors:k,offsetX:-v,offsetY:-_,scaleX:1/D,scaleY:1/H},a=U+d*2,o=B+d*2,c,f,m,T;if(g.isEnabled)c=g.drawFigures({width:U,height:B,backgroundColor:E,figures:R,context:N}),f=L.getCanvas("mesh",a,o,!1),f.context.drawImage(c,d,d),c=f.canvas;else{f=L.getCanvas("mesh",a,o,!1);var F=f.context,O=F.createImageData(U,B);if(E){var j=O.data;for(m=0,T=j.length;m<T;m+=4)j[m]=E[0],j[m+1]=E[1],j[m+2]=E[2],j[m+3]=255}for(m=0;m<R.length;m++)S(O,R[m],N);F.putImageData(O,d,d),c=f.canvas}return{canvas:c,offsetX:v-d*D,offsetY:_-d*H,scaleX:D,scaleY:H}}return M}();i.Mesh={fromIR:function(h){var S=h[2],M=h[3],u=h[4],y=h[5],b=h[6],k=h[7],R=h[8];return{type:"Pattern",getPattern:function(L,g,n){p(L,k);var s;if(n)s=t.Util.singularValueDecompose2dScale(L.mozCurrentTransform);else if(s=t.Util.singularValueDecompose2dScale(g.baseTransform),b){var d=t.Util.singularValueDecompose2dScale(b);s=[s[0]*d[0],s[1]*d[1]]}var v=A(y,s,S,M,u,n?null:R,g.cachedCanvases,g.webGLContext);return n||(L.setTransform.apply(L,g.baseTransform),b&&L.transform.apply(L,b)),L.translate(v.offsetX,v.offsetY),L.scale(v.scaleX,v.scaleY),L.createPattern(v.canvas,"no-repeat")}}}},i.Dummy={fromIR:function(){return{type:"Pattern",getPattern:function(){return"hotpink"}}}};function P(C){var h=i[C[0]];if(!h)throw new Error(`Unknown IR type: ${C[0]}`);return h.fromIR(C)}var x=function(){var h={COLORED:1,UNCOLORED:2},S=3e3;function M(u,y,b,k,R){this.operatorList=u[2],this.matrix=u[3]||[1,0,0,1,0,0],this.bbox=u[4],this.xstep=u[5],this.ystep=u[6],this.paintType=u[7],this.tilingType=u[8],this.color=y,this.canvasGraphicsFactory=k,this.baseTransform=R,this.type="Pattern",this.ctx=b}return M.prototype={createPatternCanvas:function(y){var b=this.operatorList,k=this.bbox,R=this.xstep,E=this.ystep,L=this.paintType,g=this.tilingType,n=this.color,s=this.canvasGraphicsFactory;(0,t.info)("TilingType: "+g);var d=k[0],v=k[1],_=k[2],I=k[3],w=t.Util.singularValueDecompose2dScale(this.matrix),U=t.Util.singularValueDecompose2dScale(this.baseTransform),B=[w[0]*U[0],w[1]*U[1]],D=this.getSizeAndScale(R,this.ctx.canvas.width,B[0]),H=this.getSizeAndScale(E,this.ctx.canvas.height,B[1]),N=y.cachedCanvases.getCanvas("pattern",D.size,H.size,!0),a=N.context,o=s.createCanvasGraphics(a);return o.groupLevel=y.groupLevel,this.setFillAndStrokeStyleToContext(o,L,n),o.transform(D.scale,0,0,H.scale,0,0),o.transform(1,0,0,1,-d,-v),this.clipBbox(o,k,d,v,_,I),o.executeOperatorList(b),this.ctx.transform(1,0,0,1,d,v),this.ctx.scale(1/D.scale,1/H.scale),N.canvas},getSizeAndScale:function(y,b,k){y=Math.abs(y);var R=Math.max(S,b),E=Math.ceil(y*k);return E>=R?E=R:k=E/y,{scale:k,size:E}},clipBbox:function(y,b,k,R,E,L){if(Array.isArray(b)&&b.length===4){var g=E-k,n=L-R;y.ctx.rect(k,R,g,n),y.clip(),y.endPath()}},setFillAndStrokeStyleToContext:function(y,b,k){const R=y.ctx,E=y.current;switch(b){case h.COLORED:var L=this.ctx;R.fillStyle=L.fillStyle,R.strokeStyle=L.strokeStyle,E.fillColor=L.fillStyle,E.strokeColor=L.strokeStyle;break;case h.UNCOLORED:var g=t.Util.makeCssRgb(k[0],k[1],k[2]);R.fillStyle=g,R.strokeStyle=g,E.fillColor=g,E.strokeColor=g;break;default:throw new t.FormatError(`Unsupported paint type: ${b}`)}},getPattern:function(y,b){y=this.ctx,y.setTransform.apply(y,this.baseTransform),y.transform.apply(y,this.matrix);var k=this.createPatternCanvas(b);return y.createPattern(k,"repeat")}},M}();e.TilingPattern=x},function(l,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.GlobalWorkerOptions=void 0;const t=Object.create(null);e.GlobalWorkerOptions=t,t.workerPort=t.workerPort===void 0?null:t.workerPort,t.workerSrc=t.workerSrc===void 0?"":t.workerSrc},function(l,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.MessageHandler=void 0;var t=r(2);const i={UNKNOWN:0,DATA:1,ERROR:2},p={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function A(x){if(typeof x!="object"||x===null)return x;switch(x.name){case"AbortException":return new t.AbortException(x.message);case"MissingPDFException":return new t.MissingPDFException(x.message);case"UnexpectedResponseException":return new t.UnexpectedResponseException(x.message,x.status);case"UnknownErrorException":return new t.UnknownErrorException(x.message,x.details);default:return new t.UnknownErrorException(x.message,x.toString())}}class P{constructor(C,h,S){this.sourceName=C,this.targetName=h,this.comObj=S,this.callbackId=1,this.streamId=1,this.postMessageTransfers=!0,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=M=>{const u=M.data;if(u.targetName!==this.sourceName)return;if(u.stream){this._processStreamMessage(u);return}if(u.callback){const b=u.callbackId,k=this.callbackCapabilities[b];if(!k)throw new Error(`Cannot resolve callback ${b}`);if(delete this.callbackCapabilities[b],u.callback===i.DATA)k.resolve(u.data);else if(u.callback===i.ERROR)k.reject(A(u.reason));else throw new Error("Unexpected callback case");return}const y=this.actionHandler[u.action];if(!y)throw new Error(`Unknown action from worker: ${u.action}`);if(u.callbackId){const b=this.sourceName,k=u.sourceName;new Promise(function(R){R(y(u.data))}).then(function(R){S.postMessage({sourceName:b,targetName:k,callback:i.DATA,callbackId:u.callbackId,data:R})},function(R){S.postMessage({sourceName:b,targetName:k,callback:i.ERROR,callbackId:u.callbackId,reason:A(R)})});return}if(u.streamId){this._createStreamSink(u);return}y(u.data)},S.addEventListener("message",this._onComObjOnMessage)}on(C,h){const S=this.actionHandler;if(S[C])throw new Error(`There is already an actionName called "${C}"`);S[C]=h}send(C,h,S){this._postMessage({sourceName:this.sourceName,targetName:this.targetName,action:C,data:h},S)}sendWithPromise(C,h,S){const M=this.callbackId++,u=(0,t.createPromiseCapability)();this.callbackCapabilities[M]=u;try{this._postMessage({sourceName:this.sourceName,targetName:this.targetName,action:C,callbackId:M,data:h},S)}catch(y){u.reject(y)}return u.promise}sendWithStream(C,h,S,M){const u=this.streamId++,y=this.sourceName,b=this.targetName,k=this.comObj;return new ReadableStream({start:R=>{const E=(0,t.createPromiseCapability)();return this.streamControllers[u]={controller:R,startCall:E,pullCall:null,cancelCall:null,isClosed:!1},this._postMessage({sourceName:y,targetName:b,action:C,streamId:u,data:h,desiredSize:R.desiredSize},M),E.promise},pull:R=>{const E=(0,t.createPromiseCapability)();return this.streamControllers[u].pullCall=E,k.postMessage({sourceName:y,targetName:b,stream:p.PULL,streamId:u,desiredSize:R.desiredSize}),E.promise},cancel:R=>{(0,t.assert)(R instanceof Error,"cancel must have a valid reason");const E=(0,t.createPromiseCapability)();return this.streamControllers[u].cancelCall=E,this.streamControllers[u].isClosed=!0,k.postMessage({sourceName:y,targetName:b,stream:p.CANCEL,streamId:u,reason:A(R)}),E.promise}},S)}_createStreamSink(C){const h=this,S=this.actionHandler[C.action],M=C.streamId,u=this.sourceName,y=C.sourceName,b=this.comObj,k={enqueue(R,E=1,L){if(this.isCancelled)return;const g=this.desiredSize;this.desiredSize-=E,g>0&&this.desiredSize<=0&&(this.sinkCapability=(0,t.createPromiseCapability)(),this.ready=this.sinkCapability.promise),h._postMessage({sourceName:u,targetName:y,stream:p.ENQUEUE,streamId:M,chunk:R},L)},close(){this.isCancelled||(this.isCancelled=!0,b.postMessage({sourceName:u,targetName:y,stream:p.CLOSE,streamId:M}),delete h.streamSinks[M])},error(R){(0,t.assert)(R instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,b.postMessage({sourceName:u,targetName:y,stream:p.ERROR,streamId:M,reason:A(R)}))},sinkCapability:(0,t.createPromiseCapability)(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:C.desiredSize,ready:null};k.sinkCapability.resolve(),k.ready=k.sinkCapability.promise,this.streamSinks[M]=k,new Promise(function(R){R(S(C.data,k))}).then(function(){b.postMessage({sourceName:u,targetName:y,stream:p.START_COMPLETE,streamId:M,success:!0})},function(R){b.postMessage({sourceName:u,targetName:y,stream:p.START_COMPLETE,streamId:M,reason:A(R)})})}_processStreamMessage(C){const h=C.streamId,S=this.sourceName,M=C.sourceName,u=this.comObj;switch(C.stream){case p.START_COMPLETE:C.success?this.streamControllers[h].startCall.resolve():this.streamControllers[h].startCall.reject(A(C.reason));break;case p.PULL_COMPLETE:C.success?this.streamControllers[h].pullCall.resolve():this.streamControllers[h].pullCall.reject(A(C.reason));break;case p.PULL:if(!this.streamSinks[h]){u.postMessage({sourceName:S,targetName:M,stream:p.PULL_COMPLETE,streamId:h,success:!0});break}this.streamSinks[h].desiredSize<=0&&C.desiredSize>0&&this.streamSinks[h].sinkCapability.resolve(),this.streamSinks[h].desiredSize=C.desiredSize;const{onPull:y}=this.streamSinks[C.streamId];new Promise(function(k){k(y&&y())}).then(function(){u.postMessage({sourceName:S,targetName:M,stream:p.PULL_COMPLETE,streamId:h,success:!0})},function(k){u.postMessage({sourceName:S,targetName:M,stream:p.PULL_COMPLETE,streamId:h,reason:A(k)})});break;case p.ENQUEUE:if((0,t.assert)(this.streamControllers[h],"enqueue should have stream controller"),this.streamControllers[h].isClosed)break;this.streamControllers[h].controller.enqueue(C.chunk);break;case p.CLOSE:if((0,t.assert)(this.streamControllers[h],"close should have stream controller"),this.streamControllers[h].isClosed)break;this.streamControllers[h].isClosed=!0,this.streamControllers[h].controller.close(),this._deleteStreamController(h);break;case p.ERROR:(0,t.assert)(this.streamControllers[h],"error should have stream controller"),this.streamControllers[h].controller.error(A(C.reason)),this._deleteStreamController(h);break;case p.CANCEL_COMPLETE:C.success?this.streamControllers[h].cancelCall.resolve():this.streamControllers[h].cancelCall.reject(A(C.reason)),this._deleteStreamController(h);break;case p.CANCEL:if(!this.streamSinks[h])break;const{onCancel:b}=this.streamSinks[C.streamId];new Promise(function(k){k(b&&b(A(C.reason)))}).then(function(){u.postMessage({sourceName:S,targetName:M,stream:p.CANCEL_COMPLETE,streamId:h,success:!0})},function(k){u.postMessage({sourceName:S,targetName:M,stream:p.CANCEL_COMPLETE,streamId:h,reason:A(k)})}),this.streamSinks[h].sinkCapability.reject(A(C.reason)),this.streamSinks[h].isCancelled=!0,delete this.streamSinks[h];break;default:throw new Error("Unexpected stream case")}}async _deleteStreamController(C){await Promise.allSettled([this.streamControllers[C].startCall,this.streamControllers[C].pullCall,this.streamControllers[C].cancelCall].map(function(h){return h&&h.promise})),delete this.streamControllers[C]}_postMessage(C,h){h&&this.postMessageTransfers?this.comObj.postMessage(C,h):this.comObj.postMessage(C)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}e.MessageHandler=P},function(l,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.Metadata=void 0;var t=r(2),i=r(13);class p{constructor(P){(0,t.assert)(typeof P=="string","Metadata: input is not a string"),P=this._repair(P);const C=new i.SimpleXMLParser().parseFromString(P);this._metadataMap=new Map,C&&this._parse(C)}_repair(P){return P.replace(/^[^<]+/,"").replace(/>\\376\\377([^<]+)/g,function(x,C){const h=C.replace(/\\([0-3])([0-7])([0-7])/g,function(M,u,y,b){return String.fromCharCode(u*64+y*8+b*1)}).replace(/&(amp|apos|gt|lt|quot);/g,function(M,u){switch(u){case"amp":return"&";case"apos":return"'";case"gt":return">";case"lt":return"<";case"quot":return'"'}throw new Error(`_repair: ${u} isn't defined.`)});let S="";for(let M=0,u=h.length;M<u;M+=2){const y=h.charCodeAt(M)*256+h.charCodeAt(M+1);y>=32&&y<127&&y!==60&&y!==62&&y!==38?S+=String.fromCharCode(y):S+="&#x"+(65536+y).toString(16).substring(1)+";"}return">"+S})}_parse(P){let x=P.documentElement;if(x.nodeName.toLowerCase()!=="rdf:rdf")for(x=x.firstChild;x&&x.nodeName.toLowerCase()!=="rdf:rdf";)x=x.nextSibling;const C=x?x.nodeName.toLowerCase():null;if(!x||C!=="rdf:rdf"||!x.hasChildNodes())return;const h=x.childNodes;for(let S=0,M=h.length;S<M;S++){const u=h[S];if(u.nodeName.toLowerCase()==="rdf:description"){for(let y=0,b=u.childNodes.length;y<b;y++)if(u.childNodes[y].nodeName.toLowerCase()!=="#text"){const k=u.childNodes[y],R=k.nodeName.toLowerCase();this._metadataMap.set(R,k.textContent.trim())}}}}get(P){return this._metadataMap.has(P)?this._metadataMap.get(P):null}getAll(){const P=Object.create(null);for(const[x,C]of this._metadataMap)P[x]=C;return P}has(P){return this._metadataMap.has(P)}}e.Metadata=p},function(l,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.SimpleXMLParser=void 0;const t={NoError:0,EndOfDocument:-1,UnterminatedCdat:-2,UnterminatedXmlDeclaration:-3,UnterminatedDoctypeDeclaration:-4,UnterminatedComment:-5,MalformedElement:-6,OutOfMemory:-7,UnterminatedAttributeValue:-8,UnterminatedElement:-9,ElementNeverBegun:-10};function i(C,h){const S=C[h];return S===" "||S===`
`||S==="\r"||S==="	"}function p(C){for(let h=0,S=C.length;h<S;h++)if(!i(C,h))return!1;return!0}class A{_resolveEntities(h){return h.replace(/&([^;]+);/g,(S,M)=>{if(M.substring(0,2)==="#x")return String.fromCharCode(parseInt(M.substring(2),16));if(M.substring(0,1)==="#")return String.fromCharCode(parseInt(M.substring(1),10));switch(M){case"lt":return"<";case"gt":return">";case"amp":return"&";case"quot":return'"'}return this.onResolveEntity(M)})}_parseContent(h,S){const M=[];let u=S;function y(){for(;u<h.length&&i(h,u);)++u}for(;u<h.length&&!i(h,u)&&h[u]!==">"&&h[u]!=="/";)++u;const b=h.substring(S,u);for(y();u<h.length&&h[u]!==">"&&h[u]!=="/"&&h[u]!=="?";){y();let k="",R="";for(;u<h.length&&!i(h,u)&&h[u]!=="=";)k+=h[u],++u;if(y(),h[u]!=="=")return null;++u,y();const E=h[u];if(E!=='"'&&E!=="'")return null;const L=h.indexOf(E,++u);if(L<0)return null;R=h.substring(u,L),M.push({name:k,value:this._resolveEntities(R)}),u=L+1,y()}return{name:b,attributes:M,parsed:u-S}}_parseProcessingInstruction(h,S){let M=S;function u(){for(;M<h.length&&i(h,M);)++M}for(;M<h.length&&!i(h,M)&&h[M]!==">"&&h[M]!=="/";)++M;const y=h.substring(S,M);u();const b=M;for(;M<h.length&&(h[M]!=="?"||h[M+1]!==">");)++M;const k=h.substring(b,M);return{name:y,value:k,parsed:M-S}}parseXml(h){let S=0;for(;S<h.length;){const M=h[S];let u=S;if(M==="<"){++u;const y=h[u];let b;switch(y){case"/":if(++u,b=h.indexOf(">",u),b<0){this.onError(t.UnterminatedElement);return}this.onEndElement(h.substring(u,b)),u=b+1;break;case"?":++u;const k=this._parseProcessingInstruction(h,u);if(h.substring(u+k.parsed,u+k.parsed+2)!=="?>"){this.onError(t.UnterminatedXmlDeclaration);return}this.onPi(k.name,k.value),u+=k.parsed+2;break;case"!":if(h.substring(u+1,u+3)==="--"){if(b=h.indexOf("-->",u+3),b<0){this.onError(t.UnterminatedComment);return}this.onComment(h.substring(u+3,b)),u=b+3}else if(h.substring(u+1,u+8)==="[CDATA["){if(b=h.indexOf("]]>",u+8),b<0){this.onError(t.UnterminatedCdat);return}this.onCdata(h.substring(u+8,b)),u=b+3}else if(h.substring(u+1,u+8)==="DOCTYPE"){const L=h.indexOf("[",u+8);let g=!1;if(b=h.indexOf(">",u+8),b<0){this.onError(t.UnterminatedDoctypeDeclaration);return}if(L>0&&b>L){if(b=h.indexOf("]>",u+8),b<0){this.onError(t.UnterminatedDoctypeDeclaration);return}g=!0}const n=h.substring(u+8,b+(g?1:0));this.onDoctype(n),u=b+(g?2:1)}else{this.onError(t.MalformedElement);return}break;default:const R=this._parseContent(h,u);if(R===null){this.onError(t.MalformedElement);return}let E=!1;if(h.substring(u+R.parsed,u+R.parsed+2)==="/>")E=!0;else if(h.substring(u+R.parsed,u+R.parsed+1)!==">"){this.onError(t.UnterminatedElement);return}this.onBeginElement(R.name,R.attributes,E),u+=R.parsed+(E?2:1);break}}else{for(;u<h.length&&h[u]!=="<";)u++;const y=h.substring(S,u);this.onText(this._resolveEntities(y))}S=u}}onResolveEntity(h){return`&${h};`}onPi(h,S){}onComment(h){}onCdata(h){}onDoctype(h){}onText(h){}onBeginElement(h,S,M){}onEndElement(h){}onError(h){}}class P{constructor(h,S){this.nodeName=h,this.nodeValue=S,Object.defineProperty(this,"parentNode",{value:null,writable:!0})}get firstChild(){return this.childNodes&&this.childNodes[0]}get nextSibling(){const h=this.parentNode.childNodes;if(!h)return;const S=h.indexOf(this);if(S!==-1)return h[S+1]}get textContent(){return this.childNodes?this.childNodes.map(function(h){return h.textContent}).join(""):this.nodeValue||""}hasChildNodes(){return this.childNodes&&this.childNodes.length>0}}class x extends A{constructor(){super(),this._currentFragment=null,this._stack=null,this._errorCode=t.NoError}parseFromString(h){if(this._currentFragment=[],this._stack=[],this._errorCode=t.NoError,this.parseXml(h),this._errorCode!==t.NoError)return;const[S]=this._currentFragment;if(!!S)return{documentElement:S}}onResolveEntity(h){switch(h){case"apos":return"'"}return super.onResolveEntity(h)}onText(h){if(p(h))return;const S=new P("#text",h);this._currentFragment.push(S)}onCdata(h){const S=new P("#text",h);this._currentFragment.push(S)}onBeginElement(h,S,M){const u=new P(h);u.childNodes=[],this._currentFragment.push(u),!M&&(this._stack.push(this._currentFragment),this._currentFragment=u.childNodes)}onEndElement(h){this._currentFragment=this._stack.pop()||[];const S=this._currentFragment[this._currentFragment.length-1];if(!!S)for(let M=0,u=S.childNodes.length;M<u;M++)S.childNodes[M].parentNode=S}onError(h){this._errorCode=h}}e.SimpleXMLParser=x},function(l,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.PDFDataTransportStream=void 0;var t=r(2);class i{constructor(x,C){(0,t.assert)(C,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=x.progressiveDone||!1;const h=x.initialData;if(h&&h.length>0){const S=new Uint8Array(h).buffer;this._queuedChunks.push(S)}this._pdfDataRangeTransport=C,this._isStreamingSupported=!x.disableStream,this._isRangeSupported=!x.disableRange,this._contentLength=x.length,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((S,M)=>{this._onReceiveData({begin:S,chunk:M})}),this._pdfDataRangeTransport.addProgressListener((S,M)=>{this._onProgress({loaded:S,total:M})}),this._pdfDataRangeTransport.addProgressiveReadListener(S=>{this._onReceiveData({chunk:S})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData(x){const C=new Uint8Array(x.chunk).buffer;if(x.begin===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(C):this._queuedChunks.push(C);else{const h=this._rangeReaders.some(function(S){return S._begin!==x.begin?!1:(S._enqueue(C),!0)});(0,t.assert)(h,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?this._fullRequestReader._loaded:0}_onProgress(x){if(x.total===void 0){const C=this._rangeReaders[0];C&&C.onProgress&&C.onProgress({loaded:x.loaded})}else{const C=this._fullRequestReader;C&&C.onProgress&&C.onProgress({loaded:x.loaded,total:x.total})}}_onProgressiveDone(){this._fullRequestReader&&this._fullRequestReader.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(x){const C=this._rangeReaders.indexOf(x);C>=0&&this._rangeReaders.splice(C,1)}getFullReader(){(0,t.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const x=this._queuedChunks;return this._queuedChunks=null,new p(this,x,this._progressiveDone)}getRangeReader(x,C){if(C<=this._progressiveDataLength)return null;const h=new A(this,x,C);return this._pdfDataRangeTransport.requestDataRange(x,C),this._rangeReaders.push(h),h}cancelAllRequests(x){this._fullRequestReader&&this._fullRequestReader.cancel(x),this._rangeReaders.slice(0).forEach(function(h){h.cancel(x)}),this._pdfDataRangeTransport.abort()}}e.PDFDataTransportStream=i;class p{constructor(x,C,h=!1){this._stream=x,this._done=h||!1,this._filename=null,this._queuedChunks=C||[],this._loaded=0;for(const S of this._queuedChunks)this._loaded+=S.byteLength;this._requests=[],this._headersReady=Promise.resolve(),x._fullRequestReader=this,this.onProgress=null}_enqueue(x){this._done||(this._requests.length>0?this._requests.shift().resolve({value:x,done:!1}):this._queuedChunks.push(x),this._loaded+=x.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const x=(0,t.createPromiseCapability)();return this._requests.push(x),x.promise}cancel(x){this._done=!0,this._requests.forEach(function(C){C.resolve({value:void 0,done:!0})}),this._requests=[]}progressiveDone(){this._done||(this._done=!0)}}class A{constructor(x,C,h){this._stream=x,this._begin=C,this._end=h,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(x){this._done||(this._requests.length===0?this._queuedChunk=x:(this._requests.shift().resolve({value:x,done:!1}),this._requests.forEach(function(h){h.resolve({value:void 0,done:!0})}),this._requests=[]),this._done=!0,this._stream._removeRangeReader(this))}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const C=this._queuedChunk;return this._queuedChunk=null,{value:C,done:!1}}if(this._done)return{value:void 0,done:!0};const x=(0,t.createPromiseCapability)();return this._requests.push(x),x.promise}cancel(x){this._done=!0,this._requests.forEach(function(C){C.resolve({value:void 0,done:!0})}),this._requests=[],this._stream._removeRangeReader(this)}}},function(l,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.WebGLContext=void 0;var t=r(2);class i{constructor({enable:P=!1}){this._enabled=P===!0}get isEnabled(){let P=this._enabled;return P&&(P=p.tryInitGL()),(0,t.shadow)(this,"isEnabled",P)}composeSMask({layer:P,mask:x,properties:C}){return p.composeSMask(P,x,C)}drawFigures({width:P,height:x,backgroundColor:C,figures:h,context:S}){return p.drawFigures(P,x,C,h,S)}clear(){p.cleanup()}}e.WebGLContext=i;var p=function(){function P(_,I,w){var U=_.createShader(w);_.shaderSource(U,I),_.compileShader(U);var B=_.getShaderParameter(U,_.COMPILE_STATUS);if(!B){var D=_.getShaderInfoLog(U);throw new Error("Error during shader compilation: "+D)}return U}function x(_,I){return P(_,I,_.VERTEX_SHADER)}function C(_,I){return P(_,I,_.FRAGMENT_SHADER)}function h(_,I){for(var w=_.createProgram(),U=0,B=I.length;U<B;++U)_.attachShader(w,I[U]);_.linkProgram(w);var D=_.getProgramParameter(w,_.LINK_STATUS);if(!D){var H=_.getProgramInfoLog(w);throw new Error("Error during program linking: "+H)}return w}function S(_,I,w){_.activeTexture(w);var U=_.createTexture();return _.bindTexture(_.TEXTURE_2D,U),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,_.CLAMP_TO_EDGE),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,_.CLAMP_TO_EDGE),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,_.NEAREST),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MAG_FILTER,_.NEAREST),_.texImage2D(_.TEXTURE_2D,0,_.RGBA,_.RGBA,_.UNSIGNED_BYTE,I),U}var M,u;function y(){M||(u=document.createElement("canvas"),M=u.getContext("webgl",{premultipliedalpha:!1}))}var b="  attribute vec2 a_position;                                      attribute vec2 a_texCoord;                                                                                                      uniform vec2 u_resolution;                                                                                                      varying vec2 v_texCoord;                                                                                                        void main() {                                                     vec2 clipSpace = (a_position / u_resolution) * 2.0 - 1.0;       gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);                                                                              v_texCoord = a_texCoord;                                      }                                                             ",k="  precision mediump float;                                                                                                        uniform vec4 u_backdrop;                                        uniform int u_subtype;                                          uniform sampler2D u_image;                                      uniform sampler2D u_mask;                                                                                                       varying vec2 v_texCoord;                                                                                                        void main() {                                                     vec4 imageColor = texture2D(u_image, v_texCoord);               vec4 maskColor = texture2D(u_mask, v_texCoord);                 if (u_backdrop.a > 0.0) {                                         maskColor.rgb = maskColor.rgb * maskColor.a +                                   u_backdrop.rgb * (1.0 - maskColor.a);         }                                                               float lum;                                                      if (u_subtype == 0) {                                             lum = maskColor.a;                                            } else {                                                          lum = maskColor.r * 0.3 + maskColor.g * 0.59 +                        maskColor.b * 0.11;                                     }                                                               imageColor.a *= lum;                                            imageColor.rgb *= imageColor.a;                                 gl_FragColor = imageColor;                                    }                                                             ",R=null;function E(){var _,I;y(),_=u,u=null,I=M,M=null;var w=x(I,b),U=C(I,k),B=h(I,[w,U]);I.useProgram(B);var D={};D.gl=I,D.canvas=_,D.resolutionLocation=I.getUniformLocation(B,"u_resolution"),D.positionLocation=I.getAttribLocation(B,"a_position"),D.backdropLocation=I.getUniformLocation(B,"u_backdrop"),D.subtypeLocation=I.getUniformLocation(B,"u_subtype");var H=I.getAttribLocation(B,"a_texCoord"),N=I.getUniformLocation(B,"u_image"),a=I.getUniformLocation(B,"u_mask"),o=I.createBuffer();I.bindBuffer(I.ARRAY_BUFFER,o),I.bufferData(I.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]),I.STATIC_DRAW),I.enableVertexAttribArray(H),I.vertexAttribPointer(H,2,I.FLOAT,!1,0,0),I.uniform1i(N,0),I.uniform1i(a,1),R=D}function L(_,I,w){var U=_.width,B=_.height;R||E();var D=R,H=D.canvas,N=D.gl;H.width=U,H.height=B,N.viewport(0,0,N.drawingBufferWidth,N.drawingBufferHeight),N.uniform2f(D.resolutionLocation,U,B),w.backdrop?N.uniform4f(D.resolutionLocation,w.backdrop[0],w.backdrop[1],w.backdrop[2],1):N.uniform4f(D.resolutionLocation,0,0,0,0),N.uniform1i(D.subtypeLocation,w.subtype==="Luminosity"?1:0);var a=S(N,_,N.TEXTURE0),o=S(N,I,N.TEXTURE1),c=N.createBuffer();return N.bindBuffer(N.ARRAY_BUFFER,c),N.bufferData(N.ARRAY_BUFFER,new Float32Array([0,0,U,0,0,B,0,B,U,0,U,B]),N.STATIC_DRAW),N.enableVertexAttribArray(D.positionLocation),N.vertexAttribPointer(D.positionLocation,2,N.FLOAT,!1,0,0),N.clearColor(0,0,0,0),N.enable(N.BLEND),N.blendFunc(N.ONE,N.ONE_MINUS_SRC_ALPHA),N.clear(N.COLOR_BUFFER_BIT),N.drawArrays(N.TRIANGLES,0,6),N.flush(),N.deleteTexture(a),N.deleteTexture(o),N.deleteBuffer(c),H}var g="  attribute vec2 a_position;                                      attribute vec3 a_color;                                                                                                         uniform vec2 u_resolution;                                      uniform vec2 u_scale;                                           uniform vec2 u_offset;                                                                                                          varying vec4 v_color;                                                                                                           void main() {                                                     vec2 position = (a_position + u_offset) * u_scale;              vec2 clipSpace = (position / u_resolution) * 2.0 - 1.0;         gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);                                                                              v_color = vec4(a_color / 255.0, 1.0);                         }                                                             ",n="  precision mediump float;                                                                                                        varying vec4 v_color;                                                                                                           void main() {                                                     gl_FragColor = v_color;                                       }                                                             ",s=null;function d(){var _,I;y(),_=u,u=null,I=M,M=null;var w=x(I,g),U=C(I,n),B=h(I,[w,U]);I.useProgram(B);var D={};D.gl=I,D.canvas=_,D.resolutionLocation=I.getUniformLocation(B,"u_resolution"),D.scaleLocation=I.getUniformLocation(B,"u_scale"),D.offsetLocation=I.getUniformLocation(B,"u_offset"),D.positionLocation=I.getAttribLocation(B,"a_position"),D.colorLocation=I.getAttribLocation(B,"a_color"),s=D}function v(_,I,w,U,B){s||d();var D=s,H=D.canvas,N=D.gl;H.width=_,H.height=I,N.viewport(0,0,N.drawingBufferWidth,N.drawingBufferHeight),N.uniform2f(D.resolutionLocation,_,I);var a=0,o,c,f;for(o=0,c=U.length;o<c;o++)switch(U[o].type){case"lattice":f=U[o].coords.length/U[o].verticesPerRow|0,a+=(f-1)*(U[o].verticesPerRow-1)*6;break;case"triangles":a+=U[o].coords.length;break}var m=new Float32Array(a*2),T=new Uint8Array(a*3),F=B.coords,O=B.colors,j=0,G=0;for(o=0,c=U.length;o<c;o++){var X=U[o],$=X.coords,Y=X.colors;switch(X.type){case"lattice":var V=X.verticesPerRow;f=$.length/V|0;for(var Q=1;Q<f;Q++)for(var K=Q*V+1,Z=1;Z<V;Z++,K++)m[j]=F[$[K-V-1]],m[j+1]=F[$[K-V-1]+1],m[j+2]=F[$[K-V]],m[j+3]=F[$[K-V]+1],m[j+4]=F[$[K-1]],m[j+5]=F[$[K-1]+1],T[G]=O[Y[K-V-1]],T[G+1]=O[Y[K-V-1]+1],T[G+2]=O[Y[K-V-1]+2],T[G+3]=O[Y[K-V]],T[G+4]=O[Y[K-V]+1],T[G+5]=O[Y[K-V]+2],T[G+6]=O[Y[K-1]],T[G+7]=O[Y[K-1]+1],T[G+8]=O[Y[K-1]+2],m[j+6]=m[j+2],m[j+7]=m[j+3],m[j+8]=m[j+4],m[j+9]=m[j+5],m[j+10]=F[$[K]],m[j+11]=F[$[K]+1],T[G+9]=T[G+3],T[G+10]=T[G+4],T[G+11]=T[G+5],T[G+12]=T[G+6],T[G+13]=T[G+7],T[G+14]=T[G+8],T[G+15]=O[Y[K]],T[G+16]=O[Y[K]+1],T[G+17]=O[Y[K]+2],j+=12,G+=18;break;case"triangles":for(var te=0,ee=$.length;te<ee;te++)m[j]=F[$[te]],m[j+1]=F[$[te]+1],T[G]=O[Y[te]],T[G+1]=O[Y[te]+1],T[G+2]=O[Y[te]+2],j+=2,G+=3;break}}w?N.clearColor(w[0]/255,w[1]/255,w[2]/255,1):N.clearColor(0,0,0,0),N.clear(N.COLOR_BUFFER_BIT);var le=N.createBuffer();N.bindBuffer(N.ARRAY_BUFFER,le),N.bufferData(N.ARRAY_BUFFER,m,N.STATIC_DRAW),N.enableVertexAttribArray(D.positionLocation),N.vertexAttribPointer(D.positionLocation,2,N.FLOAT,!1,0,0);var ce=N.createBuffer();return N.bindBuffer(N.ARRAY_BUFFER,ce),N.bufferData(N.ARRAY_BUFFER,T,N.STATIC_DRAW),N.enableVertexAttribArray(D.colorLocation),N.vertexAttribPointer(D.colorLocation,3,N.UNSIGNED_BYTE,!1,0,0),N.uniform2f(D.scaleLocation,B.scaleX,B.scaleY),N.uniform2f(D.offsetLocation,B.offsetX,B.offsetY),N.drawArrays(N.TRIANGLES,0,a),N.flush(),N.deleteBuffer(le),N.deleteBuffer(ce),H}return{tryInitGL(){try{return y(),!!M}catch{}return!1},composeSMask:L,drawFigures:v,cleanup(){R&&R.canvas&&(R.canvas.width=0,R.canvas.height=0),s&&s.canvas&&(s.canvas.width=0,s.canvas.height=0),R=null,s=null}}}()},function(l,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationLayer=void 0;var t=r(1),i=r(2);class p{static create(a){switch(a.data.annotationType){case i.AnnotationType.LINK:return new P(a);case i.AnnotationType.TEXT:return new x(a);case i.AnnotationType.WIDGET:switch(a.data.fieldType){case"Tx":return new h(a);case"Btn":return a.data.radioButton?new M(a):a.data.checkBox?new S(a):new u(a);case"Ch":return new y(a)}return new C(a);case i.AnnotationType.POPUP:return new b(a);case i.AnnotationType.FREETEXT:return new R(a);case i.AnnotationType.LINE:return new E(a);case i.AnnotationType.SQUARE:return new L(a);case i.AnnotationType.CIRCLE:return new g(a);case i.AnnotationType.POLYLINE:return new n(a);case i.AnnotationType.CARET:return new d(a);case i.AnnotationType.INK:return new v(a);case i.AnnotationType.POLYGON:return new s(a);case i.AnnotationType.HIGHLIGHT:return new _(a);case i.AnnotationType.UNDERLINE:return new I(a);case i.AnnotationType.SQUIGGLY:return new w(a);case i.AnnotationType.STRIKEOUT:return new U(a);case i.AnnotationType.STAMP:return new B(a);case i.AnnotationType.FILEATTACHMENT:return new D(a);default:return new A(a)}}}class A{constructor(a,o=!1,c=!1){this.isRenderable=o,this.data=a.data,this.layer=a.layer,this.page=a.page,this.viewport=a.viewport,this.linkService=a.linkService,this.downloadManager=a.downloadManager,this.imageResourcesPath=a.imageResourcesPath,this.renderInteractiveForms=a.renderInteractiveForms,this.svgFactory=a.svgFactory,o&&(this.container=this._createContainer(c))}_createContainer(a=!1){const o=this.data,c=this.page,f=this.viewport,m=document.createElement("section");let T=o.rect[2]-o.rect[0],F=o.rect[3]-o.rect[1];m.setAttribute("data-annotation-id",o.id);const O=i.Util.normalizeRect([o.rect[0],c.view[3]-o.rect[1]+c.view[1],o.rect[2],c.view[3]-o.rect[3]+c.view[1]]);if(m.style.transform=`matrix(${f.transform.join(",")})`,m.style.transformOrigin=`-${O[0]}px -${O[1]}px`,!a&&o.borderStyle.width>0){m.style.borderWidth=`${o.borderStyle.width}px`,o.borderStyle.style!==i.AnnotationBorderStyleType.UNDERLINE&&(T=T-2*o.borderStyle.width,F=F-2*o.borderStyle.width);const j=o.borderStyle.horizontalCornerRadius,G=o.borderStyle.verticalCornerRadius;if(j>0||G>0){const X=`${j}px / ${G}px`;m.style.borderRadius=X}switch(o.borderStyle.style){case i.AnnotationBorderStyleType.SOLID:m.style.borderStyle="solid";break;case i.AnnotationBorderStyleType.DASHED:m.style.borderStyle="dashed";break;case i.AnnotationBorderStyleType.BEVELED:(0,i.warn)("Unimplemented border style: beveled");break;case i.AnnotationBorderStyleType.INSET:(0,i.warn)("Unimplemented border style: inset");break;case i.AnnotationBorderStyleType.UNDERLINE:m.style.borderBottomStyle="solid";break}o.color?m.style.borderColor=i.Util.makeCssRgb(o.color[0]|0,o.color[1]|0,o.color[2]|0):m.style.borderWidth=0}return m.style.left=`${O[0]}px`,m.style.top=`${O[1]}px`,m.style.width=`${T}px`,m.style.height=`${F}px`,m}_createPopup(a,o,c){o||(o=document.createElement("div"),o.style.height=a.style.height,o.style.width=a.style.width,a.appendChild(o));const m=new k({container:a,trigger:o,color:c.color,title:c.title,modificationDate:c.modificationDate,contents:c.contents,hideWrapper:!0}).render();m.style.left=a.style.width,a.appendChild(m)}render(){(0,i.unreachable)("Abstract method `AnnotationElement.render` called")}}class P extends A{constructor(a){const o=!!(a.data.url||a.data.dest||a.data.action);super(a,o)}render(){this.container.className="linkAnnotation";const{data:a,linkService:o}=this,c=document.createElement("a");return a.url?(0,t.addLinkAttributes)(c,{url:a.url,target:a.newWindow?t.LinkTarget.BLANK:o.externalLinkTarget,rel:o.externalLinkRel,enabled:o.externalLinkEnabled}):a.action?this._bindNamedAction(c,a.action):this._bindLink(c,a.dest),this.container.appendChild(c),this.container}_bindLink(a,o){a.href=this.linkService.getDestinationHash(o),a.onclick=()=>(o&&this.linkService.navigateTo(o),!1),o&&(a.className="internalLink")}_bindNamedAction(a,o){a.href=this.linkService.getAnchorUrl(""),a.onclick=()=>(this.linkService.executeNamedAction(o),!1),a.className="internalLink"}}class x extends A{constructor(a){const o=!!(a.data.hasPopup||a.data.title||a.data.contents);super(a,o)}render(){this.container.className="textAnnotation";const a=document.createElement("img");return a.style.height=this.container.style.height,a.style.width=this.container.style.width,a.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",a.alt="[{{type}} Annotation]",a.dataset.l10nId="text_annotation_type",a.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(this.container,a,this.data),this.container.appendChild(a),this.container}}class C extends A{render(){return this.container}}class h extends C{constructor(a){const o=a.renderInteractiveForms||!a.data.hasAppearance&&!!a.data.fieldValue;super(a,o)}render(){const a=["left","center","right"];this.container.className="textWidgetAnnotation";let o=null;if(this.renderInteractiveForms){if(this.data.multiLine?(o=document.createElement("textarea"),o.textContent=this.data.fieldValue):(o=document.createElement("input"),o.type="text",o.setAttribute("value",this.data.fieldValue)),o.disabled=this.data.readOnly,o.name=this.data.fieldName,this.data.maxLen!==null&&(o.maxLength=this.data.maxLen),this.data.comb){const f=(this.data.rect[2]-this.data.rect[0])/this.data.maxLen;o.classList.add("comb"),o.style.letterSpacing=`calc(${f}px - 1ch)`}}else{o=document.createElement("div"),o.textContent=this.data.fieldValue,o.style.verticalAlign="middle",o.style.display="table-cell";let c=null;this.data.fontRefName&&this.page.commonObjs.has(this.data.fontRefName)&&(c=this.page.commonObjs.get(this.data.fontRefName)),this._setTextStyle(o,c)}return this.data.textAlignment!==null&&(o.style.textAlign=a[this.data.textAlignment]),this.container.appendChild(o),this.container}_setTextStyle(a,o){const c=a.style;if(c.fontSize=`${this.data.fontSize}px`,c.direction=this.data.fontDirection<0?"rtl":"ltr",!o)return;let f="normal";o.black?f="900":o.bold&&(f="bold"),c.fontWeight=f,c.fontStyle=o.italic?"italic":"normal";const m=o.loadedName?`"${o.loadedName}", `:"",T=o.fallbackName||"Helvetica, sans-serif";c.fontFamily=m+T}}class S extends C{constructor(a){super(a,a.renderInteractiveForms)}render(){this.container.className="buttonWidgetAnnotation checkBox";const a=document.createElement("input");return a.disabled=this.data.readOnly,a.type="checkbox",a.name=this.data.fieldName,this.data.fieldValue&&this.data.fieldValue!=="Off"&&a.setAttribute("checked",!0),this.container.appendChild(a),this.container}}class M extends C{constructor(a){super(a,a.renderInteractiveForms)}render(){this.container.className="buttonWidgetAnnotation radioButton";const a=document.createElement("input");return a.disabled=this.data.readOnly,a.type="radio",a.name=this.data.fieldName,this.data.fieldValue===this.data.buttonValue&&a.setAttribute("checked",!0),this.container.appendChild(a),this.container}}class u extends P{render(){const a=super.render();return a.className="buttonWidgetAnnotation pushButton",a}}class y extends C{constructor(a){super(a,a.renderInteractiveForms)}render(){this.container.className="choiceWidgetAnnotation";const a=document.createElement("select");a.disabled=this.data.readOnly,a.name=this.data.fieldName,this.data.combo||(a.size=this.data.options.length,this.data.multiSelect&&(a.multiple=!0));for(const o of this.data.options){const c=document.createElement("option");c.textContent=o.displayValue,c.value=o.exportValue,this.data.fieldValue.includes(o.displayValue)&&c.setAttribute("selected",!0),a.appendChild(c)}return this.container.appendChild(a),this.container}}class b extends A{constructor(a){const o=!!(a.data.title||a.data.contents);super(a,o)}render(){const a=["Line","Square","Circle","PolyLine","Polygon","Ink"];if(this.container.className="popupAnnotation",a.includes(this.data.parentType))return this.container;const o=`[data-annotation-id="${this.data.parentId}"]`,c=this.layer.querySelector(o);if(!c)return this.container;const f=new k({container:this.container,trigger:c,color:this.data.color,title:this.data.title,modificationDate:this.data.modificationDate,contents:this.data.contents}),m=parseFloat(c.style.left),T=parseFloat(c.style.width);return this.container.style.transformOrigin=`-${m+T}px -${c.style.top}`,this.container.style.left=`${m+T}px`,this.container.appendChild(f.render()),this.container}}class k{constructor(a){this.container=a.container,this.trigger=a.trigger,this.color=a.color,this.title=a.title,this.modificationDate=a.modificationDate,this.contents=a.contents,this.hideWrapper=a.hideWrapper||!1,this.pinned=!1}render(){const o=document.createElement("div");o.className="popupWrapper",this.hideElement=this.hideWrapper?o:this.container,this.hideElement.setAttribute("hidden",!0);const c=document.createElement("div");c.className="popup";const f=this.color;if(f){const O=.7*(255-f[0])+f[0],j=.7*(255-f[1])+f[1],G=.7*(255-f[2])+f[2];c.style.backgroundColor=i.Util.makeCssRgb(O|0,j|0,G|0)}const m=document.createElement("h1");m.textContent=this.title,c.appendChild(m);const T=t.PDFDateString.toDateObject(this.modificationDate);if(T){const O=document.createElement("span");O.textContent="{{date}}, {{time}}",O.dataset.l10nId="annotation_date_string",O.dataset.l10nArgs=JSON.stringify({date:T.toLocaleDateString(),time:T.toLocaleTimeString()}),c.appendChild(O)}const F=this._formatContents(this.contents);return c.appendChild(F),this.trigger.addEventListener("click",this._toggle.bind(this)),this.trigger.addEventListener("mouseover",this._show.bind(this,!1)),this.trigger.addEventListener("mouseout",this._hide.bind(this,!1)),c.addEventListener("click",this._hide.bind(this,!0)),o.appendChild(c),o}_formatContents(a){const o=document.createElement("p"),c=a.split(/(?:\r\n?|\n)/);for(let f=0,m=c.length;f<m;++f){const T=c[f];o.appendChild(document.createTextNode(T)),f<m-1&&o.appendChild(document.createElement("br"))}return o}_toggle(){this.pinned?this._hide(!0):this._show(!0)}_show(a=!1){a&&(this.pinned=!0),this.hideElement.hasAttribute("hidden")&&(this.hideElement.removeAttribute("hidden"),this.container.style.zIndex+=1)}_hide(a=!0){a&&(this.pinned=!1),!this.hideElement.hasAttribute("hidden")&&!this.pinned&&(this.hideElement.setAttribute("hidden",!0),this.container.style.zIndex-=1)}}class R extends A{constructor(a){const o=!!(a.data.hasPopup||a.data.title||a.data.contents);super(a,o,!0)}render(){return this.container.className="freeTextAnnotation",this.data.hasPopup||this._createPopup(this.container,null,this.data),this.container}}class E extends A{constructor(a){const o=!!(a.data.hasPopup||a.data.title||a.data.contents);super(a,o,!0)}render(){this.container.className="lineAnnotation";const a=this.data,o=a.rect[2]-a.rect[0],c=a.rect[3]-a.rect[1],f=this.svgFactory.create(o,c),m=this.svgFactory.createElement("svg:line");return m.setAttribute("x1",a.rect[2]-a.lineCoordinates[0]),m.setAttribute("y1",a.rect[3]-a.lineCoordinates[1]),m.setAttribute("x2",a.rect[2]-a.lineCoordinates[2]),m.setAttribute("y2",a.rect[3]-a.lineCoordinates[3]),m.setAttribute("stroke-width",a.borderStyle.width||1),m.setAttribute("stroke","transparent"),f.appendChild(m),this.container.append(f),this._createPopup(this.container,m,a),this.container}}class L extends A{constructor(a){const o=!!(a.data.hasPopup||a.data.title||a.data.contents);super(a,o,!0)}render(){this.container.className="squareAnnotation";const a=this.data,o=a.rect[2]-a.rect[0],c=a.rect[3]-a.rect[1],f=this.svgFactory.create(o,c),m=a.borderStyle.width,T=this.svgFactory.createElement("svg:rect");return T.setAttribute("x",m/2),T.setAttribute("y",m/2),T.setAttribute("width",o-m),T.setAttribute("height",c-m),T.setAttribute("stroke-width",m||1),T.setAttribute("stroke","transparent"),T.setAttribute("fill","none"),f.appendChild(T),this.container.append(f),this._createPopup(this.container,T,a),this.container}}class g extends A{constructor(a){const o=!!(a.data.hasPopup||a.data.title||a.data.contents);super(a,o,!0)}render(){this.container.className="circleAnnotation";const a=this.data,o=a.rect[2]-a.rect[0],c=a.rect[3]-a.rect[1],f=this.svgFactory.create(o,c),m=a.borderStyle.width,T=this.svgFactory.createElement("svg:ellipse");return T.setAttribute("cx",o/2),T.setAttribute("cy",c/2),T.setAttribute("rx",o/2-m/2),T.setAttribute("ry",c/2-m/2),T.setAttribute("stroke-width",m||1),T.setAttribute("stroke","transparent"),T.setAttribute("fill","none"),f.appendChild(T),this.container.append(f),this._createPopup(this.container,T,a),this.container}}class n extends A{constructor(a){const o=!!(a.data.hasPopup||a.data.title||a.data.contents);super(a,o,!0),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const a=this.data,o=a.rect[2]-a.rect[0],c=a.rect[3]-a.rect[1],f=this.svgFactory.create(o,c);let m=[];for(const F of a.vertices){const O=F.x-a.rect[0],j=a.rect[3]-F.y;m.push(O+","+j)}m=m.join(" ");const T=this.svgFactory.createElement(this.svgElementName);return T.setAttribute("points",m),T.setAttribute("stroke-width",a.borderStyle.width||1),T.setAttribute("stroke","transparent"),T.setAttribute("fill","none"),f.appendChild(T),this.container.append(f),this._createPopup(this.container,T,a),this.container}}class s extends n{constructor(a){super(a),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class d extends A{constructor(a){const o=!!(a.data.hasPopup||a.data.title||a.data.contents);super(a,o,!0)}render(){return this.container.className="caretAnnotation",this.data.hasPopup||this._createPopup(this.container,null,this.data),this.container}}class v extends A{constructor(a){const o=!!(a.data.hasPopup||a.data.title||a.data.contents);super(a,o,!0),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const a=this.data,o=a.rect[2]-a.rect[0],c=a.rect[3]-a.rect[1],f=this.svgFactory.create(o,c);for(const m of a.inkLists){let T=[];for(const O of m){const j=O.x-a.rect[0],G=a.rect[3]-O.y;T.push(`${j},${G}`)}T=T.join(" ");const F=this.svgFactory.createElement(this.svgElementName);F.setAttribute("points",T),F.setAttribute("stroke-width",a.borderStyle.width||1),F.setAttribute("stroke","transparent"),F.setAttribute("fill","none"),this._createPopup(this.container,F,a),f.appendChild(F)}return this.container.append(f),this.container}}class _ extends A{constructor(a){const o=!!(a.data.hasPopup||a.data.title||a.data.contents);super(a,o,!0)}render(){return this.container.className="highlightAnnotation",this.data.hasPopup||this._createPopup(this.container,null,this.data),this.container}}class I extends A{constructor(a){const o=!!(a.data.hasPopup||a.data.title||a.data.contents);super(a,o,!0)}render(){return this.container.className="underlineAnnotation",this.data.hasPopup||this._createPopup(this.container,null,this.data),this.container}}class w extends A{constructor(a){const o=!!(a.data.hasPopup||a.data.title||a.data.contents);super(a,o,!0)}render(){return this.container.className="squigglyAnnotation",this.data.hasPopup||this._createPopup(this.container,null,this.data),this.container}}class U extends A{constructor(a){const o=!!(a.data.hasPopup||a.data.title||a.data.contents);super(a,o,!0)}render(){return this.container.className="strikeoutAnnotation",this.data.hasPopup||this._createPopup(this.container,null,this.data),this.container}}class B extends A{constructor(a){const o=!!(a.data.hasPopup||a.data.title||a.data.contents);super(a,o,!0)}render(){return this.container.className="stampAnnotation",this.data.hasPopup||this._createPopup(this.container,null,this.data),this.container}}class D extends A{constructor(a){super(a,!0);const{filename:o,content:c}=this.data.file;this.filename=(0,t.getFilenameFromUrl)(o),this.content=c,this.linkService.eventBus&&this.linkService.eventBus.dispatch("fileattachmentannotation",{source:this,id:(0,i.stringToPDFString)(o),filename:o,content:c})}render(){this.container.className="fileAttachmentAnnotation";const a=document.createElement("div");return a.style.height=this.container.style.height,a.style.width=this.container.style.width,a.addEventListener("dblclick",this._download.bind(this)),!this.data.hasPopup&&(this.data.title||this.data.contents)&&this._createPopup(this.container,a,this.data),this.container.appendChild(a),this.container}_download(){if(!this.downloadManager){(0,i.warn)("Download cannot be started due to unavailable download manager");return}this.downloadManager.downloadData(this.content,this.filename,"")}}class H{static render(a){const o=[],c=[];for(const f of a.annotations)if(!!f){if(f.annotationType===i.AnnotationType.POPUP){c.push(f);continue}o.push(f)}c.length&&o.push(...c);for(const f of o){const m=p.create({data:f,layer:a.div,page:a.page,viewport:a.viewport,linkService:a.linkService,downloadManager:a.downloadManager,imageResourcesPath:a.imageResourcesPath||"",renderInteractiveForms:a.renderInteractiveForms||!1,svgFactory:new t.DOMSVGFactory});m.isRenderable&&a.div.appendChild(m.render())}}static update(a){for(const o of a.annotations){const c=a.div.querySelector(`[data-annotation-id="${o.id}"]`);c&&(c.style.transform=`matrix(${a.viewport.transform.join(",")})`)}a.div.removeAttribute("hidden")}}e.AnnotationLayer=H},function(l,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.renderTextLayer=void 0;var t=r(2),i=function(){var A=1e5,P=/\S/;function x(R){return!P.test(R)}function C(R,E,L){var g=document.createElement("span"),n={angle:0,canvasWidth:0,isWhitespace:!1,originalTransform:null,paddingBottom:0,paddingLeft:0,paddingRight:0,paddingTop:0,scale:1};if(R._textDivs.push(g),x(E.str)){n.isWhitespace=!0,R._textDivProperties.set(g,n);return}var s=t.Util.transform(R._viewport.transform,E.transform),d=Math.atan2(s[1],s[0]),v=L[E.fontName];v.vertical&&(d+=Math.PI/2);var _=Math.sqrt(s[2]*s[2]+s[3]*s[3]),I=_;v.ascent?I=v.ascent*I:v.descent&&(I=(1+v.descent)*I);let w,U;d===0?(w=s[4],U=s[5]-I):(w=s[4]+I*Math.sin(d),U=s[5]-I*Math.cos(d)),g.style.left=`${w}px`,g.style.top=`${U}px`,g.style.fontSize=`${_}px`,g.style.fontFamily=v.fontFamily,g.textContent=E.str,R._fontInspectorEnabled&&(g.dataset.fontName=E.fontName),d!==0&&(n.angle=d*(180/Math.PI));let B=!1;if(E.str.length>1)B=!0;else if(E.transform[0]!==E.transform[3]){const f=Math.abs(E.transform[0]),m=Math.abs(E.transform[3]);f!==m&&Math.max(f,m)/Math.min(f,m)>1.5&&(B=!0)}if(B&&(v.vertical?n.canvasWidth=E.height*R._viewport.scale:n.canvasWidth=E.width*R._viewport.scale),R._textDivProperties.set(g,n),R._textContentStream&&R._layoutText(g),R._enhanceTextSelection){var D=1,H=0;d!==0&&(D=Math.cos(d),H=Math.sin(d));var N=(v.vertical?E.height:E.width)*R._viewport.scale,a=_,o,c;d!==0?(o=[D,H,-H,D,w,U],c=t.Util.getAxialAlignedBoundingBox([0,0,N,a],o)):c=[w,U,w+N,U+a],R._bounds.push({left:c[0],top:c[1],right:c[2],bottom:c[3],div:g,size:[N,a],m:o})}}function h(R){if(!R._canceled){var E=R._textDivs,L=R._capability,g=E.length;if(g>A){R._renderingDone=!0,L.resolve();return}if(!R._textContentStream)for(var n=0;n<g;n++)R._layoutText(E[n]);R._renderingDone=!0,L.resolve()}}function S(R,E,L){let g=0;for(let n=0;n<L;n++){const s=R[E++];s>0&&(g=g?Math.min(s,g):s)}return g}function M(R){for(var E=R._bounds,L=R._viewport,g=u(L.width,L.height,E),n=0;n<g.length;n++){var s=E[n].div,d=R._textDivProperties.get(s);if(d.angle===0){d.paddingLeft=E[n].left-g[n].left,d.paddingTop=E[n].top-g[n].top,d.paddingRight=g[n].right-E[n].right,d.paddingBottom=g[n].bottom-E[n].bottom,R._textDivProperties.set(s,d);continue}var v=g[n],_=E[n],I=_.m,w=I[0],U=I[1],B=[[0,0],[0,_.size[1]],[_.size[0],0],_.size],D=new Float64Array(64);B.forEach(function(N,a){var o=t.Util.applyTransform(N,I);D[a+0]=w&&(v.left-o[0])/w,D[a+4]=U&&(v.top-o[1])/U,D[a+8]=w&&(v.right-o[0])/w,D[a+12]=U&&(v.bottom-o[1])/U,D[a+16]=U&&(v.left-o[0])/-U,D[a+20]=w&&(v.top-o[1])/w,D[a+24]=U&&(v.right-o[0])/-U,D[a+28]=w&&(v.bottom-o[1])/w,D[a+32]=w&&(v.left-o[0])/-w,D[a+36]=U&&(v.top-o[1])/-U,D[a+40]=w&&(v.right-o[0])/-w,D[a+44]=U&&(v.bottom-o[1])/-U,D[a+48]=U&&(v.left-o[0])/U,D[a+52]=w&&(v.top-o[1])/-w,D[a+56]=U&&(v.right-o[0])/U,D[a+60]=w&&(v.bottom-o[1])/-w});var H=1+Math.min(Math.abs(w),Math.abs(U));d.paddingLeft=S(D,32,16)/H,d.paddingTop=S(D,48,16)/H,d.paddingRight=S(D,0,16)/H,d.paddingBottom=S(D,16,16)/H,R._textDivProperties.set(s,d)}}function u(R,E,L){var g=L.map(function(s,d){return{x1:s.left,y1:s.top,x2:s.right,y2:s.bottom,index:d,x1New:void 0,x2New:void 0}});y(R,g);var n=new Array(L.length);return g.forEach(function(s){var d=s.index;n[d]={left:s.x1New,top:0,right:s.x2New,bottom:0}}),L.map(function(s,d){var v=n[d],_=g[d];_.x1=s.top,_.y1=R-v.right,_.x2=s.bottom,_.y2=R-v.left,_.index=d,_.x1New=void 0,_.x2New=void 0}),y(E,g),g.forEach(function(s){var d=s.index;n[d].top=s.x1New,n[d].bottom=s.x2New}),n}function y(R,E){E.sort(function(n,s){return n.x1-s.x1||n.index-s.index});var L={x1:-1/0,y1:-1/0,x2:0,y2:1/0,index:-1,x1New:0,x2New:0},g=[{start:-1/0,end:1/0,boundary:L}];E.forEach(function(n){for(var s=0;s<g.length&&g[s].end<=n.y1;)s++;for(var d=g.length-1;d>=0&&g[d].start>=n.y2;)d--;var v,_,I,w,U=-1/0;for(I=s;I<=d;I++){v=g[I],_=v.boundary;var B;_.x2>n.x1?B=_.index>n.index?_.x1New:n.x1:_.x2New===void 0?B=(_.x2+n.x1)/2:B=_.x2New,B>U&&(U=B)}for(n.x1New=U,I=s;I<=d;I++)v=g[I],_=v.boundary,_.x2New===void 0?_.x2>n.x1?_.index>n.index&&(_.x2New=_.x2):_.x2New=U:_.x2New>U&&(_.x2New=Math.max(U,_.x2));var D=[],H=null;for(I=s;I<=d;I++){v=g[I],_=v.boundary;var N=_.x2>n.x2?_:n;H===N?D[D.length-1].end=v.end:(D.push({start:v.start,end:v.end,boundary:N}),H=N)}for(g[s].start<n.y1&&(D[0].start=n.y1,D.unshift({start:g[s].start,end:n.y1,boundary:g[s].boundary})),n.y2<g[d].end&&(D[D.length-1].end=n.y2,D.push({start:n.y2,end:g[d].end,boundary:g[d].boundary})),I=s;I<=d;I++)if(v=g[I],_=v.boundary,_.x2New===void 0){var a=!1;for(w=s-1;!a&&w>=0&&g[w].start>=_.y1;w--)a=g[w].boundary===_;for(w=d+1;!a&&w<g.length&&g[w].end<=_.y2;w++)a=g[w].boundary===_;for(w=0;!a&&w<D.length;w++)a=D[w].boundary===_;a||(_.x2New=U)}Array.prototype.splice.apply(g,[s,d-s+1].concat(D))}),g.forEach(function(n){var s=n.boundary;s.x2New===void 0&&(s.x2New=Math.max(R,s.x2))})}function b({textContent:R,textContentStream:E,container:L,viewport:g,textDivs:n,textContentItemsStr:s,enhanceTextSelection:d}){this._textContent=R,this._textContentStream=E,this._container=L,this._viewport=g,this._textDivs=n||[],this._textContentItemsStr=s||[],this._enhanceTextSelection=!!d,this._fontInspectorEnabled=!!(globalThis.FontInspector&&globalThis.FontInspector.enabled),this._reader=null,this._layoutTextLastFontSize=null,this._layoutTextLastFontFamily=null,this._layoutTextCtx=null,this._textDivProperties=new WeakMap,this._renderingDone=!1,this._canceled=!1,this._capability=(0,t.createPromiseCapability)(),this._renderTimer=null,this._bounds=[],this._capability.promise.finally(()=>{this._layoutTextCtx&&(this._layoutTextCtx.canvas.width=0,this._layoutTextCtx.canvas.height=0,this._layoutTextCtx=null)}).catch(()=>{})}b.prototype={get promise(){return this._capability.promise},cancel:function(){this._canceled=!0,this._reader&&(this._reader.cancel(new t.AbortException("TextLayer task cancelled.")),this._reader=null),this._renderTimer!==null&&(clearTimeout(this._renderTimer),this._renderTimer=null),this._capability.reject(new Error("TextLayer task cancelled."))},_processItems(R,E){for(let L=0,g=R.length;L<g;L++)this._textContentItemsStr.push(R[L].str),C(this,R[L],E)},_layoutText(R){const E=this._textDivProperties.get(R);if(E.isWhitespace)return;let L="";if(E.canvasWidth!==0){const{fontSize:g,fontFamily:n}=R.style;(g!==this._layoutTextLastFontSize||n!==this._layoutTextLastFontFamily)&&(this._layoutTextCtx.font=`${g} ${n}`,this._layoutTextLastFontSize=g,this._layoutTextLastFontFamily=n);const{width:s}=this._layoutTextCtx.measureText(R.textContent);s>0&&(E.scale=E.canvasWidth/s,L=`scaleX(${E.scale})`)}E.angle!==0&&(L=`rotate(${E.angle}deg) ${L}`),L.length>0&&(this._enhanceTextSelection&&(E.originalTransform=L),R.style.transform=L),this._textDivProperties.set(R,E),this._container.appendChild(R)},_render:function(E){const L=(0,t.createPromiseCapability)();let g=Object.create(null);const n=document.createElement("canvas");if(n.mozOpaque=!0,this._layoutTextCtx=n.getContext("2d",{alpha:!1}),this._textContent){const s=this._textContent.items,d=this._textContent.styles;this._processItems(s,d),L.resolve()}else if(this._textContentStream){const s=()=>{this._reader.read().then(({value:d,done:v})=>{if(v){L.resolve();return}Object.assign(g,d.styles),this._processItems(d.items,g),s()},L.reject)};this._reader=this._textContentStream.getReader(),s()}else throw new Error('Neither "textContent" nor "textContentStream" parameters specified.');L.promise.then(()=>{g=null,E?this._renderTimer=setTimeout(()=>{h(this),this._renderTimer=null},E):h(this)},this._capability.reject)},expandTextDivs:function(E){if(!this._enhanceTextSelection||!this._renderingDone)return;this._bounds!==null&&(M(this),this._bounds=null);const L=[],g=[];for(var n=0,s=this._textDivs.length;n<s;n++){const d=this._textDivs[n],v=this._textDivProperties.get(d);v.isWhitespace||(E?(L.length=0,g.length=0,v.originalTransform&&L.push(v.originalTransform),v.paddingTop>0?(g.push(`${v.paddingTop}px`),L.push(`translateY(${-v.paddingTop}px)`)):g.push(0),v.paddingRight>0?g.push(`${v.paddingRight/v.scale}px`):g.push(0),v.paddingBottom>0?g.push(`${v.paddingBottom}px`):g.push(0),v.paddingLeft>0?(g.push(`${v.paddingLeft/v.scale}px`),L.push(`translateX(${-v.paddingLeft/v.scale}px)`)):g.push(0),d.style.padding=g.join(" "),L.length&&(d.style.transform=L.join(" "))):(d.style.padding=null,d.style.transform=v.originalTransform))}}};function k(R){var E=new b({textContent:R.textContent,textContentStream:R.textContentStream,container:R.container,viewport:R.viewport,textDivs:R.textDivs,textContentItemsStr:R.textContentItemsStr,enhanceTextSelection:R.enhanceTextSelection});return E._render(R.timeout),E}return k}();e.renderTextLayer=i},function(l,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.SVGGraphics=void 0;var t=r(2),i=r(1),p=r(4);let A=function(){throw new Error("Not implemented: SVGGraphics")};e.SVGGraphics=A;{let y=function(g){let n=[];const s=[];for(const d of g){if(d.fn==="save"){n.push({fnId:92,fn:"group",items:[]}),s.push(n),n=n[n.length-1].items;continue}d.fn==="restore"?n=s.pop():n.push(d)}return n},b=function(g){if(Number.isInteger(g))return g.toString();const n=g.toFixed(10);let s=n.length-1;if(n[s]!=="0")return n;do s--;while(n[s]==="0");return n.substring(0,n[s]==="."?s:s+1)},k=function(g){if(g[4]===0&&g[5]===0){if(g[1]===0&&g[2]===0)return g[0]===1&&g[3]===1?"":`scale(${b(g[0])} ${b(g[3])})`;if(g[0]===g[3]&&g[1]===-g[2]){const n=Math.acos(g[0])*180/Math.PI;return`rotate(${b(n)})`}}else if(g[0]===1&&g[1]===0&&g[2]===0&&g[3]===1)return`translate(${b(g[4])} ${b(g[5])})`;return`matrix(${b(g[0])} ${b(g[1])} ${b(g[2])} ${b(g[3])} ${b(g[4])} ${b(g[5])})`};const P={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},x="http://www.w3.org/XML/1998/namespace",C="http://www.w3.org/1999/xlink",h=["butt","round","square"],S=["miter","round","bevel"],M=function(){const g=new Uint8Array([137,80,78,71,13,10,26,10]),n=12,s=new Int32Array(256);for(let B=0;B<256;B++){let D=B;for(let H=0;H<8;H++)D&1?D=3988292384^D>>1&2147483647:D=D>>1&2147483647;s[B]=D}function d(B,D,H){let N=-1;for(let a=D;a<H;a++){const o=(N^B[a])&255,c=s[o];N=N>>>8^c}return N^-1}function v(B,D,H,N){let a=N;const o=D.length;H[a]=o>>24&255,H[a+1]=o>>16&255,H[a+2]=o>>8&255,H[a+3]=o&255,a+=4,H[a]=B.charCodeAt(0)&255,H[a+1]=B.charCodeAt(1)&255,H[a+2]=B.charCodeAt(2)&255,H[a+3]=B.charCodeAt(3)&255,a+=4,H.set(D,a),a+=D.length;const c=d(H,N+4,a);H[a]=c>>24&255,H[a+1]=c>>16&255,H[a+2]=c>>8&255,H[a+3]=c&255}function _(B,D,H){let N=1,a=0;for(let o=D;o<H;++o)N=(N+(B[o]&255))%65521,a=(a+N)%65521;return a<<16|N}function I(B){if(!p.isNodeJS)return w(B);try{let D;parseInt(process.versions.node)>=8?D=B:D=Buffer.from(B);const H=require$$4.deflateSync(D,{level:9});return H instanceof Uint8Array?H:new Uint8Array(H)}catch(D){(0,t.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+D)}return w(B)}function w(B){let D=B.length;const H=65535,N=Math.ceil(D/H),a=new Uint8Array(2+D+N*5+4);let o=0;a[o++]=120,a[o++]=156;let c=0;for(;D>H;)a[o++]=0,a[o++]=255,a[o++]=255,a[o++]=0,a[o++]=0,a.set(B.subarray(c,c+H),o),o+=H,c+=H,D-=H;a[o++]=1,a[o++]=D&255,a[o++]=D>>8&255,a[o++]=~D&65535&255,a[o++]=(~D&65535)>>8&255,a.set(B.subarray(c),o),o+=B.length-c;const f=_(B,0,B.length);return a[o++]=f>>24&255,a[o++]=f>>16&255,a[o++]=f>>8&255,a[o++]=f&255,a}function U(B,D,H,N){const a=B.width,o=B.height;let c,f,m;const T=B.data;switch(D){case t.ImageKind.GRAYSCALE_1BPP:f=0,c=1,m=a+7>>3;break;case t.ImageKind.RGB_24BPP:f=2,c=8,m=a*3;break;case t.ImageKind.RGBA_32BPP:f=6,c=8,m=a*4;break;default:throw new Error("invalid format")}const F=new Uint8Array((1+m)*o);let O=0,j=0;for(let Q=0;Q<o;++Q)F[O++]=0,F.set(T.subarray(j,j+m),O),j+=m,O+=m;if(D===t.ImageKind.GRAYSCALE_1BPP&&N){O=0;for(let Q=0;Q<o;Q++){O++;for(let K=0;K<m;K++)F[O++]^=255}}const G=new Uint8Array([a>>24&255,a>>16&255,a>>8&255,a&255,o>>24&255,o>>16&255,o>>8&255,o&255,c,f,0,0,0]),X=I(F),$=g.length+n*3+G.length+X.length,Y=new Uint8Array($);let V=0;return Y.set(g,V),V+=g.length,v("IHDR",G,Y,V),V+=n+G.length,v("IDATA",X,Y,V),V+=n+X.length,v("IEND",new Uint8Array(0),Y,V),(0,t.createObjectURL)(Y,"image/png",H)}return function(D,H,N){const a=D.kind===void 0?t.ImageKind.GRAYSCALE_1BPP:D.kind;return U(D,a,H,N)}}();class u{constructor(){this.fontSizeScale=1,this.fontWeight=P.fontWeight,this.fontSize=0,this.textMatrix=t.IDENTITY_MATRIX,this.fontMatrix=t.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=t.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=P.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(n,s){this.x=n,this.y=s}}let R=0,E=0,L=0;e.SVGGraphics=A=class{constructor(n,s,d=!1){this.svgFactory=new i.DOMSVGFactory,this.current=new u,this.transformMatrix=t.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=n,this.objs=s,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!d,this._operatorIdMapping=[];for(const v in t.OPS)this._operatorIdMapping[t.OPS[v]]=v}save(){this.transformStack.push(this.transformMatrix);const n=this.current;this.extraStack.push(n),this.current=n.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(n){this.save(),this.executeOpTree(n),this.restore()}loadDependencies(n){const s=n.fnArray,d=n.argsArray;for(let v=0,_=s.length;v<_;v++)if(s[v]===t.OPS.dependency)for(const I of d[v]){const w=I.startsWith("g_")?this.commonObjs:this.objs,U=new Promise(B=>{w.get(I,B)});this.current.dependencies.push(U)}return Promise.all(this.current.dependencies)}transform(n,s,d,v,_,I){const w=[n,s,d,v,_,I];this.transformMatrix=t.Util.transform(this.transformMatrix,w),this.tgrp=null}getSVG(n,s){this.viewport=s;const d=this._initialize(s);return this.loadDependencies(n).then(()=>(this.transformMatrix=t.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(n)),d))}convertOpList(n){const s=this._operatorIdMapping,d=n.argsArray,v=n.fnArray,_=[];for(let I=0,w=v.length;I<w;I++){const U=v[I];_.push({fnId:U,fn:s[U],args:d[I]})}return y(_)}executeOpTree(n){for(const s of n){const d=s.fn,v=s.fnId,_=s.args;switch(v|0){case t.OPS.beginText:this.beginText();break;case t.OPS.dependency:break;case t.OPS.setLeading:this.setLeading(_);break;case t.OPS.setLeadingMoveText:this.setLeadingMoveText(_[0],_[1]);break;case t.OPS.setFont:this.setFont(_);break;case t.OPS.showText:this.showText(_[0]);break;case t.OPS.showSpacedText:this.showText(_[0]);break;case t.OPS.endText:this.endText();break;case t.OPS.moveText:this.moveText(_[0],_[1]);break;case t.OPS.setCharSpacing:this.setCharSpacing(_[0]);break;case t.OPS.setWordSpacing:this.setWordSpacing(_[0]);break;case t.OPS.setHScale:this.setHScale(_[0]);break;case t.OPS.setTextMatrix:this.setTextMatrix(_[0],_[1],_[2],_[3],_[4],_[5]);break;case t.OPS.setTextRise:this.setTextRise(_[0]);break;case t.OPS.setTextRenderingMode:this.setTextRenderingMode(_[0]);break;case t.OPS.setLineWidth:this.setLineWidth(_[0]);break;case t.OPS.setLineJoin:this.setLineJoin(_[0]);break;case t.OPS.setLineCap:this.setLineCap(_[0]);break;case t.OPS.setMiterLimit:this.setMiterLimit(_[0]);break;case t.OPS.setFillRGBColor:this.setFillRGBColor(_[0],_[1],_[2]);break;case t.OPS.setStrokeRGBColor:this.setStrokeRGBColor(_[0],_[1],_[2]);break;case t.OPS.setStrokeColorN:this.setStrokeColorN(_);break;case t.OPS.setFillColorN:this.setFillColorN(_);break;case t.OPS.shadingFill:this.shadingFill(_[0]);break;case t.OPS.setDash:this.setDash(_[0],_[1]);break;case t.OPS.setRenderingIntent:this.setRenderingIntent(_[0]);break;case t.OPS.setFlatness:this.setFlatness(_[0]);break;case t.OPS.setGState:this.setGState(_[0]);break;case t.OPS.fill:this.fill();break;case t.OPS.eoFill:this.eoFill();break;case t.OPS.stroke:this.stroke();break;case t.OPS.fillStroke:this.fillStroke();break;case t.OPS.eoFillStroke:this.eoFillStroke();break;case t.OPS.clip:this.clip("nonzero");break;case t.OPS.eoClip:this.clip("evenodd");break;case t.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case t.OPS.paintImageXObject:this.paintImageXObject(_[0]);break;case t.OPS.paintInlineImageXObject:this.paintInlineImageXObject(_[0]);break;case t.OPS.paintImageMaskXObject:this.paintImageMaskXObject(_[0]);break;case t.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(_[0],_[1]);break;case t.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case t.OPS.closePath:this.closePath();break;case t.OPS.closeStroke:this.closeStroke();break;case t.OPS.closeFillStroke:this.closeFillStroke();break;case t.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case t.OPS.nextLine:this.nextLine();break;case t.OPS.transform:this.transform(_[0],_[1],_[2],_[3],_[4],_[5]);break;case t.OPS.constructPath:this.constructPath(_[0],_[1]);break;case t.OPS.endPath:this.endPath();break;case 92:this.group(s.items);break;default:(0,t.warn)(`Unimplemented operator ${d}`);break}}}setWordSpacing(n){this.current.wordSpacing=n}setCharSpacing(n){this.current.charSpacing=n}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(n,s,d,v,_,I){const w=this.current;w.textMatrix=w.lineMatrix=[n,s,d,v,_,I],w.textMatrixScale=Math.sqrt(n*n+s*s),w.x=w.lineX=0,w.y=w.lineY=0,w.xcoords=[],w.ycoords=[],w.tspan=this.svgFactory.createElement("svg:tspan"),w.tspan.setAttributeNS(null,"font-family",w.fontFamily),w.tspan.setAttributeNS(null,"font-size",`${b(w.fontSize)}px`),w.tspan.setAttributeNS(null,"y",b(-w.y)),w.txtElement=this.svgFactory.createElement("svg:text"),w.txtElement.appendChild(w.tspan)}beginText(){const n=this.current;n.x=n.lineX=0,n.y=n.lineY=0,n.textMatrix=t.IDENTITY_MATRIX,n.lineMatrix=t.IDENTITY_MATRIX,n.textMatrixScale=1,n.tspan=this.svgFactory.createElement("svg:tspan"),n.txtElement=this.svgFactory.createElement("svg:text"),n.txtgrp=this.svgFactory.createElement("svg:g"),n.xcoords=[],n.ycoords=[]}moveText(n,s){const d=this.current;d.x=d.lineX+=n,d.y=d.lineY+=s,d.xcoords=[],d.ycoords=[],d.tspan=this.svgFactory.createElement("svg:tspan"),d.tspan.setAttributeNS(null,"font-family",d.fontFamily),d.tspan.setAttributeNS(null,"font-size",`${b(d.fontSize)}px`),d.tspan.setAttributeNS(null,"y",b(-d.y))}showText(n){const s=this.current,d=s.font,v=s.fontSize;if(v===0)return;const _=s.fontSizeScale,I=s.charSpacing,w=s.wordSpacing,U=s.fontDirection,B=s.textHScale*U,D=d.vertical,H=D?1:-1,N=d.defaultVMetrics,a=v*s.fontMatrix[0];let o=0;for(const m of n){if(m===null){o+=U*w;continue}else if((0,t.isNum)(m)){o+=H*m*v/1e3;continue}const T=(m.isSpace?w:0)+I,F=m.fontChar;let O,j,G=m.width;if(D){let $;const Y=m.vmetric||N;$=m.vmetric?Y[1]:G*.5,$=-$*a;const V=Y[2]*a;G=Y?-Y[0]:G,O=$/_,j=(o+V)/_}else O=o/_,j=0;(m.isInFont||d.missingFile)&&(s.xcoords.push(s.x+O),D&&s.ycoords.push(-s.y+j),s.tspan.textContent+=F);let X;D?X=G*a-T*U:X=G*a+T*U,o+=X}s.tspan.setAttributeNS(null,"x",s.xcoords.map(b).join(" ")),D?s.tspan.setAttributeNS(null,"y",s.ycoords.map(b).join(" ")):s.tspan.setAttributeNS(null,"y",b(-s.y)),D?s.y-=o:s.x+=o*B,s.tspan.setAttributeNS(null,"font-family",s.fontFamily),s.tspan.setAttributeNS(null,"font-size",`${b(s.fontSize)}px`),s.fontStyle!==P.fontStyle&&s.tspan.setAttributeNS(null,"font-style",s.fontStyle),s.fontWeight!==P.fontWeight&&s.tspan.setAttributeNS(null,"font-weight",s.fontWeight);const c=s.textRenderingMode&t.TextRenderingMode.FILL_STROKE_MASK;if(c===t.TextRenderingMode.FILL||c===t.TextRenderingMode.FILL_STROKE?(s.fillColor!==P.fillColor&&s.tspan.setAttributeNS(null,"fill",s.fillColor),s.fillAlpha<1&&s.tspan.setAttributeNS(null,"fill-opacity",s.fillAlpha)):s.textRenderingMode===t.TextRenderingMode.ADD_TO_PATH?s.tspan.setAttributeNS(null,"fill","transparent"):s.tspan.setAttributeNS(null,"fill","none"),c===t.TextRenderingMode.STROKE||c===t.TextRenderingMode.FILL_STROKE){const m=1/(s.textMatrixScale||1);this._setStrokeAttributes(s.tspan,m)}let f=s.textMatrix;s.textRise!==0&&(f=f.slice(),f[5]+=s.textRise),s.txtElement.setAttributeNS(null,"transform",`${k(f)} scale(${b(B)}, -1)`),s.txtElement.setAttributeNS(x,"xml:space","preserve"),s.txtElement.appendChild(s.tspan),s.txtgrp.appendChild(s.txtElement),this._ensureTransformGroup().appendChild(s.txtElement)}setLeadingMoveText(n,s){this.setLeading(-s),this.moveText(n,s)}addFontStyle(n){if(!n.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.appendChild(this.cssStyle));const s=(0,t.createObjectURL)(n.data,n.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${n.loadedName}"; src: url(${s}); }
`}setFont(n){const s=this.current,d=this.commonObjs.get(n[0]);let v=n[1];s.font=d,this.embedFonts&&!d.missingFile&&!this.embeddedFonts[d.loadedName]&&(this.addFontStyle(d),this.embeddedFonts[d.loadedName]=d),s.fontMatrix=d.fontMatrix?d.fontMatrix:t.FONT_IDENTITY_MATRIX;let _="normal";d.black?_="900":d.bold&&(_="bold");const I=d.italic?"italic":"normal";v<0?(v=-v,s.fontDirection=-1):s.fontDirection=1,s.fontSize=v,s.fontFamily=d.loadedName,s.fontWeight=_,s.fontStyle=I,s.tspan=this.svgFactory.createElement("svg:tspan"),s.tspan.setAttributeNS(null,"y",b(-s.y)),s.xcoords=[],s.ycoords=[]}endText(){const n=this.current;n.textRenderingMode&t.TextRenderingMode.ADD_TO_PATH_FLAG&&n.txtElement&&n.txtElement.hasChildNodes()&&(n.element=n.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(n){n>0&&(this.current.lineWidth=n)}setLineCap(n){this.current.lineCap=h[n]}setLineJoin(n){this.current.lineJoin=S[n]}setMiterLimit(n){this.current.miterLimit=n}setStrokeAlpha(n){this.current.strokeAlpha=n}setStrokeRGBColor(n,s,d){this.current.strokeColor=t.Util.makeCssRgb(n,s,d)}setFillAlpha(n){this.current.fillAlpha=n}setFillRGBColor(n,s,d){this.current.fillColor=t.Util.makeCssRgb(n,s,d),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(n){this.current.strokeColor=this._makeColorN_Pattern(n)}setFillColorN(n){this.current.fillColor=this._makeColorN_Pattern(n)}shadingFill(n){const s=this.viewport.width,d=this.viewport.height,v=t.Util.inverseTransform(this.transformMatrix),_=t.Util.applyTransform([0,0],v),I=t.Util.applyTransform([0,d],v),w=t.Util.applyTransform([s,0],v),U=t.Util.applyTransform([s,d],v),B=Math.min(_[0],I[0],w[0],U[0]),D=Math.min(_[1],I[1],w[1],U[1]),H=Math.max(_[0],I[0],w[0],U[0]),N=Math.max(_[1],I[1],w[1],U[1]),a=this.svgFactory.createElement("svg:rect");a.setAttributeNS(null,"x",B),a.setAttributeNS(null,"y",D),a.setAttributeNS(null,"width",H-B),a.setAttributeNS(null,"height",N-D),a.setAttributeNS(null,"fill",this._makeShadingPattern(n)),this.current.fillAlpha<1&&a.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().appendChild(a)}_makeColorN_Pattern(n){return n[0]==="TilingPattern"?this._makeTilingPattern(n):this._makeShadingPattern(n)}_makeTilingPattern(n){const s=n[1],d=n[2],v=n[3]||t.IDENTITY_MATRIX,[_,I,w,U]=n[4],B=n[5],D=n[6],H=n[7],N=`shading${L++}`,[a,o]=t.Util.applyTransform([_,I],v),[c,f]=t.Util.applyTransform([w,U],v),[m,T]=t.Util.singularValueDecompose2dScale(v),F=B*m,O=D*T,j=this.svgFactory.createElement("svg:pattern");j.setAttributeNS(null,"id",N),j.setAttributeNS(null,"patternUnits","userSpaceOnUse"),j.setAttributeNS(null,"width",F),j.setAttributeNS(null,"height",O),j.setAttributeNS(null,"x",`${a}`),j.setAttributeNS(null,"y",`${o}`);const G=this.svg,X=this.transformMatrix,$=this.current.fillColor,Y=this.current.strokeColor,V=this.svgFactory.create(c-a,f-o);if(this.svg=V,this.transformMatrix=v,H===2){const Q=t.Util.makeCssRgb(...s);this.current.fillColor=Q,this.current.strokeColor=Q}return this.executeOpTree(this.convertOpList(d)),this.svg=G,this.transformMatrix=X,this.current.fillColor=$,this.current.strokeColor=Y,j.appendChild(V.childNodes[0]),this.defs.appendChild(j),`url(#${N})`}_makeShadingPattern(n){switch(n[0]){case"RadialAxial":const s=`shading${L++}`,d=n[3];let v;switch(n[1]){case"axial":const _=n[4],I=n[5];v=this.svgFactory.createElement("svg:linearGradient"),v.setAttributeNS(null,"id",s),v.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),v.setAttributeNS(null,"x1",_[0]),v.setAttributeNS(null,"y1",_[1]),v.setAttributeNS(null,"x2",I[0]),v.setAttributeNS(null,"y2",I[1]);break;case"radial":const w=n[4],U=n[5],B=n[6],D=n[7];v=this.svgFactory.createElement("svg:radialGradient"),v.setAttributeNS(null,"id",s),v.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),v.setAttributeNS(null,"cx",U[0]),v.setAttributeNS(null,"cy",U[1]),v.setAttributeNS(null,"r",D),v.setAttributeNS(null,"fx",w[0]),v.setAttributeNS(null,"fy",w[1]),v.setAttributeNS(null,"fr",B);break;default:throw new Error(`Unknown RadialAxial type: ${n[1]}`)}for(const _ of d){const I=this.svgFactory.createElement("svg:stop");I.setAttributeNS(null,"offset",_[0]),I.setAttributeNS(null,"stop-color",_[1]),v.appendChild(I)}return this.defs.appendChild(v),`url(#${s})`;case"Mesh":return(0,t.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${n[0]}`)}}setDash(n,s){this.current.dashArray=n,this.current.dashPhase=s}constructPath(n,s){const d=this.current;let v=d.x,_=d.y,I=[],w=0;for(const U of n)switch(U|0){case t.OPS.rectangle:v=s[w++],_=s[w++];const B=s[w++],D=s[w++],H=v+B,N=_+D;I.push("M",b(v),b(_),"L",b(H),b(_),"L",b(H),b(N),"L",b(v),b(N),"Z");break;case t.OPS.moveTo:v=s[w++],_=s[w++],I.push("M",b(v),b(_));break;case t.OPS.lineTo:v=s[w++],_=s[w++],I.push("L",b(v),b(_));break;case t.OPS.curveTo:v=s[w+4],_=s[w+5],I.push("C",b(s[w]),b(s[w+1]),b(s[w+2]),b(s[w+3]),b(v),b(_)),w+=6;break;case t.OPS.curveTo2:I.push("C",b(v),b(_),b(s[w]),b(s[w+1]),b(s[w+2]),b(s[w+3])),v=s[w+2],_=s[w+3],w+=4;break;case t.OPS.curveTo3:v=s[w+2],_=s[w+3],I.push("C",b(s[w]),b(s[w+1]),b(v),b(_),b(v),b(_)),w+=4;break;case t.OPS.closePath:I.push("Z");break}I=I.join(" "),d.path&&n.length>0&&n[0]!==t.OPS.rectangle&&n[0]!==t.OPS.moveTo?I=d.path.getAttributeNS(null,"d")+I:(d.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().appendChild(d.path)),d.path.setAttributeNS(null,"d",I),d.path.setAttributeNS(null,"fill","none"),d.element=d.path,d.setCurrentPoint(v,_)}endPath(){const n=this.current;if(n.path=null,!this.pendingClip)return;if(!n.element){this.pendingClip=null;return}const s=`clippath${R++}`,d=this.svgFactory.createElement("svg:clipPath");d.setAttributeNS(null,"id",s),d.setAttributeNS(null,"transform",k(this.transformMatrix));const v=n.element.cloneNode(!0);this.pendingClip==="evenodd"?v.setAttributeNS(null,"clip-rule","evenodd"):v.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,d.appendChild(v),this.defs.appendChild(d),n.activeClipUrl&&(n.clipGroup=null,this.extraStack.forEach(function(_){_.clipGroup=null}),d.setAttributeNS(null,"clip-path",n.activeClipUrl)),n.activeClipUrl=`url(#${s})`,this.tgrp=null}clip(n){this.pendingClip=n}closePath(){const n=this.current;if(n.path){const s=`${n.path.getAttributeNS(null,"d")}Z`;n.path.setAttributeNS(null,"d",s)}}setLeading(n){this.current.leading=-n}setTextRise(n){this.current.textRise=n}setTextRenderingMode(n){this.current.textRenderingMode=n}setHScale(n){this.current.textHScale=n/100}setRenderingIntent(n){}setFlatness(n){}setGState(n){for(const[s,d]of n)switch(s){case"LW":this.setLineWidth(d);break;case"LC":this.setLineCap(d);break;case"LJ":this.setLineJoin(d);break;case"ML":this.setMiterLimit(d);break;case"D":this.setDash(d[0],d[1]);break;case"RI":this.setRenderingIntent(d);break;case"FL":this.setFlatness(d);break;case"Font":this.setFont(d);break;case"CA":this.setStrokeAlpha(d);break;case"ca":this.setFillAlpha(d);break;default:(0,t.warn)(`Unimplemented graphic state operator ${s}`);break}}fill(){const n=this.current;n.element&&(n.element.setAttributeNS(null,"fill",n.fillColor),n.element.setAttributeNS(null,"fill-opacity",n.fillAlpha),this.endPath())}stroke(){const n=this.current;n.element&&(this._setStrokeAttributes(n.element),n.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(n,s=1){const d=this.current;let v=d.dashArray;s!==1&&v.length>0&&(v=v.map(function(_){return s*_})),n.setAttributeNS(null,"stroke",d.strokeColor),n.setAttributeNS(null,"stroke-opacity",d.strokeAlpha),n.setAttributeNS(null,"stroke-miterlimit",b(d.miterLimit)),n.setAttributeNS(null,"stroke-linecap",d.lineCap),n.setAttributeNS(null,"stroke-linejoin",d.lineJoin),n.setAttributeNS(null,"stroke-width",b(s*d.lineWidth)+"px"),n.setAttributeNS(null,"stroke-dasharray",v.map(b).join(" ")),n.setAttributeNS(null,"stroke-dashoffset",b(s*d.dashPhase)+"px")}eoFill(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const n=this.svgFactory.createElement("svg:rect");n.setAttributeNS(null,"x","0"),n.setAttributeNS(null,"y","0"),n.setAttributeNS(null,"width","1px"),n.setAttributeNS(null,"height","1px"),n.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().appendChild(n)}paintImageXObject(n){const s=this.objs.get(n);if(!s){(0,t.warn)(`Dependent image with object ID ${n} is not ready yet`);return}this.paintInlineImageXObject(s)}paintInlineImageXObject(n,s){const d=n.width,v=n.height,_=M(n,this.forceDataSchema,!!s),I=this.svgFactory.createElement("svg:rect");I.setAttributeNS(null,"x","0"),I.setAttributeNS(null,"y","0"),I.setAttributeNS(null,"width",b(d)),I.setAttributeNS(null,"height",b(v)),this.current.element=I,this.clip("nonzero");const w=this.svgFactory.createElement("svg:image");w.setAttributeNS(C,"xlink:href",_),w.setAttributeNS(null,"x","0"),w.setAttributeNS(null,"y",b(-v)),w.setAttributeNS(null,"width",b(d)+"px"),w.setAttributeNS(null,"height",b(v)+"px"),w.setAttributeNS(null,"transform",`scale(${b(1/d)} ${b(-1/v)})`),s?s.appendChild(w):this._ensureTransformGroup().appendChild(w)}paintImageMaskXObject(n){const s=this.current,d=n.width,v=n.height,_=s.fillColor;s.maskId=`mask${E++}`;const I=this.svgFactory.createElement("svg:mask");I.setAttributeNS(null,"id",s.maskId);const w=this.svgFactory.createElement("svg:rect");w.setAttributeNS(null,"x","0"),w.setAttributeNS(null,"y","0"),w.setAttributeNS(null,"width",b(d)),w.setAttributeNS(null,"height",b(v)),w.setAttributeNS(null,"fill",_),w.setAttributeNS(null,"mask",`url(#${s.maskId})`),this.defs.appendChild(I),this._ensureTransformGroup().appendChild(w),this.paintInlineImageXObject(n,I)}paintFormXObjectBegin(n,s){if(Array.isArray(n)&&n.length===6&&this.transform(n[0],n[1],n[2],n[3],n[4],n[5]),s){const d=s[2]-s[0],v=s[3]-s[1],_=this.svgFactory.createElement("svg:rect");_.setAttributeNS(null,"x",s[0]),_.setAttributeNS(null,"y",s[1]),_.setAttributeNS(null,"width",b(d)),_.setAttributeNS(null,"height",b(v)),this.current.element=_,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(n){const s=this.svgFactory.create(n.width,n.height),d=this.svgFactory.createElement("svg:defs");s.appendChild(d),this.defs=d;const v=this.svgFactory.createElement("svg:g");return v.setAttributeNS(null,"transform",k(n.transform)),s.appendChild(v),this.svg=v,s}_ensureClipGroup(){if(!this.current.clipGroup){const n=this.svgFactory.createElement("svg:g");n.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.appendChild(n),this.current.clipGroup=n}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",k(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().appendChild(this.tgrp):this.svg.appendChild(this.tgrp)),this.tgrp}}}},function(l,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.PDFNodeStream=void 0;var t=r(2),i=r(20);const p=require$$4,A=require$$4,P=require$$4,x=require$$4,C=/^file:\/\/\/[a-zA-Z]:\//;function h(L){const g=x.parse(L);return g.protocol==="file:"||g.host?g:/^[a-z]:[/\\]/i.test(L)?x.parse(`file:///${L}`):(g.host||(g.protocol="file:"),g)}class S{constructor(g){this.source=g,this.url=h(g.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&g.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?this._fullRequestReader._loaded:0}getFullReader(){return(0,t.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new R(this):new b(this),this._fullRequestReader}getRangeReader(g,n){if(n<=this._progressiveDataLength)return null;const s=this.isFsUrl?new E(this,g,n):new k(this,g,n);return this._rangeRequestReaders.push(s),s}cancelAllRequests(g){this._fullRequestReader&&this._fullRequestReader.cancel(g),this._rangeRequestReaders.slice(0).forEach(function(s){s.cancel(g)})}}e.PDFNodeStream=S;class M{constructor(g){this._url=g.url,this._done=!1,this._storedError=null,this.onProgress=null;const n=g.source;this._contentLength=n.length,this._loaded=0,this._filename=null,this._disableRange=n.disableRange||!1,this._rangeChunkSize=n.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!n.disableStream,this._isRangeSupported=!n.disableRange,this._readableStream=null,this._readCapability=(0,t.createPromiseCapability)(),this._headersCapability=(0,t.createPromiseCapability)()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const g=this._readableStream.read();return g===null?(this._readCapability=(0,t.createPromiseCapability)(),this.read()):(this._loaded+=g.length,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(g).buffer,done:!1})}cancel(g){if(!this._readableStream){this._error(g);return}this._readableStream.destroy(g)}_error(g){this._storedError=g,this._readCapability.resolve()}_setReadableStream(g){this._readableStream=g,g.on("readable",()=>{this._readCapability.resolve()}),g.on("end",()=>{g.destroy(),this._done=!0,this._readCapability.resolve()}),g.on("error",n=>{this._error(n)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new t.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class u{constructor(g){this._url=g.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=(0,t.createPromiseCapability)();const n=g.source;this._isStreamingSupported=!n.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const g=this._readableStream.read();return g===null?(this._readCapability=(0,t.createPromiseCapability)(),this.read()):(this._loaded+=g.length,this.onProgress&&this.onProgress({loaded:this._loaded}),{value:new Uint8Array(g).buffer,done:!1})}cancel(g){if(!this._readableStream){this._error(g);return}this._readableStream.destroy(g)}_error(g){this._storedError=g,this._readCapability.resolve()}_setReadableStream(g){this._readableStream=g,g.on("readable",()=>{this._readCapability.resolve()}),g.on("end",()=>{g.destroy(),this._done=!0,this._readCapability.resolve()}),g.on("error",n=>{this._error(n)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function y(L,g){return{protocol:L.protocol,auth:L.auth,host:L.hostname,port:L.port,path:L.path,method:"GET",headers:g}}class b extends M{constructor(g){super(g);const n=s=>{if(s.statusCode===404){const I=new t.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=I,this._headersCapability.reject(I);return}this._headersCapability.resolve(),this._setReadableStream(s);const d=I=>this._readableStream.headers[I.toLowerCase()],{allowRangeRequests:v,suggestedLength:_}=(0,i.validateRangeRequestCapabilities)({getResponseHeader:d,isHttp:g.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=v,this._contentLength=_||this._contentLength,this._filename=(0,i.extractFilenameFromHeader)(d)};this._request=null,this._url.protocol==="http:"?this._request=A.request(y(this._url,g.httpHeaders),n):this._request=P.request(y(this._url,g.httpHeaders),n),this._request.on("error",s=>{this._storedError=s,this._headersCapability.reject(s)}),this._request.end()}}class k extends u{constructor(g,n,s){super(g),this._httpHeaders={};for(const v in g.httpHeaders){const _=g.httpHeaders[v];typeof _>"u"||(this._httpHeaders[v]=_)}this._httpHeaders.Range=`bytes=${n}-${s-1}`;const d=v=>{if(v.statusCode===404){const _=new t.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=_;return}this._setReadableStream(v)};this._request=null,this._url.protocol==="http:"?this._request=A.request(y(this._url,this._httpHeaders),d):this._request=P.request(y(this._url,this._httpHeaders),d),this._request.on("error",v=>{this._storedError=v}),this._request.end()}}class R extends M{constructor(g){super(g);let n=decodeURIComponent(this._url.path);C.test(this._url.href)&&(n=n.replace(/^\//,"")),p.lstat(n,(s,d)=>{if(s){s.code==="ENOENT"&&(s=new t.MissingPDFException(`Missing PDF "${n}".`)),this._storedError=s,this._headersCapability.reject(s);return}this._contentLength=d.size,this._setReadableStream(p.createReadStream(n)),this._headersCapability.resolve()})}}class E extends u{constructor(g,n,s){super(g);let d=decodeURIComponent(this._url.path);C.test(this._url.href)&&(d=d.replace(/^\//,"")),this._setReadableStream(p.createReadStream(d,{start:n,end:s-1}))}}},function(l,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.createResponseStatusError=P,e.extractFilenameFromHeader=A,e.validateRangeRequestCapabilities=p,e.validateResponseStatus=x;var t=r(2),i=r(21);function p({getResponseHeader:C,isHttp:h,rangeChunkSize:S,disableRange:M}){(0,t.assert)(S>0,"Range chunk size must be larger than zero");const u={allowRangeRequests:!1,suggestedLength:void 0},y=parseInt(C("Content-Length"),10);return!Number.isInteger(y)||(u.suggestedLength=y,y<=2*S)||M||!h||C("Accept-Ranges")!=="bytes"||(C("Content-Encoding")||"identity")!=="identity"||(u.allowRangeRequests=!0),u}function A(C){const h=C("Content-Disposition");if(h){let S=(0,i.getFilenameFromContentDispositionHeader)(h);if(S.includes("%"))try{S=decodeURIComponent(S)}catch{}if(/\.pdf$/i.test(S))return S}return null}function P(C,h){return C===404||C===0&&h.startsWith("file:")?new t.MissingPDFException('Missing PDF "'+h+'".'):new t.UnexpectedResponseException("Unexpected server response ("+C+') while retrieving PDF "'+h+'".',C)}function x(C){return C===200||C===206}},function(l,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.getFilenameFromContentDispositionHeader=t;function t(i){let p=!0,A=P("filename\\*","i").exec(i);if(A){A=A[1];let y=S(A);return y=unescape(y),y=M(y),y=u(y),C(y)}if(A=h(i),A){const y=u(A);return C(y)}if(A=P("filename","i").exec(i),A){A=A[1];let y=S(A);return y=u(y),C(y)}function P(y,b){return new RegExp("(?:^|;)\\s*"+y+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',b)}function x(y,b){if(y){if(!/^[\x00-\xFF]+$/.test(b))return b;try{const k=new TextDecoder(y,{fatal:!0}),R=Array.from(b,function(E){return E.charCodeAt(0)&255});b=k.decode(new Uint8Array(R)),p=!1}catch{if(/^utf-?8$/i.test(y))try{b=decodeURIComponent(escape(b)),p=!1}catch{}}}return b}function C(y){return p&&/[\x80-\xff]/.test(y)&&(y=x("utf-8",y),p&&(y=x("iso-8859-1",y))),y}function h(y){const b=[];let k;const R=P("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(k=R.exec(y))!==null;){let[,L,g,n]=k;if(L=parseInt(L,10),L in b){if(L===0)break;continue}b[L]=[g,n]}const E=[];for(let L=0;L<b.length&&L in b;++L){let[g,n]=b[L];n=S(n),g&&(n=unescape(n),L===0&&(n=M(n))),E.push(n)}return E.join("")}function S(y){if(y.startsWith('"')){const b=y.slice(1).split('\\"');for(let k=0;k<b.length;++k){const R=b[k].indexOf('"');R!==-1&&(b[k]=b[k].slice(0,R),b.length=k+1),b[k]=b[k].replace(/\\(.)/g,"$1")}y=b.join('"')}return y}function M(y){const b=y.indexOf("'");if(b===-1)return y;const k=y.slice(0,b),E=y.slice(b+1).replace(/^[^']*'/,"");return x(k,E)}function u(y){return!y.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(y)?y:y.replace(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(b,k,R,E){if(R==="q"||R==="Q")return E=E.replace(/_/g," "),E=E.replace(/=([0-9a-fA-F]{2})/g,function(L,g){return String.fromCharCode(parseInt(g,16))}),x(k,E);try{E=atob(E)}catch{}return x(k,E)})}return""}},function(l,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.PDFNetworkStream=void 0;var t=r(2),i=r(20);const p=200,A=206;function P(M){const u=M.response;return typeof u!="string"?u:(0,t.stringToBytes)(u).buffer}class x{constructor(u,y){this.url=u,y=y||{},this.isHttp=/^https?:/i.test(u),this.httpHeaders=this.isHttp&&y.httpHeaders||{},this.withCredentials=y.withCredentials||!1,this.getXhr=y.getXhr||function(){return new XMLHttpRequest},this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(u,y,b){const k={begin:u,end:y};for(const R in b)k[R]=b[R];return this.request(k)}requestFull(u){return this.request(u)}request(u){const y=this.getXhr(),b=this.currXhrId++,k=this.pendingRequests[b]={xhr:y};y.open("GET",this.url),y.withCredentials=this.withCredentials;for(const R in this.httpHeaders){const E=this.httpHeaders[R];typeof E>"u"||y.setRequestHeader(R,E)}return this.isHttp&&"begin"in u&&"end"in u?(y.setRequestHeader("Range",`bytes=${u.begin}-${u.end-1}`),k.expectedStatus=A):k.expectedStatus=p,y.responseType="arraybuffer",u.onError&&(y.onerror=function(R){u.onError(y.status)}),y.onreadystatechange=this.onStateChange.bind(this,b),y.onprogress=this.onProgress.bind(this,b),k.onHeadersReceived=u.onHeadersReceived,k.onDone=u.onDone,k.onError=u.onError,k.onProgress=u.onProgress,y.send(null),b}onProgress(u,y){const b=this.pendingRequests[u];!b||b.onProgress&&b.onProgress(y)}onStateChange(u,y){const b=this.pendingRequests[u];if(!b)return;const k=b.xhr;if(k.readyState>=2&&b.onHeadersReceived&&(b.onHeadersReceived(),delete b.onHeadersReceived),k.readyState!==4||!(u in this.pendingRequests))return;if(delete this.pendingRequests[u],k.status===0&&this.isHttp){b.onError&&b.onError(k.status);return}const R=k.status||p;if(!(R===p&&b.expectedStatus===A)&&R!==b.expectedStatus){b.onError&&b.onError(k.status);return}const L=P(k);if(R===A){const g=k.getResponseHeader("Content-Range"),n=/bytes (\d+)-(\d+)\/(\d+)/.exec(g);b.onDone({begin:parseInt(n[1],10),chunk:L})}else L?b.onDone({begin:0,chunk:L}):b.onError&&b.onError(k.status)}hasPendingRequests(){for(const u in this.pendingRequests)return!0;return!1}getRequestXhr(u){return this.pendingRequests[u].xhr}isPendingRequest(u){return u in this.pendingRequests}abortAllRequests(){for(const u in this.pendingRequests)this.abortRequest(u|0)}abortRequest(u){const y=this.pendingRequests[u].xhr;delete this.pendingRequests[u],y.abort()}}class C{constructor(u){this._source=u,this._manager=new x(u.url,{httpHeaders:u.httpHeaders,withCredentials:u.withCredentials}),this._rangeChunkSize=u.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(u){const y=this._rangeRequestReaders.indexOf(u);y>=0&&this._rangeRequestReaders.splice(y,1)}getFullReader(){return(0,t.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new h(this._manager,this._source),this._fullRequestReader}getRangeReader(u,y){const b=new S(this._manager,u,y);return b.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(b),b}cancelAllRequests(u){this._fullRequestReader&&this._fullRequestReader.cancel(u),this._rangeRequestReaders.slice(0).forEach(function(b){b.cancel(u)})}}e.PDFNetworkStream=C;class h{constructor(u,y){this._manager=u;const b={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=y.url,this._fullRequestId=u.requestFull(b),this._headersReceivedCapability=(0,t.createPromiseCapability)(),this._disableRange=y.disableRange||!1,this._contentLength=y.length,this._rangeChunkSize=y.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const u=this._fullRequestId,y=this._manager.getRequestXhr(u),b=E=>y.getResponseHeader(E),{allowRangeRequests:k,suggestedLength:R}=(0,i.validateRangeRequestCapabilities)({getResponseHeader:b,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});k&&(this._isRangeSupported=!0),this._contentLength=R||this._contentLength,this._filename=(0,i.extractFilenameFromHeader)(b),this._isRangeSupported&&this._manager.abortRequest(u),this._headersReceivedCapability.resolve()}_onDone(u){u&&(this._requests.length>0?this._requests.shift().resolve({value:u.chunk,done:!1}):this._cachedChunks.push(u.chunk)),this._done=!0,!(this._cachedChunks.length>0)&&(this._requests.forEach(function(y){y.resolve({value:void 0,done:!0})}),this._requests=[])}_onError(u){const y=this._url,b=(0,i.createResponseStatusError)(u,y);this._storedError=b,this._headersReceivedCapability.reject(b),this._requests.forEach(function(k){k.reject(b)}),this._requests=[],this._cachedChunks=[]}_onProgress(u){this.onProgress&&this.onProgress({loaded:u.loaded,total:u.lengthComputable?u.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const u=(0,t.createPromiseCapability)();return this._requests.push(u),u.promise}cancel(u){this._done=!0,this._headersReceivedCapability.reject(u),this._requests.forEach(function(y){y.resolve({value:void 0,done:!0})}),this._requests=[],this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class S{constructor(u,y,b){this._manager=u;const k={onDone:this._onDone.bind(this),onProgress:this._onProgress.bind(this)};this._requestId=u.requestRange(y,b,k),this._requests=[],this._queuedChunk=null,this._done=!1,this.onProgress=null,this.onClosed=null}_close(){this.onClosed&&this.onClosed(this)}_onDone(u){const y=u.chunk;this._requests.length>0?this._requests.shift().resolve({value:y,done:!1}):this._queuedChunk=y,this._done=!0,this._requests.forEach(function(b){b.resolve({value:void 0,done:!0})}),this._requests=[],this._close()}_onProgress(u){!this.isStreamingSupported&&this.onProgress&&this.onProgress({loaded:u.loaded})}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk!==null){const y=this._queuedChunk;return this._queuedChunk=null,{value:y,done:!1}}if(this._done)return{value:void 0,done:!0};const u=(0,t.createPromiseCapability)();return this._requests.push(u),u.promise}cancel(u){this._done=!0,this._requests.forEach(function(y){y.resolve({value:void 0,done:!0})}),this._requests=[],this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},function(l,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.PDFFetchStream=void 0;var t=r(2),i=r(20);function p(h,S,M){return{method:"GET",headers:h,signal:M&&M.signal,mode:"cors",credentials:S?"include":"same-origin",redirect:"follow"}}function A(h){const S=new Headers;for(const M in h){const u=h[M];typeof u>"u"||S.append(M,u)}return S}class P{constructor(S){this.source=S,this.isHttp=/^https?:/i.test(S.url),this.httpHeaders=this.isHttp&&S.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?this._fullRequestReader._loaded:0}getFullReader(){return(0,t.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new x(this),this._fullRequestReader}getRangeReader(S,M){if(M<=this._progressiveDataLength)return null;const u=new C(this,S,M);return this._rangeRequestReaders.push(u),u}cancelAllRequests(S){this._fullRequestReader&&this._fullRequestReader.cancel(S),this._rangeRequestReaders.slice(0).forEach(function(u){u.cancel(S)})}}e.PDFFetchStream=P;class x{constructor(S){this._stream=S,this._reader=null,this._loaded=0,this._filename=null;const M=S.source;this._withCredentials=M.withCredentials||!1,this._contentLength=M.length,this._headersCapability=(0,t.createPromiseCapability)(),this._disableRange=M.disableRange||!1,this._rangeChunkSize=M.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),typeof AbortController<"u"&&(this._abortController=new AbortController),this._isStreamingSupported=!M.disableStream,this._isRangeSupported=!M.disableRange,this._headers=A(this._stream.httpHeaders);const u=M.url;fetch(u,p(this._headers,this._withCredentials,this._abortController)).then(y=>{if(!(0,i.validateResponseStatus)(y.status))throw(0,i.createResponseStatusError)(y.status,u);this._reader=y.body.getReader(),this._headersCapability.resolve();const b=E=>y.headers.get(E),{allowRangeRequests:k,suggestedLength:R}=(0,i.validateRangeRequestCapabilities)({getResponseHeader:b,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=k,this._contentLength=R||this._contentLength,this._filename=(0,i.extractFilenameFromHeader)(b),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new t.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:S,done:M}=await this._reader.read();return M?{value:S,done:M}:(this._loaded+=S.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(S).buffer,done:!1})}cancel(S){this._reader&&this._reader.cancel(S),this._abortController&&this._abortController.abort()}}class C{constructor(S,M,u){this._stream=S,this._reader=null,this._loaded=0;const y=S.source;this._withCredentials=y.withCredentials||!1,this._readCapability=(0,t.createPromiseCapability)(),this._isStreamingSupported=!y.disableStream,typeof AbortController<"u"&&(this._abortController=new AbortController),this._headers=A(this._stream.httpHeaders),this._headers.append("Range",`bytes=${M}-${u-1}`);const b=y.url;fetch(b,p(this._headers,this._withCredentials,this._abortController)).then(k=>{if(!(0,i.validateResponseStatus)(k.status))throw(0,i.createResponseStatusError)(k.status,b);this._readCapability.resolve(),this._reader=k.body.getReader()}),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:S,done:M}=await this._reader.read();return M?{value:S,done:M}:(this._loaded+=S.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded}),{value:new Uint8Array(S).buffer,done:!1})}cancel(S){this._reader&&this._reader.cancel(S),this._abortController&&this._abortController.abort()}}}])})});unwrapExports(pdf);var pdf_1=pdf;const pdfjsLib=pdf_1;export{pdfjsLib as default};
